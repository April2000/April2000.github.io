!function(t){t.FE.PLUGINS.glavred=function(e){return{proofread:function(){var o=function(){alertify.error(e.language.translate("editor::text::glavred_error")),e.grButton.removeClass("loading")},n=setTimeout(function(){e.grButton.hasClass("loading")&&o()},1e4);if(!e.grButton.hasClass("loading")){var r=e.html.get();e.grButton.addClass("loading");try{glvrd.getStatus(function(o){"ok"===o.status&&glvrd.proofread(r,function(o){if("ok"===o.status){if(10===o.score)return clearTimeout(n),alertify.success(e.language.translate("editor::text::glavred_no_recommendations")),void e.grButton.removeClass("loading");var a=o.fragments.map(function(t){return r.substring(t.start,t.end)}).filter(function(t,e,o){return o.indexOf(t)===e});r=r.replace(new RegExp(a.join("|"),"g"),function(t,e){var n=o.fragments.find(function(t){return t.start==e});return n?"<glavred><tooltip><strong>"+n.hint.name+"</strong>"+n.hint.description+"</tooltip>"+t+"</glavred>":t}),e.html.set(r),e.grButton.removeClass("loading"),clearTimeout(n),e.toolbar.hide(),t("glavred",e.$el).on("mouseover",function(o){var n=t("tooltip",this),r=e.doc.body;if(n.length){t(this).data("tooltip",n.get(0)),n.removeClass("top");var a=n.get(0).getBoundingClientRect(),i=e.doc.body.getBoundingClientRect();a.top+a.height>i.height&&(n.addClass("top"),a=n.get(0).getBoundingClientRect()),n.css({top:a.top+(window.pageYOffset||e.doc.documentElement.scrollTop||r.scrollTop||0),left:a.left,opacity:1,bottom:"auto"}),t(r).append(n)}}),t("glavred",e.$el).on("mouseleave",function(e){var o=t(t(this).data("tooltip"));o.removeAttr("style"),t(this).append(o)})}})})}catch(t){clearTimeout(n),o()}}}}},t.FE.DefineIcon("glavred",{PATH:'<svg viewBox="0 0 28 28"><path d="M20 8c-.226.95-.57 1.87-1.02 2.735-.636.13-1.243.37-1.798.708a8.73 8.73 0 0 1 1.567-.29c-.205.354-.428.7-.668 1.03a6.31 6.31 0 0 0-2.396.578 8.048 8.048 0 0 1 2.005-.064 11.55 11.55 0 0 1-6.81 4.077 82.145 82.145 0 0 1 6.508-6.83A32.377 32.377 0 0 0 8 20a17.398 17.398 0 0 1 2.058-3.72 11.34 11.34 0 0 1 4.66-6.46c.098.376.244.734.437 1.067a7.776 7.776 0 0 1 .038-1.364A11.088 11.088 0 0 1 20 8zm-9.71 11.955c-.09.085-.207.045-.26-.086-.056-.138-.03-.31.06-.388 1.087-.992 2.41-1.25 3.634-.695 1.284.78 2.724.796 4.015.052.098-.06.21.014.247.16.038.137-.01.3-.11.36-1.376.796-2.91.777-4.282-.045-1.112-.498-2.317-.264-3.305.64z"/></svg>',template:"flexbeSVG"}),t.FE.RegisterCommand("glavred",{undo:!0,title:"editor::text::glavred",icon:"glavred",callback:function(){this.glavred.proofread()},refresh:function(t){this.grButton=t},plugin:"glavred"})}(jQuery);