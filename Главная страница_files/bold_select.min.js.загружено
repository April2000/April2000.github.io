!function(t){t.extend(t.FroalaEditor.POPUP_TEMPLATES,{"fontWeight.popup":"[_BUTTONS_][_CUSTOM_LAYER_]"}),t.extend(t.FroalaEditor.DEFAULTS,{fontWeightButtons:["fontWeightBack"],fontWeightMin:1,fontWeightMax:3,fontWeightStep:1}),t.FroalaEditor.PLUGINS.fontWeight=function(e){function o(o){var i=e.popups.get("fontWeight.popup"),n=o.target.valueAsNumber,s=400;switch(n){case 1:s=300;break;case 2:s=400;break;case 3:s=700}t.debounce(function(){e.selection.restore(),e.format.remove("strong"),e.format.remove("b"),e.format.applyStyle("font-weight",s),e.selection.save(),e.events.trigger("contentChanged")},e.browser.mozilla?150:0)(),t(".scale .active",i).removeClass("active"),t(".scale .v"+n,i).addClass("active")}function i(){var i="";e.opts.fontWeightButtons.length&&(i='<div class="font-weight-title"><div class="fr-buttons">'+e.button.buildList(e.opts.fontWeightButtons)+'</div><div class="font-weight">Вес шрифта</div></div>');var n={buttons:i,custom_layer:'<div class="font-weight-content"><div class="range"><input type="range" step="'+e.opts.fontWeightStep+'" min="'+e.opts.fontWeightMin+'" max="'+e.opts.fontWeightMax+'"></div><div class="scale"><div class="v1">Light</div><div class="v2">Normal</div><div class="v3">Bold</div></div></div>'},s=e.popups.create("fontWeight.popup",n);return t("input",s).on("input",o),s}return{initPopup:i,showPopup:function(){var o=e.popups.get("fontWeight.popup"),n=t(e.selection.element());e.selection.isFull()&&n.hasClass("fr-element")&&n.find('[style*="font-weight"]')&&(n=n.find('[style*="font-weight"]'));var s=n.css("font-weight");~["100","200","300","lighter","light"].indexOf(s)?s=1:~["400","500","normal"].indexOf(s)?s=2:~["600","700","800","bold","bolder"].indexOf(s)&&(s=3),o||(o=i()),o.hasClass("fr-active")||(t("input",o).val(s),t(".scale .active",o).removeClass("active"),t(".scale .v"+s,o).addClass("active"),e.selection.text()||e.doc.execCommand("selectAll",!1,!1),e.popups.setContainer("fontWeight.popup",e.$tb),e.position.forSelection(o),e.popups.show("fontWeight.popup"),e.selection.save())},hidePopup:function(){e.popups.hide("fontWeight.popup"),e.toolbar.showInline()}}},t.FE.RegisterCommand("fontWeight",{title:"editor::text::font_weight",icon:"fontWeight",undo:!0,focus:!1,popup:!0,plugin:"fontWeight",callback:function(){this.fontWeight.showPopup()}}),t.FE.RegisterCommand("fontWeightBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.fontWeight.hidePopup()}})}(jQuery);