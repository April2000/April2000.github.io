(function(o){o(jQuery)})(function(o){var u=function(E,v){this.id=++o.FE.ID,this.opts=o.extend(!0,{},o.extend({},u.DEFAULTS,"object"==typeof v&&v));var S=JSON.stringify(o.extend({},this.opts,{scrollableContainer:"body"}));o.FE.OPTS_MAPPING[S]=o.FE.OPTS_MAPPING[S]||this.id,this.sid=o.FE.OPTS_MAPPING[S],o.FE.SHARED[this.sid]=o.FE.SHARED[this.sid]||{},this.shared=o.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=o(E),this.$oel.data("froala.editor",this),this.o_doc=E.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var T=o(this.o_win).scrollTop();this.$oel.on("froala.doInit",o.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=o(this.doc),this.$win=o(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(o.FE.PLUGINS)),this.opts.initOnClick?(this.load(o.FE.MODULES),this.$el.on("touchstart.init",function(){o(this).data("touched",!0)}),this.$el.on("touchmove.init",function(){o(this).removeData("touched")}),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",o.proxy(function(C){if("touchend"==C.type&&!this.$el.data("touched"))return!0;if(1===C.which||!C.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(o.FE.MODULES),this.load(o.FE.PLUGINS);var N=C.originalEvent&&C.originalEvent.originalTarget;N&&"IMG"==N.tagName&&o(N).trigger("mousedown"),"undefined"==typeof this.ul&&this.destroy(),"touchend"==C.type&&this.image&&C.originalEvent&&C.originalEvent.target&&o(C.originalEvent.target).is("img")&&setTimeout(o.proxy(function(){this.image.edit(o(C.originalEvent.target))},this),100),this.ready=!0,this.events.trigger("initialized")}},this))):(this.load(o.FE.MODULES),this.load(o.FE.PLUGINS),o(this.o_win).scrollTop(T),"undefined"==typeof this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))},this)),this._init()};u.DEFAULTS={initOnClick:!1,pluginsEnabled:null},u.MODULES={},u.PLUGINS={},u.VERSION="2.4.2",u.INSTANCES=[],u.OPTS_MAPPING={},u.SHARED={},u.ID=0,u.prototype._init=function(){var E=this.$oel.prop("tagName"),v=o.proxy(function(){"TEXTAREA"!=E&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=o("<iframe src=\"about:blank\" frameBorder=\"0\">"),this.$wp=o("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document,this.$oel.trigger("froala.doInit")):(this.$el=o("<div></div>"),this.el=this.$el.get(0),this.$wp=o("<div></div>").append(this.$el),this.$box.html(this.$wp),this.$oel.trigger("froala.doInit"))},this),S=o.proxy(function(){this.$box=o("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,o.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,o.proxy(function(){this.events.trigger("form.reset")},this)),v()},this),T=o.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),C=o.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),N=o.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(A){A.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?N():"TEXTAREA"==E?S():"A"==E?T():"IMG"==E?C():"BUTTON"==E||"INPUT"==E?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,N()):v()},u.prototype.load=function(E){for(var v in E)if(E.hasOwnProperty(v)){if(this[v])continue;if(o.FE.PLUGINS[v]&&0>this.opts.pluginsEnabled.indexOf(v))continue;if(this[v]=new E[v](this),this[v]._init&&(this[v]._init(),this.opts.initOnClick&&"core"==v))return!1}},u.prototype.destroy=function(){this.shared.count--,this.events.$off();var E=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var v in this.shared)this.shared.hasOwnProperty(v)&&(null==this.shared[v],o.FE.SHARED[this.sid][v]=null);o.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(E),o.FE.INSTANCES.splice(o.FE.INSTANCES.indexOf(this),1)},o.fn.froalaEditor=function(E){for(var v=[],S=0;S<arguments.length;S++)v.push(arguments[S]);if("string"==typeof E){var T=[];return this.each(function(){var C=o(this),N=C.data("froala.editor");if(!N)return console.warn("Editor should be initialized before calling the "+E+" method.");var A,O;if(0<E.indexOf(".")&&N[E.split(".")[0]]?(N[E.split(".")[0]]&&(A=N[E.split(".")[0]]),O=E.split(".")[1]):(A=N,O=E.split(".")[0]),A[O]){var _=A[O].apply(N,v.slice(1));void 0===_?T.push(this):0===T.length&&T.push(_)}else return o.error("Method "+E+" does not exist in Froala Editor.")}),1==T.length?T[0]:T}return"object"!=typeof E&&E?void 0:this.each(function(){var C=o(this).data("froala.editor");if(!C){var N=this;new u(N,E)}})},o.fn.froalaEditor.Constructor=u,o.FroalaEditor=u,o.FE=u,o.FE.XS=0,o.FE.SM=1,o.FE.MD=2,o.FE.LG=3,o.FE.MODULES.helpers=function(E){function v(){var q=-1,V,G;return"Microsoft Internet Explorer"==navigator.appName?(V=navigator.userAgent,G=/MSIE ([0-9]{1,}[\.0-9]{0,})/,null!==G.exec(V)&&(q=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(V=navigator.userAgent,G=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/,null!==G.exec(V)&&(q=parseFloat(RegExp.$1))),q}function S(){var q={},V=v();if(0<V)q.msie=!0;else{var G=navigator.userAgent.toLowerCase(),Q=/(edge)[ \/]([\w.]+)/.exec(G)||/(chrome)[ \/]([\w.]+)/.exec(G)||/(webkit)[ \/]([\w.]+)/.exec(G)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(G)||/(msie) ([\w.]+)/.exec(G)||0>G.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(G)||[],Z={browser:Q[1]||"",version:Q[2]||"0"};Q[1]&&(q[Z.browser]=!0),q.chrome?q.webkit=!0:q.webkit&&(q.safari=!0)}return q.msie&&(q.version=V),q}function T(){return /(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!A()}function C(){return /(Android)/g.test(navigator.userAgent)&&!A()}function N(){return /(Blackberry)/g.test(navigator.userAgent)}function A(){return /(Windows Phone)/gi.test(navigator.userAgent)}function F(q){return parseInt(q,10)||0}function M(q){if(!/^(https?:|ftps?:|)\/\//i.test(q))return!1;q=(q+"").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20");var V=/(http|ftp|https):\/\/[a-z\u00a1-\uffff0-9{}]+(\.[a-z\u00a1-\uffff0-9{}]*)*([a-z\u00a1-\uffff0-9.,@?^=%&amp;:\/~+#-_{}]*[a-z\u00a1-\uffff0-9@?^=%&amp;\/~+#-_{}])?/gi;return V.test(q)}function H(){var q=E.o_doc.createElement("div");try{q.querySelectorAll(":scope *")}catch(G){function Q(Z,J){var ee=Z[J];Z[J]=function(te){var oe=!1,ie=!1,ne;if(te.match(V)){te=te.replace(V,""),this.parentNode||(q.appendChild(this),ie=!0);var se=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+new Date().getTime(),oe=!0),ne=ee.call(se,"#"+this.id+" "+te),oe&&(this.id=""),ie&&q.removeChild(this),ne}return ee.call(this,te)}}var V=/^\s*:scope/gi;Q(Element.prototype,"querySelector"),Q(Element.prototype,"querySelectorAll")}}var z,X=null;return{_init:function(){E.browser=S(),H()},isIOS:T,isMac:function(){return null==X&&(X=0<=navigator.platform.toUpperCase().indexOf("MAC")),X},isAndroid:C,isBlackberry:N,isWindowsPhone:A,isMobile:function(){return C()||T()||N()},requestAnimationFrame:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(q){window.setTimeout(q,1e3/60)}},getPX:F,screenSize:function(){var q=o("<div class=\"fr-visibility-helper\"></div>").appendTo("body"),V=F(q.css("margin-left"));return q.remove(),V},isTouch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},sanitizeURL:function(q){if(!/^(https?:|ftps?:|)\/\//i.test(q))q=encodeURIComponent(q).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/skype%3Alive%3A/gi,"skype:live:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}");else if(!M(q)&&!M("http:"+q))return"";return q},isArray:function(q){return q&&!q.propertyIsEnumerable("length")&&"object"==typeof q&&"number"==typeof q.length},RGBToHex:function(q){function V(G){return("0"+parseInt(G,10).toString(16)).slice(-2)}try{return q&&"transparent"!==q?/^#[0-9A-F]{6}$/i.test(q)?q:(q=q.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),("#"+V(q[1])+V(q[2])+V(q[3])).toUpperCase()):""}catch(G){return null}},HEXtoRGB:function(q){var V=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;q=q.replace(V,function(Q,Z,J,ee){return Z+Z+J+J+ee+ee});var G=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(q);return G?"rgb("+parseInt(G[1],16)+", "+parseInt(G[2],16)+", "+parseInt(G[3],16)+")":""},isURL:M,getAlignment:function(q){var V=(q.css("text-align")||"").replace(/-(.*)-/g,"");if(0>["left","right","justify","center"].indexOf(V)){if(!z){var G=o("<div dir=\"auto\" style=\"text-align: initial; position: fixed; left: -3000px;\"><span id=\"s1\">.</span><span id=\"s2\">.</span></div>");o("body").append(G);var Q=G.find("#s1").get(0).getBoundingClientRect().left,Z=G.find("#s2").get(0).getBoundingClientRect().left;G.remove(),z=Q<Z?"left":"right"}V=z}return V},scrollTop:function(){return E.o_win.pageYOffset?E.o_win.pageYOffset:E.o_doc.documentElement&&E.o_doc.documentElement.scrollTop?E.o_doc.documentElement.scrollTop:E.o_doc.body.scrollTop?E.o_doc.body.scrollTop:0},scrollLeft:function(){return E.o_win.pageXOffset?E.o_win.pageXOffset:E.o_doc.documentElement&&E.o_doc.documentElement.scrollLeft?E.o_doc.documentElement.scrollLeft:E.o_doc.body.scrollLeft?E.o_doc.body.scrollLeft:0}}},o.FE.MODULES.events=function(E){function v(Z,J,ee){P(Z,J,ee)}function S(){v(E.$el,"cut copy paste beforepaste",function(Z){U(Z.type,[Z])})}function T(){v(E.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(Z){U(Z.type,[Z])}),I("mousedown",function(){for(var Z=0;Z<o.FE.INSTANCES.length;Z++)o.FE.INSTANCES[Z]!=E&&o.FE.INSTANCES[Z].popups&&o.FE.INSTANCES[Z].popups.areVisible()&&o.FE.INSTANCES[Z].$el.find(".fr-marker").remove()})}function C(){v(E.$el,"keydown keypress keyup input",function(Z){U(Z.type,[Z])})}function N(){v(E.$win,E._mousedown,function(Z){U("window.mousedown",[Z]),M()}),v(E.$win,E._mouseup,function(Z){U("window.mouseup",[Z])}),v(E.$win,"cut copy keydown keyup touchmove touchend",function(Z){U("window."+Z.type,[Z])})}function A(){v(E.$doc,"dragend drop",function(Z){U("document."+Z.type,[Z])})}function O(Z){if("undefined"==typeof Z&&(Z=!0),!E.$wp)return!1;if(E.helpers.isIOS()&&E.$win.get(0).focus(),!E.core.hasFocus()&&Z){var J=E.$win.scrollTop();return E.browser.msie&&E.$box&&E.$box.css("position","fixed"),E.$el.focus(),E.browser.msie&&E.$box&&E.$box.css("position",""),J!=E.$win.scrollTop()&&E.$win.scrollTop(J),!1}if(!E.core.hasFocus()||0<E.$el.find(".fr-marker").length)return!1;var ee=E.selection.info(E.el);if(ee.atStart&&E.selection.isCollapsed()&&null!=E.html.defaultTag()){var te=E.markers.insert();if(te&&!E.node.blockParent(te)){o(te).remove();var ne=E.$el.find(E.html.blockTagsQuery()).get(0);ne&&(o(ne).prepend(o.FE.MARKERS),E.selection.restore())}else te&&o(te).remove()}}function _(){v(E.$el,"focus",function(Z){L()&&(O(!1),!1===G&&U(Z.type,[Z]))}),v(E.$el,"blur",function(Z){L()&&!0===G&&(U(Z.type,[Z]),M())}),I("focus",function(){G=!0}),I("blur",function(){G=!1})}function F(){E.helpers.isMobile()?(E._mousedown="touchstart",E._mouseup="touchend",E._move="touchmove",E._mousemove="touchmove"):(E._mousedown="mousedown",E._mouseup="mouseup",E._move="",E._mousemove="mousemove")}function w(Z){var J=o(Z.currentTarget);return E.edit.isDisabled()||E.node.hasClass(J.get(0),"fr-disabled")?(Z.preventDefault(),!1):"mousedown"===Z.type&&1!==Z.which||void(!E.helpers.isMobile()&&Z.preventDefault(),(E.helpers.isAndroid()||E.helpers.isWindowsPhone())&&0===J.parents(".fr-dropdown-menu").length&&(Z.preventDefault(),Z.stopPropagation()),J.addClass("fr-selected"),E.events.trigger("commands.mousedown",[J]))}function D(Z,J){var ee=o(Z.currentTarget);if(E.edit.isDisabled()||E.node.hasClass(ee.get(0),"fr-disabled"))return Z.preventDefault(),!1;if("mouseup"===Z.type&&1!==Z.which)return!0;if(!E.node.hasClass(ee.get(0),"fr-selected"))return!0;if("touchmove"!=Z.type){if(Z.stopPropagation(),Z.stopImmediatePropagation(),Z.preventDefault(),!E.node.hasClass(ee.get(0),"fr-selected"))return o(".fr-selected",E.opts.scrollableContainer).removeClass("fr-selected"),!1;if(o(".fr-selected",E.opts.scrollableContainer).removeClass("fr-selected"),ee.data("dragging")||ee.attr("disabled"))return ee.removeData("dragging"),!1;var te=ee.data("timeout");te&&(clearTimeout(te),ee.removeData("timeout")),J.apply(E,[Z])}else ee.data("timeout")||ee.data("timeout",setTimeout(function(){ee.data("dragging",!0)},100))}function M(){V=!0}function L(){return V}function I(Z,J,ee){var te=Z.split(" ");if(1<te.length){for(var ne=0;ne<te.length;ne++)I(te[ne],J,ee);return!0}"undefined"==typeof ee&&(ee=!1);var oe;oe=0==Z.indexOf("shared.")?E.shared._events[Z]=E.shared._events[Z]||[]:q[Z]=q[Z]||[],ee?oe.unshift(J):oe.push(J)}function P(Z,J,ee,te,ne){"function"==typeof ee&&(ne=te,te=ee,ee=!1);var oe=ne?E.shared.$_events:Q,ie=ne?E.sid:E.id;ee?Z.on(J.split(" ").join(".ed"+ie+" ")+".ed"+ie,ee,te):Z.on(J.split(" ").join(".ed"+ie+" ")+".ed"+ie,te),0>oe.indexOf(Z.get(0))&&oe.push(Z.get(0))}function K(Z,J){for(var ee=0;ee<Z.length;ee++)o(Z[ee]).off(".ed"+J)}function U(Z,J,ee){if(!E.edit.isDisabled()||ee){var te;if(0!=Z.indexOf("shared."))te=q[Z];else{if(0<E.shared.count)return!1;te=E.shared._events[Z]}var ne;if(te)for(var oe=0;oe<te.length;oe++)if(ne=te[oe].apply(E,J),!1===ne)return!1;return ne=E.$oel.triggerHandler("froalaEditor."+Z,o.merge([E],J||[])),!1!==ne&&ne}}function Y(){for(var Z in q)q.hasOwnProperty(Z)&&delete q[Z]}function z(){for(var Z in E.shared._events)E.shared._events.hasOwnProperty(Z)&&delete E.shared._events[Z]}var q={},V,G=!1,Q=[];return{_init:function(){E.shared.$_events=E.shared.$_events||[],E.shared._events={},F(),T(),N(),A(),C(),_(),M(),S(),I("destroy",Y),I("shared.destroy",z)},on:I,trigger:U,bindClick:function(Z,J,ee){P(Z,E._mousedown,J,function(te){E.edit.isDisabled()||w(te)},!0),P(Z,E._mouseup+" "+E._move,J,function(te){E.edit.isDisabled()||D(te,ee)},!0),P(Z,"mousedown click mouseup",J,function(te){E.edit.isDisabled()||te.stopPropagation()},!0),I("window.mouseup",function(){E.edit.isDisabled()||(Z.find(J).removeClass("fr-selected"),M())})},disableBlur:function(){V=!1},enableBlur:M,blurActive:L,focus:O,chainTrigger:function(Z,J,ee){if(!E.edit.isDisabled()||ee){var te;if(0!=Z.indexOf("shared."))te=q[Z];else{if(0<E.shared.count)return!1;te=E.shared._events[Z]}var ne;if(te)for(var oe=0;oe<te.length;oe++)ne=te[oe].apply(E,[J]),"undefined"!=typeof ne&&(J=ne);return ne=E.$oel.triggerHandler("froalaEditor."+Z,o.merge([E],[J])),"undefined"!=typeof ne&&(J=ne),J}},$on:P,$off:function(){K(Q,E.id),Q=[],0==E.shared.count&&(K(E.shared.$_events,E.sid),E.shared.$_events=null)}}},o.FE.MODULES.node=function(E){function v(W){return W&&"IFRAME"!=W.tagName?Array.prototype.slice.call(W.childNodes||[]):[]}function S(W){return!!W&&!(W.nodeType!=Node.ELEMENT_NODE)&&0<=o.FE.BLOCK_TAGS.indexOf(W.tagName.toLowerCase())}function A(W){var Y={},z=W.attributes;if(z)for(var X=0,q;X<z.length;X++)q=z[X],Y[q.nodeName]=q.value;return Y}function O(W){for(var Y="",z=A(W),X=Object.keys(z).sort(),q=0;q<X.length;q++){var V=X[q],G=z[V];Y+=0>G.indexOf("\"")?" "+V+"=\""+G+"\"":" "+V+"='"+G+"'"}return Y}function D(W,Y){"undefined"==typeof Y&&(Y=!0);for(var z=W.previousSibling;z&&Y&&E.node.hasClass(z,"fr-marker");)z=z.previousSibling;return!z||z.nodeType==Node.TEXT_NODE&&""===z.textContent&&D(z)}function M(W,Y){"undefined"==typeof Y&&(Y=!0);for(var z=W.nextSibling;z&&Y&&E.node.hasClass(z,"fr-marker");)z=z.nextSibling;return!z||z.nodeType==Node.TEXT_NODE&&""===z.textContent&&M(z)}function B(W){return W===E.el}return{isBlock:S,isEmpty:function(W,Y){if(!W)return!0;if(W.querySelector("table"))return!1;var z=v(W);1==z.length&&S(z[0])&&(z=v(z[0]));for(var X=!1,q=0,V;q<z.length;q++)if(V=z[q],!(Y&&E.node.hasClass(V,"fr-marker"))&&(V.nodeType!=Node.TEXT_NODE||0!=V.textContent.length)){if("BR"!=V.tagName&&0<(V.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length)return!1;if(X)return!1;"BR"==V.tagName&&(X=!0)}return!(W.querySelectorAll(o.FE.VOID_ELEMENTS.join(",")).length-W.querySelectorAll("br").length)&&!W.querySelector(E.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")&&!(1<W.querySelectorAll(o.FE.BLOCK_TAGS.join(",")).length)&&!W.querySelector(E.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")},blockParent:function(W){for(;W&&W.parentNode!==E.el&&!(W.parentNode&&E.node.hasClass(W.parentNode,"fr-inner"));)if(W=W.parentNode,S(W))return W;return null},deepestParent:function(W,Y,z){if("undefined"==typeof Y&&(Y=[]),"undefined"==typeof z&&(z=!0),Y.push(E.el),0<=Y.indexOf(W.parentNode)||W.parentNode&&E.node.hasClass(W.parentNode,"fr-inner")||W.parentNode&&0<=o.FE.SIMPLE_ENTER_TAGS.indexOf(W.parentNode.tagName)&&z)return null;for(;0>Y.indexOf(W.parentNode)&&W.parentNode&&!E.node.hasClass(W.parentNode,"fr-inner")&&(0>o.FE.SIMPLE_ENTER_TAGS.indexOf(W.parentNode.tagName)||!z)&&(!(S(W)&&S(W.parentNode))||!z);)W=W.parentNode;return W},rawAttributes:A,attributes:O,clearAttributes:function(W){for(var Y=W.attributes,z=0,X;z<Y.length;z++)X=Y[z],W.removeAttribute(X.nodeName)},openTagString:function(W){return"<"+W.tagName.toLowerCase()+O(W)+">"},closeTagString:function(W){return"</"+W.tagName.toLowerCase()+">"},isFirstSibling:D,isLastSibling:M,isList:function(W){return!!W&&0<=["UL","OL"].indexOf(W.tagName)},isElement:B,contents:v,isVoid:function(W){return W&&W.nodeType==Node.ELEMENT_NODE&&0<=o.FE.VOID_ELEMENTS.indexOf((W.tagName||"").toLowerCase())},hasFocus:function(W){return W===E.doc.activeElement&&(!E.doc.hasFocus||E.doc.hasFocus())&&!!(B(W)||W.type||W.href||~W.tabIndex)},isEditable:function(W){return(!W.getAttribute||"false"!=W.getAttribute("contenteditable"))&&0>["STYLE","SCRIPT"].indexOf(W.tagName)},isDeletable:function(W){return W&&W.nodeType==Node.ELEMENT_NODE&&W.getAttribute("class")&&0<=(W.getAttribute("class")||"").indexOf("fr-deletable")},hasClass:function(W,Y){return W instanceof o&&(W=W.get(0)),W&&W.classList&&W.classList.contains(Y)},filter:function(W){return E.browser.msie?W:{acceptNode:W}}}},o.FE.INVISIBLE_SPACE="&#8203;",o.FE.START_MARKER="<span class=\"fr-marker\" data-id=\"0\" data-type=\"true\" style=\"display: none; line-height: 0;\">"+o.FE.INVISIBLE_SPACE+"</span>",o.FE.END_MARKER="<span class=\"fr-marker\" data-id=\"0\" data-type=\"false\" style=\"display: none; line-height: 0;\">"+o.FE.INVISIBLE_SPACE+"</span>",o.FE.MARKERS=o.FE.START_MARKER+o.FE.END_MARKER,o.FE.MODULES.markers=function(E){function v(O,_){return o("<span class=\"fr-marker\" data-id=\""+_+"\" data-type=\""+O+"\" style=\"display: "+(E.browser.safari?"none":"inline-block")+"; line-height: 0;\">"+o.FE.INVISIBLE_SPACE+"</span>",E.doc)[0]}function T(){if(!E.$wp)return null;try{var O=E.selection.ranges(0),_=O.commonAncestorContainer;if(_!=E.el&&0==E.$el.find(_).length)return null;var F=O.cloneRange(),w=O.cloneRange();F.collapse(!0);var D=o("<span class=\"fr-marker\" style=\"display: none; line-height: 0;\">"+o.FE.INVISIBLE_SPACE+"</span>",E.doc)[0];if(F.insertNode(D),D=E.$el.find("span.fr-marker").get(0),D){for(var M=D.nextSibling;M&&M.nodeType===Node.TEXT_NODE&&0===M.textContent.length;)o(M).remove(),M=E.$el.find("span.fr-marker").get(0).nextSibling;return E.selection.clear(),E.selection.get().addRange(w),D}return null}catch(R){console.warn("MARKER",R)}}function A(){E.$el.find(".fr-marker").remove()}return{place:function(O,_,F){try{var w=O.cloneRange();if(w.collapse(_),w.insertNode(v(_,F)),!0===_&&O.collapsed)for(var D=E.$el.find("span.fr-marker[data-type=\"true\"][data-id=\""+F+"\"]"),M=D.get(0).nextSibling;M&&M.nodeType===Node.TEXT_NODE&&0===M.textContent.length;)o(M).remove(),M=D.nextSibling;if(!0===_&&!O.collapsed){var D=E.$el.find("span.fr-marker[data-type=\"true\"][data-id=\""+F+"\"]").get(0),M=D.nextSibling;if(M&&M.nodeType===Node.ELEMENT_NODE&&E.node.isBlock(M)){var R=[M];do M=R[0],R=E.node.contents(M);while(R[0]&&E.node.isBlock(R[0]));o(M).prepend(o(D))}}if(!1===_&&!O.collapsed){var D=E.$el.find("span.fr-marker[data-type=\"false\"][data-id=\""+F+"\"]").get(0),M=D.previousSibling;if(M&&M.nodeType===Node.ELEMENT_NODE&&E.node.isBlock(M)){var R=[M];do M=R[R.length-1],R=E.node.contents(M);while(R[R.length-1]&&E.node.isBlock(R[R.length-1]));o(M).append(o(D))}D.parentNode&&0<=["TD","TH"].indexOf(D.parentNode.tagName)&&D.parentNode.previousSibling&&!D.previousSibling&&o(D.parentNode.previousSibling).append(D)}var L=E.$el.find("span.fr-marker[data-type=\""+_+"\"][data-id=\""+F+"\"]").get(0);return L&&(L.style.display="none"),L}catch(B){return null}},insert:T,split:function(){E.selection.isCollapsed()||E.selection.remove();var O=E.$el.find(".fr-marker").get(0);if(null==O&&(O=T()),null==O)return null;var _=E.node.deepestParent(O);if(_||(_=E.node.blockParent(O),_&&"LI"!=_.tagName&&(_=null)),_)if(E.node.isBlock(_)&&E.node.isEmpty(_))o(_).replaceWith("<span class=\"fr-marker\"></span>");else if(E.cursor.isAtStart(O,_))o(_).before("<span class=\"fr-marker\"></span>"),o(O).remove();else if(E.cursor.isAtEnd(O,_))o(_).after("<span class=\"fr-marker\"></span>"),o(O).remove();else{var F=O,w="",D="";do F=F.parentNode,w+=E.node.closeTagString(F),D=E.node.openTagString(F)+D;while(F!=_);o(O).replaceWith("<span id=\"fr-break\"></span>");var M=E.node.openTagString(_)+o(_).html()+E.node.closeTagString(_);M=M.replace(/<span id="fr-break"><\/span>/g,w+"<span class=\"fr-marker\"></span>"+D),o(_).replaceWith(M)}return E.$el.find(".fr-marker").get(0)},insertAtPoint:function(O){var _=O.clientX,F=O.clientY;A();var D=null,w;if("undefined"==typeof E.doc.caretPositionFromPoint?"undefined"!=typeof E.doc.caretRangeFromPoint&&(w=E.doc.caretRangeFromPoint(_,F),D=E.doc.createRange(),D.setStart(w.startContainer,w.startOffset),D.setEnd(w.startContainer,w.startOffset)):(w=E.doc.caretPositionFromPoint(_,F),D=E.doc.createRange(),D.setStart(w.offsetNode,w.offset),D.setEnd(w.offsetNode,w.offset)),null!=D&&"undefined"!=typeof E.win.getSelection){var M=E.win.getSelection();M.removeAllRanges(),M.addRange(D)}else if("undefined"!=typeof E.doc.body.createTextRange)try{D=E.doc.body.createTextRange(),D.moveToPoint(_,F);var R=D.duplicate();R.moveToPoint(_,F),D.setEndPoint("EndToEnd",R),D.select()}catch(L){return!1}T()},remove:A}},o.FE.MODULES.selection=function(E){function v(){var X="";return E.win.getSelection?X=E.win.getSelection():E.doc.getSelection?X=E.doc.getSelection():E.doc.selection&&(X=E.doc.selection.createRange().text),X.toString()}function S(){var X="";return X=E.win.getSelection?E.win.getSelection():E.doc.getSelection?E.doc.getSelection():E.doc.selection.createRange(),X}function T(X){var q=S(),V=[];if(q&&q.getRangeAt&&q.rangeCount)for(var V=[],G=0;G<q.rangeCount;G++)V.push(q.getRangeAt(G));else V=E.doc.createRange?[E.doc.createRange()]:[];return"undefined"==typeof X?V:V[X]}function C(){var X=S();try{X.removeAllRanges?X.removeAllRanges():X.empty?X.empty():X.clear&&X.clear()}catch(q){}}function O(X,q){var V=X;return V.nodeType==Node.ELEMENT_NODE&&0<V.childNodes.length&&V.childNodes[q]&&(V=V.childNodes[q]),V.nodeType==Node.TEXT_NODE&&(V=V.parentNode),V}function F(){if(E.$wp){E.markers.remove();for(var X=T(),q=[],V=0;V<X.length;V++)if(X[V].startContainer!==E.doc){var G=X[V],Q=G.collapsed,Z=E.markers.place(G,!0,V),J=E.markers.place(G,!1,V);if(E.el.normalize(),E.browser.safari&&!Q){var G=E.doc.createRange();G.setStartAfter(Z),G.setEndBefore(J),q.push(G)}}if(E.browser.safari&&q.length){E.selection.clear();for(var V=0;V<q.length;V++)E.selection.get().addRange(q[V])}}}function w(){var X=E.el.querySelectorAll(".fr-marker[data-type=\"true\"]");if(!E.$wp)return E.markers.remove(),!1;if(0===X.length)return!1;if(E.browser.msie||E.browser.edge)for(var q=0;q<X.length;q++)X[q].style.display="inline-block";E.core.hasFocus()||E.browser.msie||E.browser.webkit||E.$el.focus(),C();for(var V=S(),q=0;q<X.length;q++){var Q=o(X[q]).data("id"),Z=X[q],J=E.doc.createRange(),ee=E.$el.find(".fr-marker[data-type=\"false\"][data-id=\""+Q+"\"]");(E.browser.msie||E.browser.edge)&&ee.css("display","inline-block");var te=null;if(0<ee.length){ee=ee[0];try{for(var ne=!1,oe=Z.nextSibling,ie;oe&&oe.nodeType==Node.TEXT_NODE&&0==oe.textContent.length;)ie=oe,oe=oe.nextSibling,o(ie).remove();for(var se=ee.nextSibling,ie;se&&se.nodeType==Node.TEXT_NODE&&0==se.textContent.length;)ie=se,se=se.nextSibling,o(ie).remove();if(Z.nextSibling==ee||ee.nextSibling==Z){for(var ae=Z.nextSibling==ee?Z:ee,le=ae==Z?ee:Z,de=ae.previousSibling,ie;de&&de.nodeType==Node.TEXT_NODE&&0==de.length;)ie=de,de=de.previousSibling,o(ie).remove();if(de&&de.nodeType==Node.TEXT_NODE)for(;de&&de.previousSibling&&de.previousSibling.nodeType==Node.TEXT_NODE;)de.previousSibling.textContent+=de.textContent,de=de.previousSibling,o(de.nextSibling).remove();for(var pe=le.nextSibling,ie;pe&&pe.nodeType==Node.TEXT_NODE&&0==pe.length;)ie=pe,pe=pe.nextSibling,o(ie).remove();if(pe&&pe.nodeType==Node.TEXT_NODE)for(;pe&&pe.nextSibling&&pe.nextSibling.nodeType==Node.TEXT_NODE;)pe.nextSibling.textContent=pe.textContent+pe.nextSibling.textContent,pe=pe.nextSibling,o(pe.previousSibling).remove();if(de&&(E.node.isVoid(de)||E.node.isBlock(de))&&(de=null),pe&&(E.node.isVoid(pe)||E.node.isBlock(pe))&&(pe=null),de&&pe&&de.nodeType==Node.TEXT_NODE&&pe.nodeType==Node.TEXT_NODE){o(Z).remove(),o(ee).remove();var ce=de.textContent.length;de.textContent+=pe.textContent,o(pe).remove(),E.spaces.normalize(de),J.setStart(de,ce),J.setEnd(de,ce),ne=!0}else!de&&pe&&pe.nodeType==Node.TEXT_NODE?(o(Z).remove(),o(ee).remove(),E.spaces.normalize(pe),te=o(E.doc.createTextNode("\u200B")),o(pe).before(te),J.setStart(pe,0),J.setEnd(pe,0),ne=!0):!pe&&de&&de.nodeType==Node.TEXT_NODE&&(o(Z).remove(),o(ee).remove(),E.spaces.normalize(de),te=o(E.doc.createTextNode("\u200B")),o(de).after(te),J.setStart(de,de.textContent.length),J.setEnd(de,de.textContent.length),ne=!0)}if(!ne){var fe,ue;if((E.browser.chrome||E.browser.edge)&&Z.nextSibling==ee)fe=D(ee,J,!0)||J.setStartAfter(ee),ue=D(Z,J,!1)||J.setEndBefore(Z);else{Z.previousSibling==ee&&(Z=ee,ee=Z.nextSibling),ee.nextSibling&&"BR"===ee.nextSibling.tagName||!ee.nextSibling&&E.node.isBlock(Z.previousSibling)||Z.previousSibling&&"BR"==Z.previousSibling.tagName||(Z.style.display="inline",ee.style.display="inline",te=o(E.doc.createTextNode("\u200B")));var ge=Z.previousSibling;ge&&ge.style&&"block"==E.win.getComputedStyle(ge).display&&!E.opts.enter==o.FE.ENTER_BR?(J.setEndAfter(ge),J.setStartAfter(ge)):(fe=D(Z,J,!0)||o(Z).before(te)&&J.setStartBefore(Z),ue=D(ee,J,!1)||o(ee).after(te)&&J.setEndAfter(ee))}"function"==typeof fe&&fe(),"function"==typeof ue&&ue()}}catch(he){console.warn("RESTORE RANGE",he)}}te&&te.remove();try{V.addRange(J)}catch(he){console.warn("ADD RANGE",he)}}E.markers.remove()}function D(X,q,V){var G=X.previousSibling,Q=X.nextSibling;if(G&&Q&&G.nodeType==Node.TEXT_NODE&&Q.nodeType==Node.TEXT_NODE){var Z=G.textContent.length;return V?(Q.textContent=G.textContent+Q.textContent,o(G).remove(),o(X).remove(),E.spaces.normalize(Q),function(){q.setStart(Q,Z)}):(G.textContent+=Q.textContent,o(Q).remove(),o(X).remove(),E.spaces.normalize(G),function(){q.setEnd(G,Z)})}if(G&&!Q&&G.nodeType==Node.TEXT_NODE){var Z=G.textContent.length;return V?(E.spaces.normalize(G),function(){q.setStart(G,Z)}):(E.spaces.normalize(G),function(){q.setEnd(G,Z)})}return Q&&!G&&Q.nodeType==Node.TEXT_NODE&&(V?(E.spaces.normalize(Q),function(){q.setStart(Q,0)}):(E.spaces.normalize(Q),function(){q.setEnd(Q,0)}))}function M(){return!0}function R(){for(var X=T(),q=0;q<X.length;q++)if(!X[q].collapsed)return!1;return!0}function L(X){var q=!1,V=!1,G,Q;if(E.win.getSelection){var Z=E.win.getSelection();Z.rangeCount&&(G=Z.getRangeAt(0),Q=G.cloneRange(),Q.selectNodeContents(X),Q.setEnd(G.startContainer,G.startOffset),q=""===Q.toString(),Q.selectNodeContents(X),Q.setStart(G.endContainer,G.endOffset),V=""===Q.toString())}else E.doc.selection&&"Control"!=E.doc.selection.type&&(G=E.doc.selection.createRange(),Q=G.duplicate(),Q.moveToElementText(X),Q.setEndPoint("EndToStart",G),q=""===Q.text,Q.moveToElementText(X),Q.setEndPoint("StartToEnd",G),V=""===Q.text);return{atStart:q,atEnd:V}}function I(X,q){"undefined"==typeof q&&(q=!0);var V=o(X).html();V&&V.replace(/\u200b/g,"").length!=V.length&&o(X).html(V.replace(/\u200b/g,""));for(var G=E.node.contents(X),Q=0;Q<G.length;Q++)G[Q].nodeType==Node.ELEMENT_NODE?(I(G[Q],0==Q),0==Q&&(q=!1)):o(G[Q]).remove();X.nodeType==Node.TEXT_NODE?o(X).replaceWith("<span data-first=\"true\" data-text=\"true\"></span>"):q&&o(X).attr("data-first",!0)}function P(X,q){var V=E.node.contents(X.get(0));0<=["TD","TH"].indexOf(X.get(0).tagName)&&1==X.find(".fr-marker").length&&E.node.hasClass(V[0],"fr-marker")&&X.attr("data-del-cell",!0);for(var G=0,Q;G<V.length;G++)Q=V[G],E.node.hasClass(Q,"fr-marker")?q=(q+1)%2:q?0<o(Q).find(".fr-marker").length?q=P(o(Q),q):0>["TD","TH"].indexOf(Q.tagName)&&!E.node.hasClass(Q,"fr-inner")?!E.opts.keepFormatOnDelete||0<E.$el.find("[data-first]").length?o(Q).remove():I(Q):E.node.hasClass(Q,"fr-inner")?0==o(Q).find(".fr-inner").length?o(Q).html("<br>"):o(Q).find(".fr-inner").filter(function(){return 0==o(this).find("fr-inner").length}).html("<br>"):(o(Q).empty(),o(Q).attr("data-del-cell",!0)):0<o(Q).find(".fr-marker").length&&(q=P(o(Q),q));return q}function K(){try{if(!E.$wp)return!1;for(var X=T(0),q=X.commonAncestorContainer;q&&!E.node.isElement(q);)q=q.parentNode;return!!E.node.isElement(q)}catch(V){return!1}}function U(X){if(!X||0<X.getElementsByClassName("fr-marker").length)return!1;for(var q=X.firstChild;q&&E.node.isBlock(q);)X=q,q=q.firstChild;X.innerHTML=o.FE.MARKERS+X.innerHTML}function W(X){if(!X||0<X.getElementsByClassName("fr-marker").length)return!1;for(var q=X.lastChild;q&&E.node.isBlock(q);)X=q,q=q.lastChild;X.innerHTML+=o.FE.MARKERS}return{text:v,get:S,ranges:T,clear:C,element:function(){var X=S();try{if(X.rangeCount){var q=T(0),V=q.startContainer;if(V.nodeType==Node.TEXT_NODE&&q.startOffset==(V.textContent||"").length&&V.nextSibling&&(V=V.nextSibling),V.nodeType==Node.ELEMENT_NODE){var G=!1;if(0<V.childNodes.length&&V.childNodes[q.startOffset]){for(var Q=V.childNodes[q.startOffset];Q&&Q.nodeType==Node.TEXT_NODE&&0==Q.textContent.length;)Q=Q.nextSibling;if(Q&&Q.textContent.replace(/\u200B/g,"")===v().replace(/\u200B/g,"")&&(V=Q,G=!0),!G&&1<V.childNodes.length&&0<q.startOffset&&V.childNodes[q.startOffset-1]){for(var Q=V.childNodes[q.startOffset-1];Q&&Q.nodeType==Node.TEXT_NODE&&0==Q.textContent.length;)Q=Q.nextSibling;Q&&Q.textContent.replace(/\u200B/g,"")===v().replace(/\u200B/g,"")&&(V=Q,G=!0)}}else if(!q.collapsed&&V.nextSibling&&V.nextSibling.nodeType==Node.ELEMENT_NODE){var Q=V.nextSibling;Q&&Q.textContent.replace(/\u200B/g,"")===v().replace(/\u200B/g,"")&&(V=Q,G=!0)}!G&&0<V.childNodes.length&&o(V.childNodes[0]).text().replace(/\u200B/g,"")===v().replace(/\u200B/g,"")&&0>["BR","IMG","HR"].indexOf(V.childNodes[0].tagName)&&(V=V.childNodes[0])}for(;V.nodeType!=Node.ELEMENT_NODE&&V.parentNode;)V=V.parentNode;for(var Z=V;Z&&"HTML"!=Z.tagName;){if(Z==E.el)return V;Z=o(Z).parent()[0]}}}catch(J){}return E.el},endElement:function(){var X=S();try{if(X.rangeCount){var q=T(0),V=q.endContainer;if(V.nodeType==Node.ELEMENT_NODE){var G=!1;if(0<V.childNodes.length&&V.childNodes[q.endOffset]&&o(V.childNodes[q.endOffset]).text()===v())V=V.childNodes[q.endOffset],G=!0;else if(!q.collapsed&&V.previousSibling&&V.previousSibling.nodeType==Node.ELEMENT_NODE){var Q=V.previousSibling;Q&&Q.textContent.replace(/\u200B/g,"")===v().replace(/\u200B/g,"")&&(V=Q,G=!0)}else if(!q.collapsed&&0<V.childNodes.length&&V.childNodes[q.endOffset]){var Q=V.childNodes[q.endOffset].previousSibling;Q.nodeType==Node.ELEMENT_NODE&&Q&&Q.textContent.replace(/\u200B/g,"")===v().replace(/\u200B/g,"")&&(V=Q,G=!0)}!G&&0<V.childNodes.length&&o(V.childNodes[V.childNodes.length-1]).text()===v()&&0>["BR","IMG","HR"].indexOf(V.childNodes[V.childNodes.length-1].tagName)&&(V=V.childNodes[V.childNodes.length-1])}for(V.nodeType==Node.TEXT_NODE&&0==q.endOffset&&V.previousSibling&&V.previousSibling.nodeType==Node.ELEMENT_NODE&&(V=V.previousSibling);V.nodeType!=Node.ELEMENT_NODE&&V.parentNode;)V=V.parentNode;for(var Z=V;Z&&"HTML"!=Z.tagName;){if(Z==E.el)return V;Z=o(Z).parent()[0]}}}catch(J){}return E.el},save:F,restore:w,isCollapsed:R,isFull:function(){if(R())return!1;E.$el.find("td, th, img").prepend("<span class=\"fr-mk\">"+o.FE.INVISIBLE_SPACE+"</span>");var X=!1,q=L(E.el);return q.atStart&&q.atEnd&&(X=!0),E.$el.find(".fr-mk").remove(),X},inEditor:K,remove:function(){if(R())return!0;F();for(var X=function(ue){for(var ge=ue.previousSibling;ge&&ge.nodeType==Node.TEXT_NODE&&0==ge.textContent.length;){var ge=ge.previousSibling;o(ge).remove()}return ge},q=function(ue){for(var ge=ue.nextSibling;ge&&ge.nodeType==Node.TEXT_NODE&&0==ge.textContent.length;){var ge=ge.nextSibling;o(ge).remove()}return ge},V=E.$el.find(".fr-marker[data-type=\"true\"]"),G=0,Q;G<V.length;G++)for(Q=V[G];!X(Q)&&!E.node.isBlock(Q.parentNode)&&!E.$el.is(Q.parentNode);)o(Q.parentNode).before(Q);for(var Z=E.$el.find(".fr-marker[data-type=\"false\"]"),G=0,J;G<Z.length;G++){for(J=Z[G];!q(J)&&!E.node.isBlock(J.parentNode)&&!E.$el.is(J.parentNode);)o(J.parentNode).after(J);J.parentNode&&E.node.isBlock(J.parentNode)&&E.node.isEmpty(J.parentNode)&&!E.$el.is(J.parentNode)&&E.opts.keepFormatOnDelete&&o(J.parentNode).after(J)}if(M()){P(E.$el,0);var ee=E.$el.find("[data-first=\"true\"]");if(ee.length)E.$el.find(".fr-marker").remove(),ee.append(o.FE.INVISIBLE_SPACE+o.FE.MARKERS).removeAttr("data-first"),ee.attr("data-text")&&ee.replaceWith(ee.html());else{E.$el.find("table").filter(function(){var ue=0<o(this).find("[data-del-cell]").length&&o(this).find("[data-del-cell]").length==o(this).find("td, th").length;return ue}).remove(),E.$el.find("[data-del-cell]").removeAttr("data-del-cell");for(var V=E.$el.find(".fr-marker[data-type=\"true\"]"),G=0;G<V.length;G++){var te=V[G],ne=te.nextSibling,oe=E.$el.find(".fr-marker[data-type=\"false\"][data-id=\""+o(te).data("id")+"\"]").get(0);if(!oe)oe=o(te).clone().attr("data-type",!1),o(te).after(oe);else if(ne&&ne==oe);else if(te){var ie=E.node.blockParent(te),se=E.node.blockParent(oe),ae=!1,le=!1;if(ie&&0<=["UL","OL"].indexOf(ie.tagName)&&(ie=null,ae=!0),se&&0<=["UL","OL"].indexOf(se.tagName)&&(se=null,le=!0),o(te).after(oe),ie==se);else if(null==ie&&!ae){var de=E.node.deepestParent(te);de?(o(de).after(o(se).html()),o(se).remove()):0==o(se).parentsUntil(E.$el,"table").length&&(o(te).next().after(o(se).html()),o(se).remove())}else if(null==se&&!le&&0==o(ie).parentsUntil(E.$el,"table").length){for(var ne=ie;!ne.nextSibling&&ne.parentNode!=E.el;)ne=ne.parentNode;for(ne=ne.nextSibling;ne&&"BR"!=ne.tagName;){var pe=ne.nextSibling;o(ie).append(ne),ne=pe}ne&&"BR"==ne.tagName&&o(ne).remove()}else ie&&se&&0==o(ie).parentsUntil(E.$el,"table").length&&0==o(se).parentsUntil(E.$el,"table").length&&(o(ie).append(o(se).html()),o(se).remove())}}}}E.opts.keepFormatOnDelete||E.html.fillEmptyBlocks(),E.html.cleanEmptyTags(!0),E.clean.lists(),E.spaces.normalize();var ce=E.$el.find(".fr-marker:last").get(0),fe=E.$el.find(".fr-marker:first").get(0);!ce.nextSibling&&fe.previousSibling&&"BR"==fe.previousSibling.tagName&&E.node.isElement(ce.parentNode)&&E.node.isElement(fe.parentNode)&&E.$el.append("<br>"),w()},blocks:function(){var X=[],q=S();if(K()&&q.rangeCount)for(var V=T(),G=0;G<V.length;G++){var Q=V[G],Z=O(Q.startContainer,Q.startOffset),J=O(Q.endContainer,Q.endOffset);E.node.isBlock(Z)&&0>X.indexOf(Z)&&X.push(Z);var ee=E.node.blockParent(Z);ee&&0>X.indexOf(ee)&&X.push(ee);for(var te=[],ne=Z;ne!==J&&ne!==E.el;)0>te.indexOf(ne)&&ne.children&&ne.children.length?(te.push(ne),ne=ne.children[0]):ne.nextSibling?ne=ne.nextSibling:ne.parentNode&&(ne=ne.parentNode,te.push(ne)),E.node.isBlock(ne)&&0>te.indexOf(ne)&&0>X.indexOf(ne)&&(ne!==J||0<Q.endOffset)&&X.push(ne);E.node.isBlock(J)&&0>X.indexOf(J)&&0<Q.endOffset&&X.push(J);var ee=E.node.blockParent(J);ee&&0>X.indexOf(ee)&&X.push(ee)}for(var G=X.length-1;0<G;G--)o(X[G]).find(X).length&&("LI"!=X[G].tagName||1==X[G].children.length&&0<=X.indexOf(X[G].children[0]))&&X.splice(G,1);return X},info:L,setAtEnd:W,setAtStart:U,setBefore:function(X,q){"undefined"==typeof q&&(q=!0);for(var V=X.previousSibling;V&&V.nodeType==Node.TEXT_NODE&&0==V.textContent.length;)V=V.previousSibling;return V?(E.node.isBlock(V)?W(V):"BR"==V.tagName?o(V).before(o.FE.MARKERS):o(V).after(o.FE.MARKERS),!0):!!q&&(E.node.isBlock(X)?U(X):o(X).before(o.FE.MARKERS),!0)},setAfter:function(X,q){"undefined"==typeof q&&(q=!0);for(var V=X.nextSibling;V&&V.nodeType==Node.TEXT_NODE&&0==V.textContent.length;)V=V.nextSibling;return V?(E.node.isBlock(V)?U(V):o(V).before(o.FE.MARKERS),!0):!!q&&(E.node.isBlock(X)?W(X):o(X).after(o.FE.MARKERS),!0)},rangeElement:O}},o.extend(o.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),o.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},o.FE.MODULES.clean=function(E){function v(ie){if(ie.nodeType==Node.ELEMENT_NODE&&ie.getAttribute("class")&&0<=ie.getAttribute("class").indexOf("fr-marker"))return!1;var se=E.node.contents(ie),ae=[],le;for(le=0;le<se.length;le++)se[le].nodeType!=Node.ELEMENT_NODE||E.node.isVoid(se[le])?se[le].nodeType==Node.TEXT_NODE&&(se[le].textContent=se[le].textContent.replace(/\u200b/g,"").replace(/&/g,"&amp;")):se[le].textContent.replace(/\u200b/g,"").length!=se[le].textContent.length&&v(se[le]);if(ie.nodeType==Node.ELEMENT_NODE&&!E.node.isVoid(ie)&&(ie.normalize(),se=E.node.contents(ie),ae=ie.querySelectorAll(".fr-marker"),0==se.length-ae.length)){for(le=0;le<se.length;le++)if(0>(se[le].getAttribute("class")||"").indexOf("fr-marker"))return!1;for(le=0;le<ae.length;le++)ie.parentNode.insertBefore(ae[le].cloneNode(!0),ie);return ie.parentNode.removeChild(ie),!1}}function S(ie){if(ie.nodeType==Node.COMMENT_NODE)return"<!--"+ie.nodeValue+"-->";if(ie.nodeType==Node.TEXT_NODE)return ie.textContent.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\u00A0/g,"&nbsp;");if(ie.nodeType!=Node.ELEMENT_NODE)return ie.outerHTML;if(ie.nodeType==Node.ELEMENT_NODE&&0<=["STYLE","SCRIPT"].indexOf(ie.tagName))return ie.outerHTML;if(ie.nodeType==Node.ELEMENT_NODE&&"svg"==ie.tagName){var se=document.createElement("div"),ae=ie.cloneNode(!0);return se.appendChild(ae),se.innerHTML}if("IFRAME"==ie.tagName)return ie.outerHTML;var le=ie.childNodes;if(0===le.length)return ie.outerHTML;for(var de="",pe=0;pe<le.length;pe++)de+=S(le[pe]);return E.node.openTagString(ie)+de+E.node.closeTagString(ie)}function T(ie){return oe=[],ie=ie.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(se){return oe.push(se),"[FROALA.EDITOR.SCRIPT "+(oe.length-1)+"]"}),ie=ie.replace(/<img((?:[\w\W]*?)) src="/g,"<img$1 data-fr-src=\""),ie}function C(ie){return ie=ie.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(se,ae){return 0<=E.opts.htmlRemoveTags.indexOf("script")?"":oe[parseInt(ae,10)]}),ie=ie.replace(/<img((?:[\w\W]*?)) data-fr-src="/g,"<img$1 src=\""),ie}function N(ie){for(var se in ie)ie.hasOwnProperty(se)&&(se.match(ne)||delete ie[se]);for(var ae="",le=Object.keys(ie).sort(),de=0;de<le.length;de++)se=le[de],ae+=0>ie[se].indexOf("\"")?" "+se+"=\""+ie[se]+"\"":" "+se+"='"+ie[se]+"'";return ae}function A(ie,se,ae){if(E.opts.fullPage){var le=E.html.extractDoctype(ae),de=N(E.html.extractNodeAttrs(ae,"html"));se=null==se?E.html.extractNode(ae,"head")||"<title></title>":se;var pe=N(E.html.extractNodeAttrs(ae,"head")),ce=N(E.html.extractNodeAttrs(ae,"body"));return le+"<html"+de+"><head"+pe+">"+se+"</head><body"+ce+">"+ie+"</body></html>"}return ie}function O(ie,se){var ae=o("<div>"+ie+"</div>"),le="";if(ae){for(var de=E.node.contents(ae.get(0)),pe=0;pe<de.length;pe++)se(de[pe]);de=E.node.contents(ae.get(0));for(var pe=0;pe<de.length;pe++)le+=S(de[pe])}return le}function _(ie,se,ae){ie=T(ie);var le=ie,de=null;if(E.opts.fullPage){var le=E.html.extractNode(ie,"body")||(0<=ie.indexOf("<body")?"":ie);ae&&(de=E.html.extractNode(ie,"head")||"")}le=O(le,se),de&&(de=O(de,se));var pe=A(le,de,ie);return C(pe)}function D(ie){if("SPAN"==ie.tagName&&0<=(ie.getAttribute("class")||"").indexOf("fr-marker"))return!1;if("PRE"==ie.tagName&&R(ie),ie.nodeType==Node.ELEMENT_NODE&&(ie.getAttribute("data-fr-src")&&ie.setAttribute("data-fr-src",E.helpers.sanitizeURL(ie.getAttribute("data-fr-src"))),ie.getAttribute("href")&&ie.setAttribute("href",E.helpers.sanitizeURL(ie.getAttribute("href"))),0<=["TABLE","TBODY","TFOOT","TR"].indexOf(ie.tagName)&&(ie.innerHTML=ie.innerHTML.trim())),!E.opts.pasteAllowLocalImages&&ie.nodeType==Node.ELEMENT_NODE&&"IMG"==ie.tagName&&ie.getAttribute("data-fr-src")&&0==ie.getAttribute("data-fr-src").indexOf("file://"))return ie.parentNode.removeChild(ie),!1;if(ie.nodeType==Node.ELEMENT_NODE&&o.FE.HTML5Map[ie.tagName]&&""===E.node.attributes(ie)){var se=o.FE.HTML5Map[ie.tagName],ae="<"+se+">"+ie.innerHTML+"</"+se+">";ie.insertAdjacentHTML("beforebegin",ae),ie=ie.previousSibling,ie.parentNode.removeChild(ie.nextSibling)}if(!E.opts.htmlAllowComments&&ie.nodeType==Node.COMMENT_NODE)0!==ie.data.indexOf("[FROALA.EDITOR")&&ie.parentNode.removeChild(ie);else if(ie.tagName&&ie.tagName.match(te))ie.parentNode.removeChild(ie);else if(ie.tagName&&!ie.tagName.match(ee))ie.outerHTML=ie.innerHTML;else{var le=ie.attributes;if(le)for(var de=le.length-1,pe;0<=de;de--)pe=le[de],pe.nodeName.match(ne)||ie.removeAttribute(pe.nodeName)}}function M(ie){for(var se=E.node.contents(ie),ae=0;ae<se.length;ae++)se[ae].nodeType!=Node.TEXT_NODE&&M(se[ae]);D(ie)}function R(ie){var se=ie.innerHTML;0<=se.indexOf("\n")&&(ie.innerHTML=se.replace(/\n/g,"<br>"))}function I(){for(var ie=E.el.querySelectorAll("tr"),se=0;se<ie.length;se++){for(var ae=ie[se].children,le=!0,de=0;de<ae.length;de++)if("TH"!=ae[de].tagName){le=!1;break}if(!1!=le&&0!=ae.length){for(var pe=ie[se];pe&&"TABLE"!=pe.tagName&&"THEAD"!=pe.tagName;)pe=pe.parentNode;var ce=pe;"THEAD"!=ce.tagName&&(ce=E.doc.createElement("THEAD"),pe.insertBefore(ce,pe.firstChild)),ce.appendChild(ie[se])}}}function P(){var ie=E.html.defaultTag();if(ie)for(var se=E.el.querySelectorAll("td > "+ie+", th > "+ie),ae=0;ae<se.length;ae++)""===E.node.attributes(se[ae])&&o(se[ae]).replaceWith(se[ae].innerHTML+"<br>")}function H(){var ie=[],se=function(fe){return!E.node.isList(fe.parentNode)};do{if(ie.length){var ae=ie[0],le=E.doc.createElement("ul");ae.parentNode.insertBefore(le,ae);do{var de=ae;ae=ae.nextSibling,le.appendChild(de)}while(ae&&"LI"==ae.tagName)}ie=[];for(var pe=E.el.querySelectorAll("li"),ce=0;ce<pe.length;ce++)se(pe[ce])&&ie.push(pe[ce])}while(0<ie.length)}function U(){for(var ie=E.el.querySelectorAll("ol + ol, ul + ul"),se=0,ae;se<ie.length;se++)if(ae=ie[se],E.node.isList(ae.previousSibling)&&E.node.openTagString(ae)==E.node.openTagString(ae.previousSibling)){for(var le=E.node.contents(ae),de=0;de<le.length;de++)ae.previousSibling.appendChild(le[de]);ae.parentNode.removeChild(ae)}}function W(){var ie,se=function(pe){pe.querySelector("LI")||(ie=!0,pe.parentNode.removeChild(pe))};do{ie=!1;for(var ae=E.el.querySelectorAll("li:empty"),le=0;le<ae.length;le++)ae[le].parentNode.removeChild(ae[le]);for(var de=E.el.querySelectorAll("ul, ol"),le=0;le<de.length;le++)se(de[le])}while(!0===ie)}function Y(){for(var ie=E.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),se=0;se<ie.length;se++){var ae=ie[se],le=ae.previousSibling;le&&("LI"==le.tagName?le.appendChild(ae):o(ae).wrap("<li></li>"))}}function z(){for(var ie=E.el.querySelectorAll("li > ul, li > ol"),se=0,ae;se<ie.length;se++)if(ae=ie[se],ae.nextSibling){var le=ae.nextSibling,de=o("<li>");o(ae.parentNode).after(de);do{var pe=le;le=le.nextSibling,de.append(pe)}while(le)}}function X(){for(var ie=E.el.querySelectorAll("li > ul, li > ol"),se=0,ae;se<ie.length;se++)if(ae=ie[se],E.node.isFirstSibling(ae))o(ae).before("<br/>");else if(ae.previousSibling&&"BR"==ae.previousSibling.tagName){for(var le=ae.previousSibling.previousSibling;le&&E.node.hasClass(le,"fr-marker");)le=le.previousSibling;le&&"BR"!=le.tagName&&o(ae.previousSibling).remove()}}function q(){for(var ie=E.el.querySelectorAll("li:empty"),se=0;se<ie.length;se++)o(ie[se]).remove()}function V(){for(var ie=E.el.querySelectorAll("ul, ol"),se=0;se<ie.length;se++)for(var ae=E.node.contents(ie[se]),le=null,de=ae.length-1;0<=de;de--)"LI"==ae[de].tagName?le=null:(le||(le=o("<li>"),le.insertBefore(ae[de])),le.prepend(ae[de]))}var ee,te,ne,oe=[],oe=[];return{_init:function(){E.opts.fullPage&&o.merge(E.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])},html:function(ie,se,ae,le){"undefined"==typeof se&&(se=[]),"undefined"==typeof ae&&(ae=[]),"undefined"==typeof le&&(le=!1),ie=ie.replace(/\u0009/g,""),ie=ie.replace(/<br> */g,"<br>");var de=o.merge([],E.opts.htmlAllowedTags),pe;for(pe=0;pe<se.length;pe++)0<=de.indexOf(se[pe])&&de.splice(de.indexOf(se[pe]),1);var ce=o.merge([],E.opts.htmlAllowedAttrs);for(pe=0;pe<ae.length;pe++)0<=ce.indexOf(ae[pe])&&ce.splice(ce.indexOf(ae[pe]),1);return ce.push("data-fr-.*"),ce.push("fr-.*"),ee=new RegExp("^"+de.join("$|^")+"$","gi"),ne=new RegExp("^"+ce.join("$|^")+"$","gi"),te=new RegExp("^"+E.opts.htmlRemoveTags.join("$|^")+"$","gi"),ie=_(ie,M,!0),ie},toHTML5:function(){var ie=E.el.querySelectorAll(Object.keys(o.FE.HTML5Map).join(","));if(ie.length){var se=!1;E.el.querySelector(".fr-marker")||(E.selection.save(),se=!0);for(var ae=0;ae<ie.length;ae++)""===E.node.attributes(ie[ae])&&o(ie[ae]).replaceWith("<"+o.FE.HTML5Map[ie[ae].tagName]+">"+ie[ae].innerHTML+"</"+o.FE.HTML5Map[ie[ae].tagName]+">");se&&E.selection.restore()}},tables:function(){I(),P()},lists:function(){H(),U(),W(),Y(),z(),X(),V(),q()},quotes:function(){for(var ie=E.el.querySelectorAll("blockquote + blockquote"),se=0,ae;se<ie.length;se++)ae=ie[se],E.node.attributes(ae)==E.node.attributes(ae.previousSibling)&&(o(ae).prev().append(o(ae).html()),o(ae).remove())},invisibleSpaces:function(ie){return ie.replace(/\u200b/g,"").length==ie.length?ie:E.clean.exec(ie,v)},exec:_}},o.FE.MODULES.spaces=function(E){function v(C,N){var A=C.previousSibling,O=C.nextSibling,_=C.textContent,F=C.parentNode;N&&(_=_.replace(/[\f\n\r\t\v ]{2,}/g," "),(!O||"BR"===O.tagName||E.node.isBlock(O))&&E.node.isBlock(F)&&(_=_.replace(/[\f\n\r\t\v ]{1,}$/g,"")),(!A||"BR"===A.tagName||E.node.isBlock(A))&&E.node.isBlock(F)&&(_=_.replace(/^[\f\n\r\t\v ]{1,}/g,""))),_=_.replace(new RegExp(o.FE.UNICODE_NBSP,"g")," ");for(var w="",D=0;D<_.length;D++)w+=32==_.charCodeAt(D)&&(0===D||32==w.charCodeAt(D-1))?o.FE.UNICODE_NBSP:_[D];(!O||E.node.isBlock(O)||O.nodeType==Node.ELEMENT_NODE&&E.win.getComputedStyle(O)&&"block"==E.win.getComputedStyle(O).display)&&(w=w.replace(/ $/,o.FE.UNICODE_NBSP)),!A||E.node.isVoid(A)||E.node.isBlock(A)||(w=w.replace(/^\u00A0([^ $])/," $1"),1===w.length&&160===w.charCodeAt(0)&&O&&!E.node.isVoid(O)&&!E.node.isBlock(O)&&(w=" ")),w=w.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),C.textContent!=w&&(C.textContent=w)}function S(C,N){if("undefined"!=typeof C&&C||(C=E.el),"undefined"==typeof N&&(N=!1),!(C.getAttribute&&"false"==C.getAttribute("contenteditable")))if(C.nodeType==Node.TEXT_NODE)v(C,N);else if(C.nodeType==Node.ELEMENT_NODE)for(var A=E.doc.createTreeWalker(C,NodeFilter.SHOW_TEXT,E.node.filter(function(O){return null!=O.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!E.node.hasClass(O.parentNode,"fr-marker")}),!1);A.nextNode();)v(A.currentNode,N)}return{normalize:S,normalizeAroundCursor:function(){for(var C=[],N=E.el.querySelectorAll(".fr-marker"),A=0;A<N.length;A++){var O=null,_=E.node.blockParent(N[A]);O=_?_:N[A];for(var F=O.nextSibling,w=O.previousSibling;F&&"BR"==F.tagName;)F=F.nextSibling;for(;w&&"BR"==w.tagName;)w=w.previousSibling;O&&0>C.indexOf(O)&&C.push(O),w&&0>C.indexOf(w)&&C.push(w),F&&0>C.indexOf(F)&&C.push(F)}for(var D=0;D<C.length;D++)S(C[D])}}},o.FE.UNICODE_NBSP=String.fromCharCode(160),o.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],o.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],o.extend(o.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[]}),o.FE.MODULES.html=function(E){function v(){return E.opts.enter==o.FE.ENTER_P?"p":E.opts.enter==o.FE.ENTER_DIV?"div":E.opts.enter==o.FE.ENTER_BR?null:void 0}function S(se){var ae=[],le=[];if(se){for(var de=E.el.querySelectorAll(".fr-marker"),pe=0,ce;pe<de.length;pe++)if(ce=E.node.blockParent(de[pe])||de[pe],ce){var fe=ce.nextSibling,ue=ce.previousSibling;ce&&0>le.indexOf(ce)&&E.node.isBlock(ce)&&le.push(ce),ue&&E.node.isBlock(ue)&&0>le.indexOf(ue)&&le.push(ue),fe&&E.node.isBlock(fe)&&0>le.indexOf(fe)&&le.push(fe)}}else le=E.el.querySelectorAll(C());var ge=C();ge+=","+o.FE.VOID_ELEMENTS.join(","),ge+=","+E.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)";for(var pe=le.length-1;0<=pe;pe--)if(!(le[pe].textContent&&0<le[pe].textContent.replace(/\u200B|\n/g,"").length)&&!(0<le[pe].querySelectorAll(ge).length)){for(var he=E.node.contents(le[pe]),me=!1,Ee=0;Ee<he.length;Ee++)if(he[Ee].nodeType!=Node.COMMENT_NODE&&he[Ee].textContent&&0<he[Ee].textContent.replace(/\u200B|\n/g,"").length){me=!0;break}me||ae.push(le[pe])}return ae}function C(){return o.FE.BLOCK_TAGS.join(", ")}function N(se){var ae=o.merge([],o.FE.VOID_ELEMENTS);ae=o.merge(ae,E.opts.htmlAllowedEmptyTags),"undefined"==typeof se&&(ae=o.merge(ae,o.FE.BLOCK_TAGS));var le,de;le=E.el.querySelectorAll("*:empty:not("+ae.join("):not(")+"):not(.fr-marker)");do{de=!1;for(var pe=0;pe<le.length;pe++)(0===le[pe].attributes.length||"undefined"!=typeof le[pe].getAttribute("href"))&&(le[pe].parentNode.removeChild(le[pe]),de=!0);le=E.el.querySelectorAll("*:empty:not("+ae.join("):not(")+"):not(.fr-marker)")}while(le.length&&de)}function A(se,ae){var le=v();if(ae&&(le="div"),le){for(var de=E.doc.createDocumentFragment(),pe=null,ce=!1,fe=se.firstChild,ue;fe;){if(ue=fe.nextSibling,fe.nodeType==Node.ELEMENT_NODE&&(E.node.isBlock(fe)||0<=E.opts.htmlDoNotWrapTags.indexOf(fe.tagName.toLowerCase())&&!E.node.hasClass(fe,"fr-marker")))pe=null,de.appendChild(fe);else if(fe.nodeType!=Node.ELEMENT_NODE&&fe.nodeType!=Node.TEXT_NODE)pe=null,de.appendChild(fe);else if("BR"==fe.tagName)null==pe?(pe=E.doc.createElement(le),ae&&pe.setAttribute("data-empty",!0),pe.appendChild(fe),de.appendChild(pe)):!1==ce&&(pe.appendChild(E.doc.createElement("br")),pe.setAttribute("data-empty",!0)),pe=null;else{var ge=fe.textContent;fe.nodeType==Node.TEXT_NODE&&0==ge.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length||(null==pe&&(pe=E.doc.createElement(le),ae&&pe.setAttribute("class","fr-temp-div"),de.appendChild(pe),ce=!1),pe.appendChild(fe),!ce&&!E.node.hasClass(fe,"fr-marker")&&(fe.nodeType!=Node.TEXT_NODE||0!==ge.replace(/ /g,"").length)&&(ce=!0))}fe=ue}se.innerHTML="",se.appendChild(de)}}function O(se,ae){for(var le=0;le<se.length;le++)A(se[le],ae)}function _(se,ae,le,de){return!!E.$wp&&void("undefined"==typeof se&&(se=!1),"undefined"==typeof ae&&(ae=!1),"undefined"==typeof le&&(le=!1),"undefined"==typeof de&&(de=!1),A(E.el,se),de&&O(E.el.querySelectorAll(".fr-inner"),se),ae&&O(E.el.querySelectorAll("td, th"),se),le&&O(E.el.querySelectorAll("blockquote"),se))}function M(se){if("undefined"==typeof se&&(se=E.el),se&&0<=["SCRIPT","STYLE","PRE"].indexOf(se.tagName))return!1;for(var ae=E.doc.createTreeWalker(se,NodeFilter.SHOW_TEXT,E.node.filter(function(ue){return null!=ue.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)}),!1);ae.nextNode();){var le=ae.currentNode,de=E.node.isBlock(le.parentNode)||E.node.isElement(le.parentNode),pe=le.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(de){var ce=le.previousSibling,fe=le.nextSibling;ce&&fe&&" "==pe?E.node.isBlock(ce)&&E.node.isBlock(fe)?pe="":pe="\n":(!ce&&(pe=pe.replace(/^ */,"")),!fe&&(pe=pe.replace(/ *$/,"")))}le.textContent=pe}}function L(se,ae,le){var de=new RegExp(ae,"gi"),pe=de.exec(se);return pe?pe[le]:null}function B(se,ae){var le=se.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return le?ae.implementation.createDocumentType(le[1],le[3],le[4]):ae.implementation.createDocumentType("html")}function I(se){var ae=se.doctype,le="<!DOCTYPE html>";return ae&&(le="<!DOCTYPE "+ae.name+(ae.publicId?" PUBLIC \""+ae.publicId+"\"":"")+(!ae.publicId&&ae.systemId?" SYSTEM":"")+(ae.systemId?" \""+ae.systemId+"\"":"")+">"),le}function P(se,ae){var le=se.parentNode;if(le&&(E.node.isBlock(le)||E.node.isElement(le))&&0>["TD","TH"].indexOf(le.tagName)){var de=se.previousSibling,pe=se.nextSibling;de&&le&&"BR"!=de.tagName&&!E.node.isBlock(de)&&!pe&&0<le.textContent.replace(/\u200B/g,"").length&&0<de.textContent.length&&!E.node.hasClass(de,"fr-marker")&&(E.el!=le||pe||E.opts.enter!=o.FE.ENTER_BR||!E.browser.msie)&&(ae&&E.selection.save(),se.parentNode.removeChild(se),ae&&E.selection.restore())}}function K(){var se=E.selection.element(),ae;ae=E.node.isBlock(se)?se:E.node.blockParent(se);var le=[];if(ae){var de=ae.nextSibling,pe=ae.previousSibling;ae&&0>le.indexOf(ae)&&le.push(ae),pe&&E.node.isBlock(pe)&&0>le.indexOf(pe)&&le.push(pe),de&&E.node.isBlock(de)&&0>le.indexOf(de)&&le.push(de)}for(var ce=[],fe=0,ue;fe<le.length;fe++){ue=le[fe].querySelectorAll("br");for(var ge=0;ge<ue.length;ge++)0>ce.indexOf(ue[ge])&&ce.push(ue[ge])}if(se.parentNode==E.el)for(var he=E.el.children,fe=0;fe<he.length;fe++)"BR"==he[fe].tagName&&0>ce.indexOf(he[fe])&&ce.push(he[fe]);return ce}function U(){E.opts.htmlUntouched||(N(),_()),M(),E.opts.htmlUntouched||(E.spaces.normalize(null,!0),E.html.fillEmptyBlocks(),E.clean.quotes(),E.clean.lists(),E.clean.tables(),E.clean.toHTML5(),E.html.cleanBRs()),E.selection.restore(),W(),E.placeholder.refresh()}function W(){E.core.isEmpty()&&(null==v()?!E.el.querySelector("*:not(.fr-marker):not(br)")&&(E.core.hasFocus()?(E.$el.html(o.FE.MARKERS+"<br/>"),E.selection.restore()):E.$el.html("<br/>")):!E.el.querySelector(C())&&!E.el.querySelector(E.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")&&(E.core.hasFocus()?(E.$el.html("<"+v()+">"+o.FE.MARKERS+"<br/></"+v()+">"),E.selection.restore()):E.$el.html("<"+v()+"><br/></"+v()+">")))}function Y(se,ae){return L(se,"<"+ae+"[^>]*?>([\\w\\W]*)</"+ae+">",1)}function z(se,ae){var le=o("<div "+(L(se,"<"+ae+"([^>]*?)>",1)||"")+">");return E.node.rawAttributes(le.get(0))}function X(se){return L(se,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function V(se){var ae=/(#[^\s\+>~\.\[:]+)/g,le=/(\[[^\]]+\])/g,de=/(\.[^\s\+>~\.\[:]+)/g,pe=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,ce=/(:[\w-]+\([^\)]*\))/gi,fe=/(:[^\s\+>~\.\[:]+)/g,ue=/([^\s\+>~\.\[:]+)/g;(function(){var he=/:not\(([^\)]*)\)/g;he.test(se)&&(se=se.replace(he,"     $1 "))})();var ge=100*(se.match(ae)||[]).length+10*(se.match(le)||[]).length+10*(se.match(de)||[]).length+10*(se.match(ce)||[]).length+10*(se.match(fe)||[]).length+(se.match(pe)||[]).length;return se=se.replace(/[\*\s\+>~]/g," "),se=se.replace(/[#\.]/g," "),ge+=(se.match(ue)||[]).length,ge}function G(se){if(E.events.trigger("html.processGet",[se]),se&&se.getAttribute&&""==se.getAttribute("class")&&se.removeAttribute("class"),se&&se.nodeType==Node.ELEMENT_NODE)for(var ae=se.querySelectorAll("[class=\"\"]"),le=0;le<ae.length;le++)ae[le].removeAttribute("class")}function J(se){var ae=E.doc.createElement("div");return ae.innerHTML=se,null!==ae.querySelector(C())}function ee(se){var ae=E.doc.createElement("div");return ae.innerHTML=se,E.selection.setAtEnd(ae),ae.innerHTML}function oe(se){var ae=null;if("undefined"==typeof se&&(ae=E.selection.element()),E.opts.keepFormatOnDelete)return!1;var le=ae?(ae.textContent.match(/\u200B/g)||[]).length-ae.querySelectorAll(".fr-marker").length:0,de=(E.el.textContent.match(/\u200B/g)||[]).length-E.el.querySelectorAll(".fr-marker").length;if(de==le)return!1;var pe,ce;do{ce=!1,pe=E.el.querySelectorAll("*:not(.fr-marker)");for(var fe=0,ue;fe<pe.length;fe++)if(ue=pe[fe],ae!=ue){var ge=ue.textContent;0===ue.children.length&&1===ge.length&&8203==ge.charCodeAt(0)&&(o(ue).remove(),ce=!0)}}while(ce)}return{defaultTag:v,emptyBlocks:S,emptyBlockTagsQuery:function(){return o.FE.BLOCK_TAGS.join(":empty, ")+":empty"},blockTagsQuery:C,fillEmptyBlocks:function(se){for(var ae=S(se),le=0,de;le<ae.length;le++)de=ae[le],"false"==de.getAttribute("contenteditable")||de.querySelector(E.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||E.node.isVoid(de)||"TABLE"==de.tagName||"TBODY"==de.tagName||"TR"==de.tagName||de.appendChild(E.doc.createElement("br"));if(E.browser.msie&&E.opts.enter==o.FE.ENTER_BR){var pe=E.node.contents(E.el);pe.length&&pe[pe.length-1].nodeType==Node.TEXT_NODE&&E.$el.append("<br>")}},cleanEmptyTags:N,cleanWhiteTags:oe,cleanBlankSpaces:M,blocks:function(){return E.$el.get(0).querySelectorAll(C())},getDoctype:I,set:function(se){var ae=E.clean.html(se||"",[],[],E.opts.fullPage);if(!E.opts.fullPage)E.$el.html(ae);else{var le=Y(ae,"body")||(0<=ae.indexOf("<body")?"":ae),de=z(ae,"body"),pe=Y(ae,"head")||"<title></title>",ce=z(ae,"head"),fe=o("<div>").append(pe).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||0<=["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName))&&this.parentNode.removeChild(this)}).end().html().trim();pe=o("<div>").append(pe).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?"<!--"+this.nodeValue+"-->":0<=["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)?this.outerHTML:""}).toArray().join("");var ue=X(ae),ge=z(ae,"html");E.$el.html(fe+"\n"+le),E.node.clearAttributes(E.el),E.$el.attr(de),E.$el.addClass("fr-view"),E.$el.attr("spellcheck",E.opts.spellcheck),E.$el.attr("dir",E.opts.direction),E.$head.html(pe),E.node.clearAttributes(E.$head.get(0)),E.$head.attr(ce),E.node.clearAttributes(E.$html.get(0)),E.$html.attr(ge),E.iframe_document.doctype.parentNode.replaceChild(B(ue,E.iframe_document),E.iframe_document.doctype)}var he=E.edit.isDisabled();E.edit.on(),E.core.injectStyle(E.opts.iframeStyle),U(),E.opts.useClasses||(E.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),E.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),he&&E.edit.off(),E.events.trigger("html.set")},get:function(se,ae){if(!E.$wp)return E.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var le="";E.events.trigger("html.beforeGet");var de=[],pe={},ce;if(!E.opts.useClasses&&!ae){var fe=new RegExp("^"+E.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(ce=0;ce<E.doc.styleSheets.length;ce++){var ge=0,ue;try{ue=E.doc.styleSheets[ce].cssRules,E.doc.styleSheets[ce].ownerNode&&"STYLE"==E.doc.styleSheets[ce].ownerNode.nodeType&&(ge=1)}catch($e){}if(ue)for(var he=0,me=ue.length;he<me;he++)if(ue[he].selectorText&&0<ue[he].style.cssText.length){var Ee=ue[he].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":"),be;try{be=E.el.querySelectorAll(Ee)}catch($e){be=[]}for(var ve=0;ve<be.length;ve++){!be[ve].getAttribute("fr-original-style")&&be[ve].getAttribute("style")?(be[ve].setAttribute("fr-original-style",be[ve].getAttribute("style")),de.push(be[ve])):!be[ve].getAttribute("fr-original-style")&&de.push(be[ve]),pe[be[ve]]||(pe[be[ve]]={});for(var Se=1e3*ge+V(ue[he].selectorText),Te=ue[he].style.cssText.split(";"),ye=0,Ce;ye<Te.length;ye++)Ce=Te[ye].trim().split(":")[0],Ce.match(fe)||(!pe[be[ve]][Ce]&&(pe[be[ve]][Ce]=0,0<=(be[ve].getAttribute("fr-original-style")||"").indexOf(Ce+":")&&(pe[be[ve]][Ce]=1e4)),Se>=pe[be[ve]][Ce]&&(pe[be[ve]][Ce]=Se,Te[ye].trim().length&&(be[ve].style[Ce.trim()]=Te[ye].trim().split(":")[1].trim())))}}}for(ce=0;ce<de.length;ce++)if(de[ce].getAttribute("class")&&(de[ce].setAttribute("fr-original-class",de[ce].getAttribute("class")),de[ce].removeAttribute("class")),0<(de[ce].getAttribute("fr-original-style")||"").trim().length)for(var Ne=de[ce].getAttribute("fr-original-style").split(";"),ve=0;ve<Ne.length;ve++)0<Ne[ve].indexOf(":")&&(de[ce].style[Ne[ve].split(":")[0].trim()]=Ne[ve].split(":")[1].trim())}if(E.core.isEmpty()?E.opts.fullPage&&(le=I(E.iframe_document),le+="<html"+E.node.attributes(E.$html.get(0))+">"+E.$html.find("head").get(0).outerHTML+"<body></body></html>"):("undefined"==typeof se&&(se=!1),E.opts.fullPage?(le=I(E.iframe_document),E.$el.removeClass("fr-view"),le+="<html"+E.node.attributes(E.$html.get(0))+">"+E.$html.html()+"</html>",E.$el.addClass("fr-view")):le=E.$el.html()),!E.opts.useClasses&&!ae)for(ce=0;ce<de.length;ce++)de[ce].getAttribute("fr-original-class")&&(de[ce].setAttribute("class",de[ce].getAttribute("fr-original-class")),de[ce].removeAttribute("fr-original-class")),de[ce].getAttribute("fr-original-style")?(de[ce].setAttribute("style",de[ce].getAttribute("fr-original-style")),de[ce].removeAttribute("fr-original-style")):de[ce].removeAttribute("style");E.opts.fullPage&&(le=le.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,""),le=le.replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,""),le=le.replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,""),le=le.replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>"),le=le.replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),le=le.replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),le=le.replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1class=\"$2$4\"$5>$6</body>"),le=le.replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),E.opts.htmlSimpleAmpersand&&(le=le.replace(/\&amp;/gi,"&")),E.events.trigger("html.afterGet"),se||(le=le.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),le=E.clean.invisibleSpaces(le),le=E.clean.exec(le,G);var xe=E.events.chainTrigger("html.get",le);return"string"==typeof xe&&(le=xe),le=le.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function($e){return $e.replace(/<br>/g,"\n")}),le},getSelected:function(){var se=function(fe,ue){for(;ue&&(ue.nodeType==Node.TEXT_NODE||!E.node.isBlock(ue))&&!E.node.isElement(ue);)ue&&ue.nodeType!=Node.TEXT_NODE&&o(fe).wrapInner(E.node.openTagString(ue)+E.node.closeTagString(ue)),ue=ue.parentNode;ue&&fe.innerHTML==ue.innerHTML&&(fe.innerHTML=ue.outerHTML)},ae=function(){var fe=null,ue;return E.win.getSelection?(ue=E.win.getSelection(),ue&&ue.rangeCount&&(fe=ue.getRangeAt(0).commonAncestorContainer,fe.nodeType!=Node.ELEMENT_NODE&&(fe=fe.parentNode))):(ue=E.doc.selection)&&"Control"!=ue.type&&(fe=ue.createRange().parentElement()),null!=fe&&(0<=o.inArray(E.el,o(fe).parents())||fe==E.el)?fe:null},le="";if("undefined"!=typeof E.win.getSelection){E.browser.mozilla&&(E.selection.save(),1<E.$el.find(".fr-marker[data-type=\"false\"]").length&&(E.$el.find(".fr-marker[data-type=\"false\"][data-id=\"0\"]").remove(),E.$el.find(".fr-marker[data-type=\"false\"]:last").attr("data-id","0"),E.$el.find(".fr-marker").not("[data-id=\"0\"]").remove()),E.selection.restore());for(var de=E.selection.ranges(),pe=0,ce;pe<de.length;pe++)ce=document.createElement("div"),ce.appendChild(de[pe].cloneContents()),se(ce,ae()),0<o(ce).find(".fr-element").length&&(ce=E.el),le+=ce.innerHTML}else"undefined"!=typeof E.doc.selection&&"Text"==E.doc.selection.type&&(le=E.doc.selection.createRange().htmlText);return le},insert:function(se,ae,le){E.selection.isCollapsed()||E.selection.remove();var de;if(de=ae?se:E.clean.html(se),de=de.replace(/\r|\n/g," "),0>se.indexOf("class=\"fr-marker\"")&&(de=ee(de)),E.core.isEmpty()&&!E.opts.keepFormatOnDelete)E.el.innerHTML=de;else{var pe=E.markers.insert();if(!pe)E.el.innerHTML+=de;else{var fe=E.node.blockParent(pe),ce;if((J(de)||le)&&(ce=E.node.deepestParent(pe)||fe&&"LI"==fe.tagName)){var pe=E.markers.split();if(!pe)return!1;pe.outerHTML=de}else pe.outerHTML=de}}U(),E.events.trigger("html.inserted")},wrap:_,unwrap:function(){E.$el.find("div.fr-temp-div").each(function(){o(this).data("empty")||"LI"==this.parentNode.tagName||E.node.isBlock(this.nextSibling)&&!o(this.nextSibling).hasClass("fr-temp-div")?o(this).replaceWith(o(this).html()):o(this).replaceWith(o(this).html()+"<br>")}),E.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""==o(this).attr("class")}).removeAttr("class")},escapeEntities:function(se){return se.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")},checkIfEmpty:W,extractNode:Y,extractNodeAttrs:z,extractDoctype:X,cleanBRs:function(se,ae){var le;if(se){le=K();for(var de=0;de<le.length;de++)P(le[de],ae)}else{le=E.el.getElementsByTagName("br");for(var de=0;de<le.length;de++)P(le[de],ae)}},_init:function(){var se=function(){oe(),E.placeholder&&E.placeholder.refresh()};E.events.on("mouseup",se),E.events.on("keydown",se),E.events.on("contentChanged",W)}}},o.extend(o.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),o.FE.MODULES.size=function(E){function v(){S(),E.opts.height&&E.$el.css("minHeight",E.opts.height-E.helpers.getPX(E.$el.css("padding-top"))-E.helpers.getPX(E.$el.css("padding-bottom"))),E.$iframe.height(E.$el.outerHeight(!0))}function S(){E.opts.heightMin?E.$el.css("minHeight",E.opts.heightMin):E.$el.css("minHeight",""),E.opts.heightMax?(E.$wp.css("maxHeight",E.opts.heightMax),E.$wp.css("overflow","auto")):(E.$wp.css("maxHeight",""),E.$wp.css("overflow","")),E.opts.height?(E.$wp.height(E.opts.height),E.$el.css("minHeight",E.opts.height-E.helpers.getPX(E.$el.css("padding-top"))-E.helpers.getPX(E.$el.css("padding-bottom"))),E.$wp.css("overflow","auto")):(E.$wp.css("height",""),!E.opts.heightMin&&E.$el.css("minHeight",""),!E.opts.heightMax&&E.$wp.css("overflow","")),E.opts.width&&E.$box.width(E.opts.width)}return{_init:function(){return!!E.$wp&&void(S(),E.$iframe&&(E.events.on("keyup",v),E.events.on("commands.after",v),E.events.on("html.set",v),E.events.on("init",v),E.events.on("initialized",v)))},syncIframe:v,refresh:S}},o.extend(o.FE.DEFAULTS,{language:null}),o.FE.LANGUAGE={},o.FE.MODULES.language=function(E){var T;return{_init:function(){o.FE.LANGUAGE&&(T=o.FE.LANGUAGE[E.opts.language]),T&&T.direction&&(E.opts.direction=T.direction)},translate:function(C){return T&&T.translation[C]?T.translation[C]:C}}},o.extend(o.FE.DEFAULTS,{placeholderText:"Type something"}),o.FE.MODULES.placeholder=function(E){function v(){E.$placeholder||N();var O=0,_=0,F=0,w=0,D=0,M=0,R=E.node.contents(E.el),L=o(E.selection.element()).css("text-align");if(R.length&&R[0].nodeType==Node.ELEMENT_NODE){var B=o(R[0]);!E.opts.toolbarInline&&E.ready&&(O=E.helpers.getPX(B.css("margin-top")),w=E.helpers.getPX(B.css("padding-top")),_=E.helpers.getPX(B.css("margin-left")),F=E.helpers.getPX(B.css("margin-right")),D=E.helpers.getPX(B.css("padding-left")),M=E.helpers.getPX(B.css("padding-right"))),E.$placeholder.css("font-size",B.css("font-size")),E.$placeholder.css("line-height",B.css("line-height"))}else E.$placeholder.css("font-size",E.$el.css("font-size")),E.$placeholder.css("line-height",E.$el.css("line-height"));E.$wp.addClass("show-placeholder"),E.$placeholder.css({marginTop:Math.max(E.helpers.getPX(E.$el.css("margin-top")),O),paddingTop:Math.max(E.helpers.getPX(E.$el.css("padding-top")),w),paddingLeft:Math.max(E.helpers.getPX(E.$el.css("padding-left")),D),marginLeft:Math.max(E.helpers.getPX(E.$el.css("margin-left")),_),paddingRight:Math.max(E.helpers.getPX(E.$el.css("padding-right")),M),marginRight:Math.max(E.helpers.getPX(E.$el.css("margin-right")),F),textAlign:L}).text(E.language.translate(E.opts.placeholderText||E.$oel.attr("placeholder")||"")),E.$placeholder.html(E.$placeholder.text().replace(/\n/g,"<br>"))}function S(){E.$wp.removeClass("show-placeholder")}function C(){return!!E.$wp&&void(E.core.isEmpty()?v():S())}function N(){E.$placeholder=o("<span class=\"fr-placeholder\"></span>"),E.$wp.append(E.$placeholder)}return{_init:function(){return!!E.$wp&&void E.events.on("init input keydown keyup contentChanged initialized",C)},show:v,hide:S,refresh:C,isVisible:function(){return!E.$wp||E.node.hasClass(E.$wp.get(0),"show-placeholder")}}},o.FE.MODULES.edit=function(E){function v(){if(E.browser.mozilla)try{E.doc.execCommand("enableObjectResizing",!1,"false"),E.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(A){}if(E.browser.msie)try{E.doc.body.addEventListener("mscontrolselect",function(A){return A.preventDefault(),!1})}catch(A){}}var N=!1;return{on:function(){E.$wp?(E.$el.attr("contenteditable",!0),E.$el.removeClass("fr-disabled").attr("aria-disabled",!1),E.$tb&&E.$tb.removeClass("fr-disabled").attr("aria-disabled",!1),v()):E.$el.is("a")&&E.$el.attr("contenteditable",!0),N=!1},off:function(){E.$wp?(E.$el.attr("contenteditable",!1),E.$el.addClass("fr-disabled").attr("aria-disabled",!0),E.$tb&&E.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):E.$el.is("a")&&E.$el.attr("contenteditable",!1),N=!0},disableDesign:v,isDisabled:function(){return N}}},o.extend(o.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:"html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:\"\";display:block;clear:both;}",iframeStyleFiles:[],direction:"auto",zIndex:1,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),o.FE.MODULES.core=function(E){function S(){E.opts.iframe||E.$el.addClass("fr-element fr-view")}function T(){if(E.$box.addClass("fr-box"+(E.opts.editorClass?" "+E.opts.editorClass:"")),E.$wp.addClass("fr-wrapper"),S(),E.opts.iframe){E.$iframe.addClass("fr-iframe"),E.$el.addClass("fr-view");for(var D=0;D<E.o_doc.styleSheets.length;D++){var M;try{M=E.o_doc.styleSheets[D].cssRules}catch(B){}if(M)for(var R=0,L=M.length;R<L;R++)M[R].selectorText&&(0===M[R].selectorText.indexOf(".fr-view")||0===M[R].selectorText.indexOf(".fr-element"))&&0<M[R].style.cssText.length&&(0===M[R].selectorText.indexOf(".fr-view")?E.opts.iframeStyle+=M[R].selectorText.replace(/\.fr-view/g,"body")+"{"+M[R].style.cssText+"}":E.opts.iframeStyle+=M[R].selectorText.replace(/\.fr-element/g,"body")+"{"+M[R].style.cssText+"}")}}"auto"!=E.opts.direction&&E.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+E.opts.direction),E.$el.attr("dir",E.opts.direction),E.$wp.attr("dir",E.opts.direction),1<E.opts.zIndex&&E.$box.css("z-index",E.opts.zIndex),E.opts.theme&&E.$box.addClass(E.opts.theme+"-theme")}function N(){E.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!E.win.FormData,progress:"upload"in new XMLHttpRequest}}return{_init:function(){if(o.FE.INSTANCES.push(E),N(),E.$wp){T(),E.html.set(E._original_html),E.$el.attr("spellcheck",E.opts.spellcheck),E.helpers.isMobile()&&(E.$el.attr("autocomplete",E.opts.spellcheck?"on":"off"),E.$el.attr("autocorrect",E.opts.spellcheck?"on":"off"),E.$el.attr("autocapitalize",E.opts.spellcheck?"on":"off")),E.opts.disableRightClick&&E.events.$on(E.$el,"contextmenu",function(D){if(2==D.button)return!1});try{E.doc.execCommand("styleWithCSS",!1,!1)}catch(D){}}"TEXTAREA"==E.$oel.get(0).tagName&&(E.events.on("contentChanged",function(){E.$oel.val(E.html.get())}),E.events.on("form.submit",function(){E.$oel.val(E.html.get())}),E.events.on("form.reset",function(){E.html.set(E._original_html)}),E.$oel.val(E.html.get())),E.helpers.isIOS()&&E.events.$on(E.$doc,"selectionchange",function(){E.$doc.get(0).hasFocus()||E.$win.get(0).focus()}),E.events.trigger("init")},destroy:function(D){"TEXTAREA"==E.$oel.get(0).tagName&&E.$oel.val(D),E.$wp&&("TEXTAREA"==E.$oel.get(0).tagName?(E.$el.html(""),E.$wp.html(""),E.$box.replaceWith(E.$oel),E.$oel.show()):(E.$wp.replaceWith(D),E.$el.html(""),E.$box.removeClass("fr-view fr-ltr fr-box "+(E.opts.editorClass||"")),E.opts.theme&&E.$box.addClass(E.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null},isEmpty:function(){return E.node.isEmpty(E.el)},getXHR:function(D,M){var R=new XMLHttpRequest;for(var L in R.open(M,D,!0),E.opts.requestWithCredentials&&(R.withCredentials=!0),E.opts.requestHeaders)E.opts.requestHeaders.hasOwnProperty(L)&&R.setRequestHeader(L,E.opts.requestHeaders[L]);return R},injectStyle:function(D){if(E.opts.iframe){E.$head.find("style[data-fr-style], link[data-fr-style]").remove(),E.$head.append("<style data-fr-style=\"true\">"+D+"</style>");for(var M=0,R;M<E.opts.iframeStyleFiles.length;M++)R=o("<link data-fr-style=\"true\" rel=\"stylesheet\" href=\""+E.opts.iframeStyleFiles[M]+"\">"),R.get(0).addEventListener("load",E.size.syncIframe),E.$head.append(R)}},hasFocus:function(){return E.browser.mozilla&&E.helpers.isMobile()?E.selection.inEditor():E.node.hasFocus(E.el)||0<E.$el.find("*:focus").length},sameInstance:function(D){if(!D)return!1;var M=D.data("instance");return!!M&&M.id==E.id}}},o.FE.MODULES.cursorLists=function(E){function v(_){for(var F=_;"LI"!=F.tagName;)F=F.parentNode;return F}function S(_){for(var F=_;!E.node.isList(F);)F=F.parentNode;return F}return{_startEnter:function(_){var F=v(_),w=F.nextSibling,D=F.previousSibling,M=E.html.defaultTag(),R;if(E.node.isEmpty(F,!0)&&w){for(var L="",B="",I=_.parentNode;!E.node.isList(I)&&I.parentNode&&"LI"!==I.parentNode.tagName;)L=E.node.openTagString(I)+L,B+=E.node.closeTagString(I),I=I.parentNode;L=E.node.openTagString(I)+L,B+=E.node.closeTagString(I);var P="";for(P=I.parentNode&&"LI"==I.parentNode.tagName?B+"<li>"+o.FE.MARKERS+"<br>"+L:M?B+"<"+M+">"+o.FE.MARKERS+"<br></"+M+">"+L:B+o.FE.MARKERS+"<br>"+L,o(F).html("<span id=\"fr-break\"></span>");0>["UL","OL"].indexOf(I.tagName)||I.parentNode&&"LI"===I.parentNode.tagName;)I=I.parentNode;var K=E.node.openTagString(I)+o(I).html()+E.node.closeTagString(I);K=K.replace(/<span id="fr-break"><\/span>/g,P),o(I).replaceWith(K),E.$el.find("li:empty").remove()}else D&&w||!E.node.isEmpty(F,!0)?(o(F).before("<li><br></li>"),o(_).remove()):D?(R=S(F),R.parentNode&&"LI"==R.parentNode.tagName?o(R.parentNode).after("<li>"+o.FE.MARKERS+"<br></li>"):M?o(R).after("<"+M+">"+o.FE.MARKERS+"<br></"+M+">"):o(R).after(o.FE.MARKERS+"<br>"),o(F).remove()):(R=S(F),R.parentNode&&"LI"==R.parentNode.tagName?w?o(R.parentNode).before("<li>"+o.FE.MARKERS+"<br></li>"):o(R.parentNode).after("<li>"+o.FE.MARKERS+"<br></li>"):M?o(R).before("<"+M+">"+o.FE.MARKERS+"<br></"+M+">"):o(R).before(o.FE.MARKERS+"<br>"),o(F).remove())},_middleEnter:function(_){for(var F=v(_),w="",D=_,M="",R="";D!=F;){D=D.parentNode;var L="A"==D.tagName&&E.cursor.isAtEnd(_,D)?"fr-to-remove":"";M=E.node.openTagString(o(D).clone().addClass(L).get(0))+M,R=E.node.closeTagString(D)+R}w=R+w+M+o.FE.MARKERS,o(_).replaceWith("<span id=\"fr-break\"></span>");var B=E.node.openTagString(F)+o(F).html()+E.node.closeTagString(F);B=B.replace(/<span id="fr-break"><\/span>/g,w),o(F).replaceWith(B)},_endEnter:function(_){for(var F=v(_),w=o.FE.MARKERS,D="",M=_,R=!1;M!=F;){M=M.parentNode;var L="A"==M.tagName&&E.cursor.isAtEnd(_,M)?"fr-to-remove":"";R||M==F||E.node.isBlock(M)||(R=!0,D+=o.FE.INVISIBLE_SPACE),D=E.node.openTagString(o(M).clone().addClass(L).get(0))+D,w+=E.node.closeTagString(M)}var B=D+w;o(_).remove(),o(F).after(B)},_backspace:function(_){var F=v(_),w=F.previousSibling;if(w){w=o(w).find(E.html.blockTagsQuery()).get(-1)||w,o(_).replaceWith(o.FE.MARKERS);var D=E.node.contents(w);D.length&&"BR"==D[D.length-1].tagName&&o(D[D.length-1]).remove(),o(F).find(E.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==F&&o(this).replaceWith(o(this).html()+(E.node.isEmpty(this)?"":"<br>"))});for(var M=E.node.contents(F)[0],R;M&&!E.node.isList(M);)R=M.nextSibling,o(w).append(M),M=R;for(w=F.previousSibling;M;)R=M.nextSibling,o(w).append(M),M=R;o(F).remove()}else{var L=S(F);if(o(_).replaceWith(o.FE.MARKERS),L.parentNode&&"LI"==L.parentNode.tagName){var B=L.previousSibling;E.node.isBlock(B)?(o(F).find(E.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==F&&o(this).replaceWith(o(this).html()+(E.node.isEmpty(this)?"":"<br>"))}),o(B).append(o(F).html())):o(L).before(o(F).html())}else{var I=E.html.defaultTag();I&&0===o(F).find(E.html.blockTagsQuery()).length?o(L).before("<"+I+">"+o(F).html()+"</"+I+">"):o(L).before(o(F).html())}o(F).remove(),0===o(L).find("li").length&&o(L).remove()}},_del:function(_){var F=v(_),w=F.nextSibling,D;if(w){D=E.node.contents(w),D.length&&"BR"==D[0].tagName&&o(D[0]).remove(),o(w).find(E.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==w&&o(this).replaceWith(o(this).html()+(E.node.isEmpty(this)?"":"<br>"))});for(var M=_,R=E.node.contents(w)[0],L;R&&!E.node.isList(R);)L=R.nextSibling,o(M).after(R),M=R,R=L;for(;R;)L=R.nextSibling,o(F).append(R),R=L;o(_).replaceWith(o.FE.MARKERS),o(w).remove()}else{for(var B=F;!B.nextSibling&&B!=E.el;)B=B.parentNode;if(B==E.el)return!1;if(B=B.nextSibling,E.node.isBlock(B))0>o.FE.NO_DELETE_TAGS.indexOf(B.tagName)&&(o(_).replaceWith(o.FE.MARKERS),D=E.node.contents(F),D.length&&"BR"==D[D.length-1].tagName&&o(D[D.length-1]).remove(),o(F).append(o(B).html()),o(B).remove());else for(D=E.node.contents(F),D.length&&"BR"==D[D.length-1].tagName&&o(D[D.length-1]).remove(),o(_).replaceWith(o.FE.MARKERS);B&&!E.node.isBlock(B)&&"BR"!=B.tagName;)o(F).append(o(B)),B=B.nextSibling}}}},o.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],o.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],o.FE.MODULES.cursor=function(E){function v(K){return!!K&&(!!E.node.isBlock(K)||(K.nextSibling&&K.nextSibling.nodeType==Node.TEXT_NODE&&0==K.nextSibling.textContent.replace(/\u200b/g,"").length?v(K.nextSibling):!K.nextSibling&&v(K.parentNode)))}function S(K){return!!K&&(!!E.node.isBlock(K)||(K.previousSibling&&K.previousSibling.nodeType==Node.TEXT_NODE&&0==K.previousSibling.textContent.replace(/\u200b/g,"").length?S(K.previousSibling):!K.previousSibling&&S(K.parentNode)))}function T(K,H){return!!K&&K!=E.$wp.get(0)&&(K.previousSibling&&K.previousSibling.nodeType==Node.TEXT_NODE&&0==K.previousSibling.textContent.replace(/\u200b/g,"").length?T(K.previousSibling,H):!K.previousSibling&&(!(K.parentNode!=H)||T(K.parentNode,H)))}function C(K,H){return!!K&&K!=E.$wp.get(0)&&(K.nextSibling&&K.nextSibling.nodeType==Node.TEXT_NODE&&0==K.nextSibling.textContent.replace(/\u200b/g,"").length?C(K.nextSibling,H):!K.nextSibling&&(!(K.parentNode!=H)||C(K.parentNode,H)))}function N(K){return 0<o(K).parentsUntil(E.$el,"LI").length&&0===o(K).parentsUntil("LI","TABLE").length}function A(K){var H=0<o(K).parentsUntil(E.$el,"BLOCKQUOTE").length,U=E.node.deepestParent(K,[],!H);if(U&&"BLOCKQUOTE"==U.tagName){var W=E.node.deepestParent(K,[o(K).parentsUntil(E.$el,"BLOCKQUOTE").get(0)]);W&&W.previousSibling&&(U=W)}if(null!==U){var Y=U.previousSibling,z;if(!(E.node.isBlock(U)&&E.node.isEditable(U)));else if(Y&&0>o.FE.NO_DELETE_TAGS.indexOf(Y.tagName))if(E.node.isDeletable(Y))o(Y).remove(),o(K).replaceWith(o.FE.MARKERS);else if(E.node.isEditable(Y))if(!E.node.isBlock(Y))o(K).replaceWith(o.FE.MARKERS),"BLOCKQUOTE"==U.tagName&&Y.nodeType==Node.ELEMENT_NODE?o(Y).remove():(o(Y).after(E.node.isEmpty(U)?"":o(U).html()),o(U).remove(),"BR"==Y.tagName&&o(Y).remove());else if(E.node.isEmpty(Y)&&!E.node.isList(Y))o(Y).remove();else{if(E.node.isList(Y)&&(Y=o(Y).find("li:last").get(0)),z=E.node.contents(Y),z.length&&"BR"==z[z.length-1].tagName&&o(z[z.length-1]).remove(),"BLOCKQUOTE"==Y.tagName&&"BLOCKQUOTE"!=U.tagName)for(z=E.node.contents(Y);z.length&&E.node.isBlock(z[z.length-1]);)Y=z[z.length-1],z=E.node.contents(Y);else if("BLOCKQUOTE"!=Y.tagName&&"BLOCKQUOTE"==U.tagName)for(z=E.node.contents(U);z.length&&E.node.isBlock(z[0]);)U=z[0],z=E.node.contents(U);o(K).replaceWith(o.FE.MARKERS),o(Y).append(E.node.isEmpty(U)?o.FE.MARKERS:U.innerHTML),o(U).remove()}}}function O(K){for(var H=K;!H.previousSibling;)if(H=H.parentNode,E.node.isElement(H))return!1;H=H.previousSibling;var U;if(!E.node.isBlock(H)&&E.node.isEditable(H)){for(U=E.node.contents(H);H.nodeType!=Node.TEXT_NODE&&!E.node.isDeletable(H)&&U.length&&E.node.isEditable(H);)H=U[U.length-1],U=E.node.contents(H);if(H.nodeType==Node.TEXT_NODE){if(E.helpers.isIOS())return!0;var W=H.textContent,Y=W.length-1;if(E.opts.tabSpaces&&W.length>=E.opts.tabSpaces){var z=W.substr(W.length-E.opts.tabSpaces,W.length-1);0==z.replace(/ /g,"").replace(new RegExp(o.FE.UNICODE_NBSP,"g"),"").length&&(Y=W.length-E.opts.tabSpaces)}H.textContent=W.substring(0,Y),H.textContent.length&&55357==H.textContent.charCodeAt(H.textContent.length-1)&&(H.textContent=H.textContent.substr(0,H.textContent.length-1));var X=W.length!=H.textContent.length;0==H.textContent.length?X&&E.opts.keepFormatOnDelete?o(H).after(o.FE.INVISIBLE_SPACE+o.FE.MARKERS):2!=H.parentNode.childNodes.length||H.parentNode!=K.parentNode||E.node.isBlock(H.parentNode)||E.node.isElement(H.parentNode)?(o(H).after(o.FE.MARKERS),E.node.isElement(H.parentNode)&&!K.nextSibling&&H.previousSibling&&"BR"==H.previousSibling.tagName&&o(K).after("<br>"),H.parentNode.removeChild(H)):(o(H.parentNode).after(o.FE.MARKERS),o(H.parentNode).remove()):o(H).after(o.FE.MARKERS)}else E.node.isDeletable(H)?(o(H).after(o.FE.MARKERS),o(H).remove()):!1!==E.events.trigger("node.remove",[o(H)])&&(o(H).after(o.FE.MARKERS),o(H).remove())}else if(!(0>o.FE.NO_DELETE_TAGS.indexOf(H.tagName)&&(E.node.isEditable(H)||E.node.isDeletable(H))))K.nextSibling&&"BR"==K.nextSibling.tagName&&o(K.nextSibling).remove();else if(E.node.isDeletable(H))o(K).replaceWith(o.FE.MARKERS),o(H).remove();else if(E.node.isEmpty(H)&&!E.node.isList(H))o(H).remove(),o(K).replaceWith(o.FE.MARKERS);else{for(E.node.isList(H)&&(H=o(H).find("li:last").get(0)),U=E.node.contents(H),U&&"BR"==U[U.length-1].tagName&&o(U[U.length-1]).remove(),U=E.node.contents(H);U&&E.node.isBlock(U[U.length-1]);)H=U[U.length-1],U=E.node.contents(H);o(H).append(o.FE.MARKERS);for(var q=K;!q.previousSibling;)q=q.parentNode;for(;q&&"BR"!==q.tagName&&!E.node.isBlock(q);){var V=q;q=q.nextSibling,o(H).append(V)}q&&"BR"==q.tagName&&o(q).remove(),o(K).remove()}}function F(K){var H=0<o(K).parentsUntil(E.$el,"BLOCKQUOTE").length,U=E.node.deepestParent(K,[],!H);if(U&&"BLOCKQUOTE"==U.tagName){var W=E.node.deepestParent(K,[o(K).parentsUntil(E.$el,"BLOCKQUOTE").get(0)]);W&&W.nextSibling&&(U=W)}if(null!==U){var Y=U.nextSibling,z;if(!(E.node.isBlock(U)&&(E.node.isEditable(U)||E.node.isDeletable(U))));else if(Y&&0>o.FE.NO_DELETE_TAGS.indexOf(Y.tagName))if(E.node.isDeletable(Y))o(Y).remove(),o(K).replaceWith(o.FE.MARKERS);else if(!(E.node.isBlock(Y)&&E.node.isEditable(Y))){for(o(K).replaceWith(o.FE.MARKERS);Y&&"BR"!==Y.tagName&&!E.node.isBlock(Y)&&E.node.isEditable(Y);){var q=Y;Y=Y.nextSibling,o(U).append(q)}Y&&"BR"==Y.tagName&&E.node.isEditable(Y)&&o(Y).remove()}else if(!E.node.isList(Y)){if(z=E.node.contents(Y),z.length&&"BR"==z[0].tagName&&o(z[0]).remove(),"BLOCKQUOTE"!=Y.tagName&&"BLOCKQUOTE"==U.tagName)for(z=E.node.contents(U);z.length&&E.node.isBlock(z[z.length-1]);)U=z[z.length-1],z=E.node.contents(U);else if("BLOCKQUOTE"==Y.tagName&&"BLOCKQUOTE"!=U.tagName)for(z=E.node.contents(Y);z.length&&E.node.isBlock(z[0]);)Y=z[0],z=E.node.contents(Y);o(K).replaceWith(o.FE.MARKERS),o(U).append(Y.innerHTML),o(Y).remove()}else if(E.node.isEmpty(U,!0))o(U).remove(),o(Y).find("li:first").prepend(o.FE.MARKERS);else{var X=o(Y).find("li:first");"BLOCKQUOTE"==U.tagName&&(z=E.node.contents(U),z.length&&E.node.isBlock(z[z.length-1])&&(U=z[z.length-1])),0===X.find("ul, ol").length&&(o(K).replaceWith(o.FE.MARKERS),X.find(E.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==X.get(0)&&o(this).replaceWith(o(this).html()+(E.node.isEmpty(this)?"":"<br>"))}),o(U).append(E.node.contents(X.get(0))),X.remove(),0===o(Y).find("li").length&&o(Y).remove())}}}function w(K){for(var H=K;!H.nextSibling;)if(H=H.parentNode,E.node.isElement(H))return!1;if(H=H.nextSibling,"BR"==H.tagName&&E.node.isEditable(H))if(H.nextSibling){if(E.node.isBlock(H.nextSibling)&&E.node.isEditable(H.nextSibling))if(0>o.FE.NO_DELETE_TAGS.indexOf(H.nextSibling.tagName))H=H.nextSibling,o(H.previousSibling).remove();else return void o(H).remove();}else if(v(H)){if(N(K))E.cursorLists._del(K);else{var U=E.node.deepestParent(H);U&&(o(H).remove(),F(K))}return}var W;if(!E.node.isBlock(H)&&E.node.isEditable(H)){for(W=E.node.contents(H);H.nodeType!=Node.TEXT_NODE&&W.length&&!E.node.isDeletable(H)&&E.node.isEditable(H);)H=W[0],W=E.node.contents(H);H.nodeType==Node.TEXT_NODE?(o(H).before(o.FE.MARKERS),H.textContent=H.textContent.length&&55357==H.textContent.charCodeAt(0)?H.textContent.substring(2,H.textContent.length):H.textContent.substring(1,H.textContent.length)):E.node.isDeletable(H)?(o(H).before(o.FE.MARKERS),o(H).remove()):!1!==E.events.trigger("node.remove",[o(H)])&&(o(H).before(o.FE.MARKERS),o(H).remove()),o(K).remove()}else if(0>o.FE.NO_DELETE_TAGS.indexOf(H.tagName)&&(E.node.isEditable(H)||E.node.isDeletable(H)))if(E.node.isDeletable(H))o(K).replaceWith(o.FE.MARKERS),o(H).remove();else if(E.node.isList(H))K.previousSibling?(o(H).find("li:first").prepend(K),E.cursorLists._backspace(K)):(o(H).find("li:first").prepend(o.FE.MARKERS),o(K).remove());else if(W=E.node.contents(H),W&&"BR"==W[0].tagName&&o(W[0]).remove(),W&&"BLOCKQUOTE"==H.tagName){var Y=W[0];for(o(K).before(o.FE.MARKERS);Y&&"BR"!=Y.tagName;){var z=Y;Y=Y.nextSibling,o(K).before(z)}Y&&"BR"==Y.tagName&&o(Y).remove()}else o(K).after(o(H).html()).after(o.FE.MARKERS),o(H).remove()}function M(){for(var K=E.el.querySelectorAll("blockquote:empty"),H=0;H<K.length;H++)K[H].parentNode.removeChild(K[H])}function R(){E.$el.find(".fr-to-remove").each(function(){for(var K=E.node.contents(this),H=0;H<K.length;H++)K[H].nodeType==Node.TEXT_NODE&&(K[H].textContent=K[H].textContent.replace(/\u200B/g,""));o(this).replaceWith(this.innerHTML)})}function L(K,H,U){var W=E.node.deepestParent(K,[],!U),Y;if(W&&"BLOCKQUOTE"==W.tagName)return C(K,W)?(Y=E.html.defaultTag(),Y?o(W).after("<"+Y+">"+o.FE.MARKERS+"<br></"+Y+">"):o(W).after(o.FE.MARKERS+"<br>"),o(K).remove(),!1):(I(K,H,U),!1);if(null==W)Y=E.html.defaultTag(),Y&&E.node.isElement(K.parentNode)?o(K).replaceWith("<"+Y+">"+o.FE.MARKERS+"<br></"+Y+">"):o(K).replaceWith((E.node.isEmpty(K.parentNode,!0)?"":"<br/>")+o.FE.MARKERS+"<br/>");else{var z=K,X="";(!E.node.isBlock(W)||H)&&(X="<br/>");var q="",V="";Y=E.html.defaultTag();var G="",Q="";Y&&E.node.isBlock(W)&&(G="<"+Y+">",Q="</"+Y+">",W.tagName==Y.toUpperCase()&&(G=E.node.openTagString(o(W).clone().removeAttr("id").get(0))));do if(z=z.parentNode,!H||z!=W||H&&!E.node.isBlock(W))if(q+=E.node.closeTagString(z),z==W&&E.node.isBlock(W))V=G+V;else{var Z="A"==z.tagName&&C(K,z)?"fr-to-remove":"";V=E.node.openTagString(o(z).clone().addClass(Z).get(0))+V}while(z!=W);X=q+X+V+(K.parentNode==W&&E.node.isBlock(W)?"":o.FE.INVISIBLE_SPACE)+o.FE.MARKERS,E.node.isBlock(W)&&!o(W).find("*:last").is("br")&&o(W).append("<br/>"),o(K).after("<span id=\"fr-break\"></span>"),o(K).remove(),W.nextSibling&&!E.node.isBlock(W.nextSibling)||E.node.isBlock(W)||o(W).after("<br>");var J;J=!H&&E.node.isBlock(W)?E.node.openTagString(W)+o(W).html()+Q:E.node.openTagString(W)+o(W).html()+E.node.closeTagString(W),J=J.replace(/<span id="fr-break"><\/span>/g,X),o(W).replaceWith(J)}}function B(K,H,U){var W=E.node.deepestParent(K,[],!U),Y;if(W&&"TABLE"==W.tagName)return o(W).find("td:first, th:first").prepend(K),B(K,H,U);if(W&&"BLOCKQUOTE"==W.tagName){if(T(K,W))return Y=E.html.defaultTag(),Y?o(W).before("<"+Y+">"+o.FE.MARKERS+"<br></"+Y+">"):o(W).before(o.FE.MARKERS+"<br>"),o(K).remove(),!1;C(K,W)?L(K,H,!0):I(K,H,!0)}if(null==W)Y=E.html.defaultTag(),Y&&E.node.isElement(K.parentNode)?o(K).replaceWith("<"+Y+">"+o.FE.MARKERS+"<br></"+Y+">"):o(K).replaceWith("<br>"+o.FE.MARKERS);else{if(!E.node.isBlock(W))o(W).before("<br>");else if(H)o(K).remove(),o(W).prepend("<br>"+o.FE.MARKERS);else{if(E.node.isEmpty(W,!0))return L(K,H,U);o(W).before(E.node.openTagString(o(W).clone().removeAttr("id").get(0))+"<br>"+E.node.closeTagString(W))}o(K).remove()}}function I(K,H,U){var W=E.node.deepestParent(K,[],!U);if(null==W)E.html.defaultTag()&&K.parentNode===E.el?o(K).replaceWith("<"+E.html.defaultTag()+">"+o.FE.MARKERS+"<br></"+E.html.defaultTag()+">"):((!K.nextSibling||E.node.isBlock(K.nextSibling))&&o(K).after("<br>"),o(K).replaceWith("<br>"+o.FE.MARKERS));else{var Y=K,z="";"PRE"==W.tagName&&(H=!0),(!E.node.isBlock(W)||H)&&(z="<br>");var X="",q="";do{var V=Y;if(Y=Y.parentNode,"BLOCKQUOTE"==W.tagName&&E.node.isEmpty(V)&&!E.node.hasClass(V,"fr-marker")&&0<o(V).find(K).length&&o(V).after(K),!("BLOCKQUOTE"==W.tagName&&(C(K,Y)||T(K,Y)))&&(!H||Y!=W||H&&!E.node.isBlock(W))){X+=E.node.closeTagString(Y);var G="A"==Y.tagName&&C(K,Y)?"fr-to-remove":"";q=E.node.openTagString(o(Y).clone().addClass(G).removeAttr("id").get(0))+q}}while(Y!=W);var Q=W==K.parentNode&&E.node.isBlock(W)||K.nextSibling;if("BLOCKQUOTE"==W.tagName){K.previousSibling&&E.node.isBlock(K.previousSibling)&&K.nextSibling&&"BR"==K.nextSibling.tagName&&(o(K.nextSibling).after(K),K.nextSibling&&"BR"==K.nextSibling.tagName&&o(K.nextSibling).remove());var Z=E.html.defaultTag();z=X+z+(Z?"<"+Z+">":"")+o.FE.MARKERS+"<br>"+(Z?"</"+Z+">":"")+q}else z=X+z+q+(Q?"":o.FE.INVISIBLE_SPACE)+o.FE.MARKERS;o(K).replaceWith("<span id=\"fr-break\"></span>");var J=E.node.openTagString(W)+o(W).html()+E.node.closeTagString(W);J=J.replace(/<span id="fr-break"><\/span>/g,z),o(W).replaceWith(J)}}return{enter:function(K){var H=E.markers.insert();if(!H)return!0;E.el.normalize();var U=!1;0<o(H).parentsUntil(E.$el,"BLOCKQUOTE").length&&(K=!1,U=!0),o(H).parentsUntil(E.$el,"TD, TH").length&&(U=!1),v(H)?!N(H)||K||U?L(H,K,U):E.cursorLists._endEnter(H):S(H)?!N(H)||K||U?B(H,K,U):E.cursorLists._startEnter(H):!N(H)||K||U?I(H,K,U):E.cursorLists._middleEnter(H),R(),E.opts.htmlUntouched||(E.html.fillEmptyBlocks(!0),E.html.cleanEmptyTags(),E.clean.lists()),E.spaces.normalizeAroundCursor(),E.selection.restore()},backspace:function(){var K=!1,H=E.markers.insert();if(!H)return!0;for(var U=H.parentNode;U&&!E.node.isElement(U);){if("false"===U.getAttribute("contenteditable"))return o(H).replaceWith(o.FE.MARKERS),E.selection.restore(),!1;if("true"===U.getAttribute("contenteditable"))break;U=U.parentNode}E.el.normalize();var W=H.previousSibling;if(W){var Y=W.textContent;Y&&Y.length&&8203==Y.charCodeAt(Y.length-1)&&(1==Y.length?o(W).remove():(W.textContent=W.textContent.substr(0,Y.length-1),W.textContent.length&&55357==W.textContent.charCodeAt(W.textContent.length-1)&&(W.textContent=W.textContent.substr(0,W.textContent.length-1))))}return v(H)?K=O(H):S(H)?N(H)&&T(H,o(H).parents("li:first").get(0))?E.cursorLists._backspace(H):A(H):K=O(H),o(H).remove(),M(),E.html.fillEmptyBlocks(!0),E.opts.htmlUntouched||(E.html.cleanEmptyTags(),E.clean.quotes(),E.clean.lists()),E.spaces.normalizeAroundCursor(),E.selection.restore(),K},del:function(){var K=E.markers.insert();if(!K)return!1;if(E.el.normalize(),!v(K))S(K)?w(K):w(K);else if(!N(K))F(K);else if(0===o(K).parents("li:first").find("ul, ol").length)E.cursorLists._del(K);else{var H=o(K).parents("li:first").find("ul:first, ol:first").find("li:first");H=H.find(E.html.blockTagsQuery()).get(-1)||H,H.prepend(K),E.cursorLists._backspace(K)}o(K).remove(),M(),E.html.fillEmptyBlocks(!0),E.opts.htmlUntouched||(E.html.cleanEmptyTags(),E.clean.quotes(),E.clean.lists()),E.spaces.normalizeAroundCursor(),E.selection.restore()},isAtEnd:C,isAtStart:T}},o.FE.ENTER_P=0,o.FE.ENTER_DIV=1,o.FE.ENTER_BR=2,o.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221},o.extend(o.FE.DEFAULTS,{enter:o.FE.ENTER_P,multiLine:!0,tabSpaces:0}),o.FE.MODULES.keys=function(E){function v(Q){E.opts.multiLine?!E.helpers.isIOS()&&(Q.preventDefault(),Q.stopPropagation(),!E.selection.isCollapsed()&&E.selection.remove(),E.cursor.enter()):(Q.preventDefault(),Q.stopPropagation())}function S(Q){Q.preventDefault(),Q.stopPropagation(),E.opts.multiLine&&(!E.selection.isCollapsed()&&E.selection.remove(),E.cursor.enter(!0))}function T(Q){E.selection.isCollapsed()?!E.cursor.backspace()&&(Q.preventDefault(),Q.stopPropagation(),q=!1):(Q.preventDefault(),Q.stopPropagation(),E.selection.remove(),E.html.fillEmptyBlocks(),q=!1),E.placeholder.refresh()}function C(Q){Q.preventDefault(),Q.stopPropagation(),""===E.selection.text()?E.cursor.del():E.selection.remove(),E.placeholder.refresh()}function N(Q){var Z=E.selection.element();if(!E.helpers.isMobile()&&(E.browser.mozilla||Z&&"A"==Z.tagName)){Q.preventDefault(),Q.stopPropagation(),E.selection.isCollapsed()||E.selection.remove();var J=E.markers.insert();if(J){var ee=J.previousSibling,te=J.nextSibling;!te&&J.parentNode&&"A"==J.parentNode.tagName?(J.parentNode.insertAdjacentHTML("afterend","&nbsp;"+o.FE.MARKERS),J.parentNode.removeChild(J)):(ee&&ee.nodeType==Node.TEXT_NODE&&1==ee.textContent.length&&160==ee.textContent.charCodeAt(0)?ee.textContent+=" ":J.insertAdjacentHTML("beforebegin","&nbsp;"),J.outerHTML=o.FE.MARKERS),E.selection.restore()}}}function A(){if(E.browser.mozilla&&E.selection.isCollapsed()&&!X){var Q=E.selection.ranges(0),Z=Q.startContainer,J=Q.startOffset;Z&&Z.nodeType==Node.TEXT_NODE&&J<=Z.textContent.length&&0<J&&32==Z.textContent.charCodeAt(J-1)&&(E.selection.save(),E.spaces.normalize(),E.selection.restore())}}function O(){E.selection.isFull()&&setTimeout(function(){var Q=E.html.defaultTag();Q?E.$el.html("<"+Q+">"+o.FE.MARKERS+"<br/></"+Q+">"):E.$el.html(o.FE.MARKERS+"<br/>"),E.selection.restore(),E.placeholder.refresh(),E.button.bulkRefresh(),E.undo.saveStep()},0)}function _(Q){if(0<E.opts.tabSpaces)if(E.selection.isCollapsed()){E.undo.saveStep(),Q.preventDefault(),Q.stopPropagation();for(var Z="",J=0;J<E.opts.tabSpaces;J++)Z+="&nbsp;";E.html.insert(Z),E.placeholder.refresh(),E.undo.saveStep()}else Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?E.commands.outdent():E.commands.indent()}function F(){X=!1}function D(Q){E.events.disableBlur(),q=!0;var Z=Q.which;if(16===Z)return!0;if(229===Z)return X=!0,!0;X=!1;var J=K(Z)&&!I(Q),ee=Z==o.FE.KEYCODE.BACKSPACE||Z==o.FE.KEYCODE.DELETE;if((E.selection.isFull()&&!E.opts.keepFormatOnDelete&&!E.placeholder.isVisible()||ee&&E.placeholder.isVisible()&&E.opts.keepFormatOnDelete)&&(J||ee)){var te=E.html.defaultTag();if(te?E.$el.html("<"+te+">"+o.FE.MARKERS+"<br/></"+te+">"):E.$el.html(o.FE.MARKERS+"<br/>"),E.selection.restore(),!K(Z))return Q.preventDefault(),!0}Z==o.FE.KEYCODE.ENTER?Q.shiftKey?S(Q):v(Q):Z!=o.FE.KEYCODE.BACKSPACE||I(Q)||Q.altKey?Z!=o.FE.KEYCODE.DELETE||I(Q)||Q.altKey?Z==o.FE.KEYCODE.SPACE?N(Q):Z==o.FE.KEYCODE.TAB?_(Q):!I(Q)&&K(Q.which)&&!E.selection.isCollapsed()&&!Q.ctrlKey&&E.selection.remove():E.placeholder.isVisible()?(Q.preventDefault(),Q.stopPropagation()):C(Q):E.placeholder.isVisible()?(Q.preventDefault(),Q.stopPropagation()):T(Q),E.events.enableBlur()}function M(Q){for(var Z=E.doc.createTreeWalker(Q,NodeFilter.SHOW_TEXT,E.node.filter(function(ee){return /\u200B/gi.test(ee.textContent)}),!1),J;Z.nextNode();)J=Z.currentNode,J.textContent=J.textContent.replace(/\u200B/gi,"")}function R(){if(!E.$wp)return!0;var Q;E.opts.height||E.opts.heightMax?(Q=E.position.getBoundingRect().top,E.helpers.isIOS()&&(Q-=E.helpers.scrollTop()),E.opts.iframe&&(Q+=E.$iframe.offset().top),Q>E.$wp.offset().top-E.helpers.scrollTop()+E.$wp.height()-20&&E.$wp.scrollTop(Q+E.$wp.scrollTop()-(E.$wp.height()+E.$wp.offset().top)+E.helpers.scrollTop()+20)):(Q=E.position.getBoundingRect().top,E.opts.toolbarBottom&&(Q+=E.opts.toolbarStickyOffset),E.helpers.isIOS()&&(Q-=E.helpers.scrollTop()),E.opts.iframe&&(Q+=E.$iframe.offset().top),Q+=E.opts.toolbarStickyOffset,Q>E.o_win.innerHeight-20&&o(E.o_win).scrollTop(Q+E.helpers.scrollTop()-E.o_win.innerHeight+20),Q=E.position.getBoundingRect().top,!E.opts.toolbarBottom&&(Q-=E.opts.toolbarStickyOffset),E.helpers.isIOS()&&(Q-=E.helpers.scrollTop()),E.opts.iframe&&(Q+=E.$iframe.offset().top),Q<E.$tb.height()+20&&o(E.o_win).scrollTop(Q+E.helpers.scrollTop()-E.$tb.height()-20))}function L(){var Q=E.selection.element(),Z=E.node.blockParent(Q);if(Z&&"DIV"==Z.tagName&&E.selection.info(Z).atStart){var J=E.html.defaultTag();Z.previousSibling&&"DIV"!=Z.previousSibling.tagName&&J&&"div"!=J&&(E.selection.save(),o(Z).replaceWith("<"+J+">"+Z.innerHTML+"</"+J+">"),E.selection.restore())}}function B(Q){if(E.helpers.isAndroid&&E.browser.mozilla)return!0;if(X)return X=!1,!1;if(!E.selection.isCollapsed())return!0;if(Q&&(Q.which===o.FE.KEYCODE.META||Q.which==o.FE.KEYCODE.CTRL))return!0;if(Q&&P(Q.which))return!0;Q&&Q.which==o.FE.KEYCODE.ENTER&&E.helpers.isIOS()&&L(),Q&&(Q.which==o.FE.KEYCODE.ENTER||Q.which==o.FE.KEYCODE.BACKSPACE||37<=Q.which&&40>=Q.which&&!E.browser.msie)&&!(Q.which==o.FE.KEYCODE.BACKSPACE&&q)&&R(),E.html.cleanBRs(!0,!0);var ee=E.selection.element();(function(te){if(!te)return!1;var ne=te.innerHTML;return ne=ne.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""),ne&&/\u200B/.test(ne)&&0<ne.replace(/\u200B/gi,"").length})(ee)&&!E.node.hasClass(ee,"fr-marker")&&"IFRAME"!=ee.tagName&&function(te){var ne=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return!E.helpers.isIOS()||0===((te.textContent||"").match(ne)||[]).length}(ee)&&(E.selection.save(),M(ee),E.selection.restore())}function I(Q){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(Q.metaKey&&!Q.altKey)return!0;}else if(Q.ctrlKey&&!Q.altKey)return!0;return!1}function P(Q){if(Q>=o.FE.KEYCODE.ARROW_LEFT&&Q<=o.FE.KEYCODE.ARROW_DOWN)return!0}function K(Q){if(Q>=o.FE.KEYCODE.ZERO&&Q<=o.FE.KEYCODE.NINE)return!0;if(Q>=o.FE.KEYCODE.NUM_ZERO&&Q<=o.FE.KEYCODE.NUM_MULTIPLY)return!0;if(Q>=o.FE.KEYCODE.A&&Q<=o.FE.KEYCODE.Z)return!0;if(E.browser.webkit&&0===Q)return!0;return Q===o.FE.KEYCODE.SPACE||Q===o.FE.KEYCODE.QUESTION_MARK||Q===o.FE.KEYCODE.NUM_PLUS||Q===o.FE.KEYCODE.NUM_MINUS||Q===o.FE.KEYCODE.NUM_PERIOD||Q===o.FE.KEYCODE.NUM_DIVISION||Q===o.FE.KEYCODE.SEMICOLON||Q===o.FE.KEYCODE.FF_SEMICOLON||Q===o.FE.KEYCODE.DASH||Q===o.FE.KEYCODE.EQUALS||Q===o.FE.KEYCODE.FF_EQUALS||Q===o.FE.KEYCODE.COMMA||Q===o.FE.KEYCODE.PERIOD||Q===o.FE.KEYCODE.SLASH||Q===o.FE.KEYCODE.APOSTROPHE||Q===o.FE.KEYCODE.SINGLE_QUOTE||Q===o.FE.KEYCODE.OPEN_SQUARE_BRACKET||Q===o.FE.KEYCODE.BACKSLASH||Q===o.FE.KEYCODE.CLOSE_SQUARE_BRACKET}function H(Q){var Z=Q.which;return I(Q)||37<=Z&&40>=Z||!K(Z)&&Z!=o.FE.KEYCODE.DELETE&&Z!=o.FE.KEYCODE.BACKSPACE&&Z!=o.FE.KEYCODE.ENTER||void(!V&&(G=E.snapshot.get()),clearTimeout(V),V=setTimeout(function(){V=null,E.undo.saveStep()},Math.max(250,E.opts.typingTimer)))}function U(Q){var Z=Q.which;return I(Q)||37<=Z&&40>=Z||void(G&&V&&(E.undo.saveStep(G),G=null))}var X=!1,q,V,G;return{_init:function(){if(E.events.on("keydown",H),E.events.on("input",A),E.events.on("keyup input",U),E.events.on("keypress",F),E.events.on("keydown",D),E.events.on("keyup",B),E.events.on("html.inserted",B),E.events.on("cut",O),!E.browser.edge&&E.el.msGetInputContext)try{E.el.msGetInputContext().addEventListener("MSCandidateWindowShow",function(){X=!0}),E.el.msGetInputContext().addEventListener("MSCandidateWindowHide",function(){X=!1,B()})}catch(Q){}},ctrlKey:I,isCharacter:K,isArrow:P,forceUndo:function(){V&&(clearTimeout(V),E.undo.saveStep(),G=null)},isIME:function(){return X},isBrowserAction:function(Q){var Z=Q.which;return I(Q)||Z==o.FE.KEYCODE.F5}}},o.FE.MODULES.accessibility=function(E){function v(ee){if(ee&&ee.length){ee.data("blur-event-set")||ee.parents(".fr-popup").length||(E.events.$on(ee,"blur",function(){var oe=ee.parents(".fr-toolbar, .fr-popup").data("instance")||E;oe.events.blurActive()&&oe.events.trigger("blur"),oe.events.enableBlur()},!0),ee.data("blur-event-set",!0));var te=ee.parents(".fr-toolbar, .fr-popup").data("instance")||E;te.events.disableBlur(),ee.focus(),E.shared.$f_el=ee}}function S(ee,te){var ne=te?"last":"first",oe=ee.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[ne]();if(oe.length)return v(oe),!0}function T(ee){return ee.is("input, textarea")&&N(),E.events.disableBlur(),ee.focus(),!0}function C(ee,te){var ne=ee.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(te?":last":":first");if(ne.length)return T(ne);if(E.shared.with_kb){var oe=ee.find(".fr-active-item:visible:first");if(oe.length)return T(oe);var ie=ee.find("[tabIndex]:visible:first");if(ie.length)return T(ie)}}function N(){0===E.$el.find(".fr-marker").length&&E.core.hasFocus()&&E.selection.save()}function A(ee){ee.$el.find(".fr-marker").length&&(ee.events.disableBlur(),ee.selection.restore(),ee.events.enableBlur())}function F(){var ee=E.popups.areVisible();if(ee){var te=ee.find(".fr-buttons");return te.find("button:focus, .fr-group span:focus").length?!S(ee.data("instance").$tb):!S(te)}return!S(E.$tb)}function w(){var ee=null;return E.shared.$f_el.is(".fr-dropdown.fr-active")?ee=E.shared.$f_el:E.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(ee=E.shared.$f_el.closest(".fr-dropdown-menu").prev()),ee}function D(ee,te,ne){if(E.shared.$f_el){var oe=w();oe&&(E.button.click(oe),E.shared.$f_el=oe);var ie=ee.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),se=ie.index(E.shared.$f_el);if(0==se&&!ne||se==ie.length-1&&ne){var ae;if(te){if(ee.parent().is(".fr-popup")){var le=ee.parent().children().not(".fr-buttons");ae=!C(le,!ne)}!1===ae&&(E.shared.$f_el=null)}te&&!1===ae||S(ee,!ne)}else v(o(ie.get(se+(ne?1:-1))));return!1}}function M(ee,te){return D(ee,te,!0)}function R(ee,te){return D(ee,te)}function L(ee){if(E.shared.$f_el){if(E.shared.$f_el.is(".fr-dropdown.fr-active")){var te;return te=ee?E.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():E.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last(),v(te),!1}if(E.shared.$f_el.is("a.fr-command")){var te;return te=ee?E.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():E.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first(),te.length||(ee?te=E.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():te=E.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),v(te),!1}}}function B(){return E.shared.$f_el&&E.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?P():L(!0)}function I(){return L()}function P(){if(E.shared.$f_el){if(E.shared.$f_el.hasClass("fr-dropdown"))E.button.click(E.shared.$f_el);else if(E.shared.$f_el.is("button.fr-back")){E.opts.toolbarInline&&(E.events.disableBlur(),E.events.focus());var ee=E.popups.areVisible(E);ee&&(E.shared.with_kb=!1),E.button.click(E.shared.$f_el),X(ee)}else{if(E.events.disableBlur(),E.button.click(E.shared.$f_el),E.shared.$f_el.attr("data-popup")){var te=E.popups.areVisible(E);te&&te.data("popup-button",E.shared.$f_el)}else if(E.shared.$f_el.attr("data-modal")){var ne=E.modals.areVisible(E);ne&&ne.data("modal-button",E.shared.$f_el)}E.shared.$f_el=null}return!1}}function K(){E.shared.$f_el&&(E.events.disableBlur(),E.shared.$f_el.blur(),E.shared.$f_el=null);!1===E.events.trigger("toolbar.focusEditor")||(E.events.disableBlur(),E.events.focus())}function H(ee){if(E.shared.$f_el){var te=w();return te?(E.button.click(te),v(te)):ee.parent().find(".fr-back:visible").length?(E.shared.with_kb=!1,E.opts.toolbarInline&&(E.events.disableBlur(),E.events.focus()),E.button.exec(ee.parent().find(".fr-back:visible:first")),X(ee.parent())):E.shared.$f_el.is("button, .fr-group span")&&(ee.parent().is(".fr-popup")?(A(E),E.shared.$f_el=null,!1!==E.events.trigger("toolbar.esc")&&(E.popups.hide(ee.parent()),E.opts.toolbarInline&&E.toolbar.showInline(null,!0),X(ee.parent()))):K()),!1}}function W(ee){ee&&ee.length&&(E.events.$on(ee,"keydown",function(te){if(!o(te.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var ne=ee.parents(".fr-popup").data("instance")||ee.data("instance")||E;E.shared.with_kb=!0;var oe=ne.accessibility.exec(te,ee);return E.shared.with_kb=!1,oe},!0),E.events.$on(ee,"mouseenter","[tabIndex]",function(te){var ne=ee.parents(".fr-popup").data("instance")||ee.data("instance")||E;if(!J)return te.stopPropagation(),void te.preventDefault();var oe=o(te.currentTarget);ne.shared.$f_el&&ne.shared.$f_el.not(oe)&&ne.accessibility.focusEditor()},!0))}function z(ee){var te=E.popups.get(ee);return{_tiKeydown:function(ne){var oe=te.data("instance")||E;if(!1===oe.events.trigger("popup.tab",[ne]))return!1;var ie=ne.which,se=te.find(":focus:first");if(o.FE.KEYCODE.TAB==ie){ne.preventDefault();var ae=te.children().not(".fr-buttons"),le=ae.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),de=le.indexOf(this)+(ne.shiftKey?-1:1);if(0<=de&&de<le.length)return oe.events.disableBlur(),o(le[de]).focus(),ne.stopPropagation(),!1;var pe=te.find(".fr-buttons");if(pe.length&&S(pe,!!ne.shiftKey))return ne.stopPropagation(),!1;if(C(ae))return ne.stopPropagation(),!1}else if(o.FE.KEYCODE.ENTER==ie){var ce=null;0<te.find(".fr-submit:visible").length?ce=te.find(".fr-submit:visible:first"):te.find(".fr-dismiss:visible").length&&(ce=te.find(".fr-dismiss:visible:first")),ce&&(ne.preventDefault(),ne.stopPropagation(),oe.events.disableBlur(),oe.button.exec(ce))}else{if(o.FE.KEYCODE.ESC==ie)return ne.preventDefault(),ne.stopPropagation(),A(oe),oe.popups.isVisible(ee)&&te.find(".fr-back:visible").length?(oe.opts.toolbarInline&&(oe.events.disableBlur(),oe.events.focus()),oe.button.exec(te.find(".fr-back:visible:first")),X(te)):oe.popups.isVisible(ee)&&te.find(".fr-dismiss:visible").length?oe.button.exec(te.find(".fr-dismiss:visible:first")):(oe.popups.hide(ee),oe.opts.toolbarInline&&oe.toolbar.showInline(null,!0),X(te)),!1;if(o.FE.KEYCODE.SPACE==ie&&(se.is(".fr-submit")||se.is(".fr-dismiss")))return ne.preventDefault(),ne.stopPropagation(),oe.events.disableBlur(),oe.button.exec(se),!0;if(oe.keys.isBrowserAction(ne))return void ne.stopPropagation();if(se.is("input[type=text], textarea"))return void ne.stopPropagation();if(o.FE.KEYCODE.SPACE==ie&&(se.is(".fr-link-attr")||se.is("input[type=file]")))return void ne.stopPropagation();return ne.stopPropagation(),ne.preventDefault(),!1}},_tiMouseenter:function(){var oe=te.data("instance")||E;G(oe)}}}function X(ee){var te=ee.data("popup-button");te&&setTimeout(function(){v(te),ee.data("popup-button",null)},0)}function G(ee){var te=E.popups.areVisible(ee);te&&te.data("popup-button",null)}function Q(ee){var te=-1==navigator.userAgent.indexOf("Mac OS X")?ee.ctrlKey:ee.metaKey,ne=ee.which;if(ne==o.FE.KEYCODE.F10&&!te&&!ee.shiftKey&&ee.altKey){E.shared.with_kb=!0;var oe=E.popups.areVisible(E),ie=!1;return oe&&(ie=C(oe.children().not(".fr-buttons"))),ie||F(),E.shared.with_kb=!1,ee.preventDefault(),ee.stopPropagation(),!1}return!0}var J=!0;return{_init:function(){E.$wp?E.events.on("keydown",Q,!0):E.events.$on(E.$win,"keydown",Q,!0),E.events.on("mousedown",function(ee){G(E),E.shared.$f_el&&(A(E),ee.stopPropagation(),E.events.disableBlur(),E.shared.$f_el=null)},!0),E.events.on("blur",function(){E.shared.$f_el=null,G(E)},!0)},registerPopup:function(ee){var te=E.popups.get(ee),ne=z(ee);W(te.find(".fr-buttons")),E.events.$on(te,"mouseenter","tabIndex",ne._tiMouseenter,!0),E.events.$on(te.children().not(".fr-buttons"),"keydown","[tabIndex]",ne._tiKeydown,!0),E.popups.onHide(ee,function(){A(te.data("instance")||E)}),E.popups.onShow(ee,function(){J=!1,setTimeout(function(){J=!0},0)})},registerToolbar:W,focusToolbarElement:v,focusToolbar:S,focusContent:C,focusPopup:function(ee){var te=ee.children().not(".fr-buttons");te.data("mouseenter-event-set")||(E.events.$on(te,"mouseenter","[tabIndex]",function(ne){var oe=ee.data("instance")||E;if(!J)return ne.stopPropagation(),void ne.preventDefault();var ie=te.find(":focus:first");ie.length&&!ie.is("input, button, textarea")&&(oe.events.disableBlur(),ie.blur(),oe.events.disableBlur(),oe.events.focus())}),te.data("mouseenter-event-set",!0)),!C(te)&&E.shared.with_kb&&S(ee.find(".fr-buttons"))},focusModal:function(ee){E.core.hasFocus()||(E.events.disableBlur(),E.events.focus()),E.accessibility.saveSelection(),E.events.disableBlur(),E.$el.blur(),E.selection.clear(),E.events.disableBlur(),E.shared.with_kb?ee.find(".fr-command[tabIndex]:first").focus():ee.find("[tabIndex]:first").focus()},focusEditor:K,focusPopupButton:X,focusModalButton:function(ee){var te=ee.data("modal-button");te&&setTimeout(function(){v(te),ee.data("modal-button",null)},0)},hasFocus:function(){return null!=E.shared.$f_el},exec:function(ee,te){var ne=-1==navigator.userAgent.indexOf("Mac OS X")?ee.ctrlKey:ee.metaKey,oe=ee.which,ie=!1;return oe!=o.FE.KEYCODE.TAB||ne||ee.shiftKey||ee.altKey?oe!=o.FE.KEYCODE.ARROW_RIGHT||ne||ee.shiftKey||ee.altKey?oe!=o.FE.KEYCODE.TAB||ne||!ee.shiftKey||ee.altKey?oe!=o.FE.KEYCODE.ARROW_LEFT||ne||ee.shiftKey||ee.altKey?oe!=o.FE.KEYCODE.ARROW_UP||ne||ee.shiftKey||ee.altKey?oe!=o.FE.KEYCODE.ARROW_DOWN||ne||ee.shiftKey||ee.altKey?oe!=o.FE.KEYCODE.ENTER||ne||ee.shiftKey||ee.altKey?oe!=o.FE.KEYCODE.ESC||ne||ee.shiftKey||ee.altKey?oe==o.FE.KEYCODE.F10&&!ne&&!ee.shiftKey&&ee.altKey&&(ie=F()):ie=H(te):ie=P():ie=B():ie=I():ie=R(te):ie=R(te,!0):ie=M(te):ie=M(te,!0),E.shared.$f_el||void 0!==ie||(ie=!0),!ie&&E.keys.isBrowserAction(ee)&&(ie=!0),!!ie||(ee.preventDefault(),ee.stopPropagation(),!1)},saveSelection:N,restoreSelection:A}},o.FE.MODULES.format=function(E){function v(I,P){var K="<"+I;for(var H in P)P.hasOwnProperty(H)&&(K+=" "+H+"=\""+P[H]+"\"");return K+=">",K}function S(I){return"</"+I+">"}function T(I,P){var K=I;for(var H in P)P.hasOwnProperty(H)&&(I+="id"==H?"#"+P[H]:"class"==H?"."+P[H]:"["+H+"=\""+P[H]+"\"]");return K}function C(I,P){return I&&I.nodeType==Node.ELEMENT_NODE&&(I.matches||I.matchesSelector||I.msMatchesSelector||I.mozMatchesSelector||I.webkitMatchesSelector||I.oMatchesSelector).call(I,P)}function N(I,P,K){if(I){if(E.node.isBlock(I))return N(I.firstChild,P,K),!1;for(var H=o(v(P,K)).insertBefore(I),U=I,W;U&&!o(U).is(".fr-marker")&&0==o(U).find(".fr-marker").length;)W=U,U=U.nextSibling,H.append(W);if(!U){for(var Y=H.get(0).parentNode;Y&&!Y.nextSibling&&!E.node.isElement(Y);)Y=Y.parentNode;if(Y){var z=Y.nextSibling;z&&(E.node.isBlock(z)?N(z.firstChild,P,K):N(z,P,K))}}else o(U).find(".fr-marker").length&&N(U.firstChild,P,K);H.is(":empty")&&H.remove()}}function A(I,P){if("undefined"==typeof P&&(P={}),P.style&&delete P.style,E.selection.isCollapsed()){E.markers.insert();var K=E.$el.find(".fr-marker");K.replaceWith(v(I,P)+o.FE.INVISIBLE_SPACE+o.FE.MARKERS+S(I)),E.selection.restore()}else{E.selection.save();var H=E.$el.find(".fr-marker[data-type=\"true\"]").get(0).nextSibling;N(H,I,P);var U;do U=E.$el.find(T(I,P)+" > "+T(I,P)),U.each(function(){o(this).replaceWith(this.innerHTML)});while(U.length);E.el.normalize();for(var W=E.el.querySelectorAll(".fr-marker"),Y=0,z;Y<W.length;Y++)z=o(W[Y]),!0==z.data("type")?C(z.get(0).nextSibling,T(I,P))&&z.next().prepend(z):C(z.get(0).previousSibling,T(I,P))&&z.prev().append(z);E.selection.restore()}}function O(I,P,K,H){if(!H){var U=!1;if(!0===I.data("type"))for(;E.node.isFirstSibling(I.get(0))&&!I.parent().is(E.$el);)I.parent().before(I),U=!0;else if(!1===I.data("type"))for(;E.node.isLastSibling(I.get(0))&&!I.parent().is(E.$el);)I.parent().after(I),U=!0;if(U)return!0}if(I.parents(P).length||"undefined"==typeof P){var W="",Y="",z=I.parent();if(z.is(E.$el)||E.node.isBlock(z.get(0)))return!1;for(;"undefined"==typeof P&&!E.node.isBlock(z.parent().get(0))||"undefined"!=typeof P&&!C(z.get(0),T(P,K));)W+=E.node.closeTagString(z.get(0)),Y=E.node.openTagString(z.get(0))+Y,z=z.parent();var X=I.get(0).outerHTML;I.replaceWith("<span id=\"mark\"></span>");var q=z.html().replace(/<span id="mark"><\/span>/,W+E.node.closeTagString(z.get(0))+Y+X+W+E.node.openTagString(z.get(0))+Y);return z.replaceWith(E.node.openTagString(z.get(0))+q+E.node.closeTagString(z.get(0))),!0}return!1}function _(I,P,K,H){for(var U=E.node.contents(I.get(0)),W=0,Y;W<U.length;W++)Y=U[W],E.node.hasClass(Y,"fr-marker")?P=(P+1)%2:P?0<o(Y).find(".fr-marker").length?P=_(o(Y),P,K,H):(o(o(Y).find(K||"*").get().reverse()).each(function(){E.node.isBlock(this)||E.node.isVoid(this)||o(this).replaceWith(this.innerHTML)}),("undefined"!=typeof K||Y.nodeType!=Node.ELEMENT_NODE||E.node.isVoid(Y)||E.node.isBlock(Y))&&!C(Y,T(K,H))?"undefined"==typeof K&&Y.nodeType==Node.ELEMENT_NODE&&E.node.isBlock(Y)&&E.node.clearAttributes(Y):o(Y).replaceWith(Y.innerHTML)):0<o(Y).find(".fr-marker").length&&(P=_(o(Y),P,K,H));return P}function F(I,P){"undefined"==typeof P&&(P={}),P.style&&delete P.style;var K=E.selection.isCollapsed();E.selection.save();for(var H=!0;H;){H=!1;for(var U=E.$el.find(".fr-marker"),W=0;W<U.length;W++)if(O(o(U[W]),I,P,K)){H=!0;break}}_(E.$el,0,I,P),K&&E.$el.find(".fr-marker").before(o.FE.INVISIBLE_SPACE).after(o.FE.INVISIBLE_SPACE),E.html.cleanEmptyTags(),E.el.normalize(),E.selection.restore()}function D(I,P){var K=o(I);K.css(P,""),""===K.attr("style")&&K.replaceWith(K.html())}function M(I,P){return 0===o(I).attr("style").indexOf(P+":")||0<=o(I).attr("style").indexOf(";"+P+":")||0<=o(I).attr("style").indexOf("; "+P+":")}function R(I,P){if(E.selection.isCollapsed()){E.markers.insert();var K=E.$el.find(".fr-marker"),H=K.parent();if(!(E.node.openTagString(H.get(0))=="<span style=\""+I+": "+H.css(I)+";\">"))E.node.isEmpty(H.get(0))&&H.is("span")?(K.replaceWith(o.FE.MARKERS),H.css(I,P)):K.replaceWith("<span style=\""+I+": "+P+";\">"+o.FE.INVISIBLE_SPACE+o.FE.MARKERS+"</span>");else if(E.node.isEmpty(H.get(0)))H.replaceWith("<span style=\""+I+": "+P+";\">"+o.FE.INVISIBLE_SPACE+o.FE.MARKERS+"</span>");else{var U={};U[I]=P,O(K,"span",U,!0),K=E.$el.find(".fr-marker"),K.replaceWith("<span style=\""+I+": "+P+";\">"+o.FE.INVISIBLE_SPACE+o.FE.MARKERS+"</span>")}E.selection.restore()}else{E.selection.save();for(var W=E.$el.find(".fr-marker"),Y=0,K;Y<W.length;Y++)if(K=o(W[Y]),!0===K.data("type"))for(;E.node.isFirstSibling(K.get(0))&&!K.parent().is(E.$el);)K.parent().before(K);else for(;E.node.isLastSibling(K.get(0))&&!K.parent().is(E.$el);)K.parent().after(K);var z=E.$el.find(".fr-marker[data-type=\"true\"]").get(0).nextSibling,X={"class":"fr-unprocessed"};for(P&&(X.style=I+": "+P+";"),N(z,"span",X),E.$el.find(".fr-marker + .fr-unprocessed").each(function(){o(this).prepend(o(this).prev())}),E.$el.find(".fr-unprocessed + .fr-marker").each(function(){o(this).prev().append(this)});0<E.$el.find("span.fr-unprocessed").length;){var q=E.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(q.parent().get(0).normalize(),q.parent().is("span")&&1==q.parent().get(0).childNodes.length){q.parent().css(I,P);var V=q;q=q.parent(),V.replaceWith(V.html())}for(var G=q.find("span"),Y=G.length-1;0<=Y;Y--)D(G[Y],I);var Q=q.parentsUntil(E.$el,"span[style]").filter(function(){return M(this,I)});if(Q.length){var Z="",J="",ee="",te="",ne=q.get(0);do ne=ne.parentNode,o(ne).addClass("fr-split"),Z+=E.node.closeTagString(ne),J=E.node.openTagString(o(ne).clone().addClass("fr-split").get(0))+J,Q.get(0)!=ne&&(ee+=E.node.closeTagString(ne),te=E.node.openTagString(o(ne).clone().addClass("fr-split").get(0))+te);while(Q.get(0)!=ne);var oe=Z+E.node.openTagString(o(Q.get(0)).clone().css(I,P||"").get(0))+te+q.css(I,"").get(0).outerHTML+ee+"</span>"+J;q.replaceWith("<span id=\"fr-break\"></span>");var ie=Q.get(0).outerHTML;o(Q.get(0)).replaceWith(ie.replace(/<span id="fr-break"><\/span>/g,oe))}}for(;0<E.$el.find(".fr-split:empty").length;)E.$el.find(".fr-split:empty").remove();E.$el.find(".fr-split").removeClass("fr-split"),E.$el.find("span[style=\"\"]").removeAttr("style"),E.$el.find("span[class=\"\"]").removeAttr("class"),E.html.cleanEmptyTags(),o(E.$el.find("span").get().reverse()).each(function(){this.attributes&&0!=this.attributes.length||o(this).replaceWith(this.innerHTML)}),E.el.normalize();var se=E.$el.find("span[style] + span[style]");for(Y=0;Y<se.length;Y++){var ae=o(se[Y]),le=o(se[Y]).prev();ae.get(0).previousSibling==le.get(0)&&E.node.openTagString(ae.get(0))==E.node.openTagString(le.get(0))&&(ae.prepend(le.html()),le.remove())}E.el.normalize(),E.selection.restore()}}function B(I,P){"undefined"==typeof P&&(P={}),P.style&&delete P.style;var K=E.selection.ranges(0),H=K.startContainer;H.nodeType==Node.ELEMENT_NODE&&0<H.childNodes.length&&H.childNodes[K.startOffset]&&(H=H.childNodes[K.startOffset]);for(var U=H;U&&U.nodeType==Node.ELEMENT_NODE&&!C(U,T(I,P));)U=U.firstChild;if(U&&U.nodeType==Node.ELEMENT_NODE&&C(U,T(I,P)))return!0;var W=H;for(W&&W.nodeType!=Node.ELEMENT_NODE&&(W=W.parentNode);W&&W.nodeType==Node.ELEMENT_NODE&&W!=E.el&&!C(W,T(I,P));)W=W.parentNode;return W&&W.nodeType==Node.ELEMENT_NODE&&W!=E.el&&C(W,T(I,P))}return{is:B,toggle:function(I,P){B(I,P)?F(I,P):A(I,P)},apply:A,remove:F,applyStyle:R,removeStyle:function(I){R(I,null)}}},o.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(E){var v=this.format.is("strong");E.toggleClass("fr-active",v).attr("aria-pressed",v)}},italic:{title:"Italic",toggle:!0,refresh:function(E){var v=this.format.is("em");E.toggleClass("fr-active",v).attr("aria-pressed",v)}},underline:{title:"Underline",toggle:!0,refresh:function(E){var v=this.format.is("u");E.toggleClass("fr-active",v).attr("aria-pressed",v)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(E){var v=this.format.is("s");E.toggleClass("fr-active",v).attr("aria-pressed",v)}},subscript:{title:"Subscript",toggle:!0,refresh:function(E){var v=this.format.is("sub");E.toggleClass("fr-active",v).attr("aria-pressed",v)}},superscript:{title:"Superscript",toggle:!0,refresh:function(E){var v=this.format.is("sup");E.toggleClass("fr-active",v).attr("aria-pressed",v)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},o.FE.RegisterCommand=function(E,v){o.FE.COMMANDS[E]=v},o.FE.MODULES.commands=function(E){function v(F,w){if(!1!==E.events.trigger("commands.before",o.merge([F],w||[]))){var D=o.FE.COMMANDS[F]&&o.FE.COMMANDS[F].callback||A[F],M=!0,R=!1;o.FE.COMMANDS[F]&&("undefined"!=typeof o.FE.COMMANDS[F].focus&&(M=o.FE.COMMANDS[F].focus),"undefined"!=typeof o.FE.COMMANDS[F].accessibilityFocus&&(R=o.FE.COMMANDS[F].accessibilityFocus)),(!E.core.hasFocus()&&M&&!E.popups.areVisible()||!E.core.hasFocus()&&R&&E.accessibility.hasFocus())&&E.events.focus(!0),o.FE.COMMANDS[F]&&!1!==o.FE.COMMANDS[F].undo&&(E.$el.find(".fr-marker").length&&(E.events.disableBlur(),E.selection.restore()),E.undo.saveStep()),D&&D.apply(E,o.merge([F],w||[])),E.events.trigger("commands.after",o.merge([F],w||[])),o.FE.COMMANDS[F]&&!1!==o.FE.COMMANDS[F].undo&&E.undo.saveStep()}}function S(F,w){E.format.toggle(w)}function T(F){E.selection.save(),E.html.wrap(!0,!0,!0,!0),E.selection.restore();for(var w=E.selection.blocks(),D=0;D<w.length;D++)if("LI"!=w[D].tagName&&"LI"!=w[D].parentNode.tagName){var M=o(w[D]),R="rtl"==E.opts.direction||"rtl"==M.css("direction")?"margin-right":"margin-left",L=E.helpers.getPX(M.css(R));M.css(R,Math.max(L+20*F,0)||""),M.removeClass("fr-temp-div")}E.selection.save(),E.html.unwrap(),E.selection.restore()}function C(F){return function(){v(F)}}var A={bold:function(){E.format.removeStyle("font-weight"),S("bold","strong")},subscript:function(){S("subscript","sub")},superscript:function(){S("superscript","sup")},italic:function(){S("italic","em")},strikeThrough:function(){S("strikeThrough","s")},underline:function(){S("underline","u")},undo:function(){E.undo.run()},redo:function(){E.undo.redo()},indent:function(){T(1)},outdent:function(){T(-1)},show:function(){E.opts.toolbarInline&&E.toolbar.showInline(null,!0)},insertHR:function(){E.selection.remove();var F="";E.core.isEmpty()&&(F="<br>",E.html.defaultTag()&&(F="<"+E.html.defaultTag()+">"+F+"</"+E.html.defaultTag()+">")),E.html.insert("<hr id=\"fr-just\">"+F);var w=E.$el.find("hr#fr-just");w.removeAttr("id"),E.selection.setAfter(w.get(0),!1)||E.selection.setBefore(w.get(0),!1),E.selection.restore()},clearFormatting:function(){E.format.remove()},selectAll:function(){E.doc.execCommand("selectAll",!1,!1)}},O={};for(var _ in A)A.hasOwnProperty(_)&&(O[_]=C(_));return o.extend(O,{exec:v,_init:function(){E.events.on("keydown",function(F){var w=E.selection.element();if(w&&"HR"==w.tagName&&!E.keys.isArrow(F.which))return F.preventDefault(),!1}),E.events.on("keyup",function(F){var w=E.selection.element();if(w&&"HR"==w.tagName)if(F.which==o.FE.KEYCODE.ARROW_LEFT||F.which==o.FE.KEYCODE.ARROW_UP){if(w.previousSibling)return E.node.isBlock(w.previousSibling)?E.selection.setAtEnd(w.previousSibling):o(w).before(o.FE.MARKERS),E.selection.restore(),!1;}else if((F.which==o.FE.KEYCODE.ARROW_RIGHT||F.which==o.FE.KEYCODE.ARROW_DOWN)&&w.nextSibling)return E.node.isBlock(w.nextSibling)?E.selection.setAtStart(w.nextSibling):o(w).after(o.FE.MARKERS),E.selection.restore(),!1}),E.events.on("mousedown",function(F){if(F.target&&"HR"==F.target.tagName)return F.preventDefault(),F.stopPropagation(),!1}),E.events.on("mouseup",function(){var w=E.selection.element(),D=E.selection.endElement();w==D&&w&&"HR"==w.tagName&&(w.nextSibling&&(E.node.isBlock(w.nextSibling)?E.selection.setAtStart(w.nextSibling):o(w).after(o.FE.MARKERS)),E.selection.restore())})}})},o.FE.MODULES.data=function(E){function v(L){return L}function T(L){for(var B=L.toString(),I=0,P=0;P<B.length;P++)I+=parseInt(B.charAt(P),10);return 10<I?I%9+1:I}function C(L,B,I){for(var P=Math.abs(I);0<P--;)L-=B;return 0>I&&(L+=123),L}function N(L){return L&&"none"==L.css("display")&&(L.remove(),!0)}function A(){return N(F)||N(w)}function O(){return!!E.$box&&(E.$box.append(R(v(R("kTDD4spmKD1klaMB1C7A5RA1G3RA10YA5qhrjuvnmE1D3FD2bcG-7noHE6B2JB4C3xXA8WF6F-10RG2C3G3B-21zZE3C3H3xCA16NC4DC1f1hOF1MB3B-21whzQH5UA2WB10kc1C2F4D3XC2YD4D1C4F3GF2eJ2lfcD-13HF1IE1TC11TC7WE4TA4d1A2YA6XA4d1A3yCG2qmB-13GF4A1B1KH1HD2fzfbeQC3TD9VE4wd1H2A20A2B-22ujB3nBG2A13jBC10D3C2HD5D1H1KB11uD-16uWF2D4A3F-7C9D-17c1E4D4B3d1D2CA6B2B-13qlwzJF2NC2C-13E-11ND1A3xqUA8UE6bsrrF-7C-22ia1D2CF2H1E2akCD2OE1HH1dlKA6PA5jcyfzB-22cXB4f1C3qvdiC4gjGG2H2gklC3D-16wJC1UG4dgaWE2D5G4g1I2H3B7vkqrxH1H2EC9C3E4gdgzKF1OA1A5PF5C4WWC3VA6XA4e1E3YA2YA5HE4oGH4F2H2IB10D3D2NC5G1B1qWA9PD6PG5fQA13A10XA4C4A3e1H2BA17kC-22cmOB1lmoA2fyhcptwWA3RA8A-13xB-11nf1I3f1B7GB3aD3pavFC10D5gLF2OG1LSB2D9E7fQC1F4F3wpSB5XD3NkklhhaE-11naKA9BnIA6D1F5bQA3A10c1QC6Kjkvitc2B6BE3AF3E2DA6A4JD2IC1jgA-64MB11D6C4==")))),F=E.$box.find("> div:last"),w=F.find("> a"),void("rtl"==E.opts.direction&&F.css("left","auto").css("right",0)))}var M=function(){for(var L=0,B=document.domain,I=B.split("."),P="_gd"+new Date().getTime();L<I.length-1&&-1==document.cookie.indexOf(P+"="+P);)B=I.slice(-1-++L).join("."),document.cookie=P+"="+P+";domain="+B+";";return document.cookie=P+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+B+";",(B||"").replace(/(^\.*)|(\.*$)/g,"")}(),R=v(function(L){if(!L)return L;for(var B="",I=v("charCodeAt"),P=v("fromCharCode"),K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".indexOf(L[0]),H=1;H<L.length-2;H++){for(var U=T(++K),W=L[I](H),Y="";/[0-9-]/.test(L[H+1]);)Y+=L[++H];Y=parseInt(Y,10)||0,W=C(W,U,Y),W^=31&K-1,B+=String[P](W)}return B}),F,w;return{_init:function(){var L=E.opts.key||[""];"string"==typeof L&&(L=[L]),E.ul=!0;for(var B=0,I;B<L.length;B++)if(I=R(L[B])||"",!(I!==R(v(R("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&0>I.indexOf(M,I.length-M.length)&&0>[R("9qqG-7amjlwq=="),R("KA3B3C2A6D1D5H5H1A3=="),R("QzbzvxyB2yA-9m=="),R("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(M))){E.ul=!1;break}!0===E.ul&&O(),E.events.on("contentChanged",function(){!0===E.ul&&A()&&O()}),E.events.on("destroy",function(){F&&F.length&&F.remove()},!0)}}},o.extend(o.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowLocalImages:!1}),o.FE.MODULES.paste=function(E){function v(L){o.FE.copied_html=E.html.getSelected(),o.FE.copied_text=o("<div>").html(o.FE.copied_html).text(),"cut"==L.type&&(E.undo.saveStep(),setTimeout(function(){E.selection.save(),E.html.wrap(),E.selection.restore(),E.events.focus(),E.undo.saveStep()},0))}function S(L){if(R)return!1;if(L.originalEvent&&(L=L.originalEvent),!1===E.events.trigger("paste.before",[L]))return L.preventDefault(),!1;if(w=E.$win.scrollTop(),L&&L.clipboardData&&L.clipboardData.getData){var B="",I=L.clipboardData.types;if(E.helpers.isArray(I))for(var P=0;P<I.length;P++)B+=I[P]+";";else B=I;if(D="",/text\/html/.test(B)?D=L.clipboardData.getData("text/html"):/text\/rtf/.test(B)&&E.browser.safari?D=L.clipboardData.getData("text/rtf"):/text\/plain/.test(B)&&!this.browser.mozilla&&(D=E.html.escapeEntities(L.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==D)return A(),L.preventDefault&&(L.stopPropagation(),L.preventDefault()),!1;D=null}T()}function T(){E.selection.save(),E.events.disableBlur(),D=null,M?M.html(""):(M=o("<div contenteditable=\"true\" style=\"position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 9999; line-height: 140%;\" tabIndex=\"-1\"></div>"),E.$box.after(M),E.events.on("destroy",function(){M.remove()})),M.focus(),E.win.setTimeout(A,1)}function C(L){L=L.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>"),L=L.replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>"),L=L.replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>"),L=L.replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>"),L=L.replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),L=L.replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),L=L.replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),L=L.replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>"),L=L.replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>"),L=L.replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span"),L=L.replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,""),L=L.replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,""),L=L.replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," "),L=L.replace(/<!--[\s\S]*?-->/gi,""),L=L.replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");for(var B=["style","script","applet","embed","noframes","noscript"],I=0,P;I<B.length;I++)P=new RegExp("<"+B[I]+".*?"+B[I]+"(.*?)>","gi"),L=L.replace(P,"");L=L.replace(/&nbsp;/gi," "),L=L.replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>"),L=L.replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");var K;do K=L,L=L.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"");while(L!=K);L=L.replace(/<lilevel([^1])([^>]*)>/gi,"<li data-indent=\"true\"$2>"),L=L.replace(/<lilevel1([^>]*)>/gi,"<li$1>"),L=E.clean.html(L,E.opts.pasteDeniedTags,E.opts.pasteDeniedAttrs),L=L.replace(/<a>(.[^<]+)<\/a>/gi,"$1"),L=L.replace(/<br> */g,"<br>");var H=E.o_doc.createElement("div");H.innerHTML=L;for(var U=H.querySelectorAll("li[data-indent]"),I=0;I<U.length;I++){var W=U[I],Y=W.previousElementSibling;if(Y&&"LI"==Y.tagName){var z=Y.querySelector(":scope > ul, :scope > ol");z||(z=document.createElement("ul"),Y.appendChild(z)),z.appendChild(W)}else W.removeAttribute("data-indent")}return E.html.cleanBlankSpaces(H),L=H.innerHTML,L}function N(L){var B=E.doc.createElement("div");B.innerHTML=L;for(var I=B.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote"),P=0,K;P<I.length;P++)K=I[P],K.outerHTML="<"+(E.html.defaultTag()||"DIV")+">"+K.innerHTML+"</"+(E.html.defaultTag()||"DIV")+">";I=B.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")");for(var P=I.length-1,K;0<=P;P--)K=I[P],K.outerHTML=K.innerHTML;var H=function(U){for(var W=E.node.contents(U),Y=0;Y<W.length;Y++)W[Y].nodeType!=Node.TEXT_NODE&&W[Y].nodeType!=Node.ELEMENT_NODE?W[Y].parentNode.removeChild(W[Y]):H(W[Y])};return H(B),B.innerHTML}function A(){E.keys.forceUndo();var L=E.snapshot.get();null===D&&(D=M.get(0).innerHTML,E.selection.restore(),E.events.enableBlur());var B=E.events.chainTrigger("paste.beforeCleanup",D);"string"==typeof B&&(D=B);var I=!1;D.match(/(class=\"?Mso|class=\'?Mso|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi)&&(I=!0),0<=D.indexOf("<body")&&(D=D.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)\s]*<\/body>[.\s\S\w\W<>]*/g,"$1"),D=D.replace(/([^>])\n([^<])/g,"$1 $2"));var P=!1;if(0<=D.indexOf("id=\"docs-internal-guid")&&(D=D.replace(/^.* id="docs-internal-guid[^>]*>(.*)<\/b>.*$/,"$1"),P=!0),I)D=D.replace(/^\n*/g,"").replace(/^ /g,""),0===D.indexOf("<colgroup>")&&(D="<table>"+D+"</table>"),D=C(D),D=_(D);else{E.opts.htmlAllowComments=!1,D=E.clean.html(D,E.opts.pasteDeniedTags,E.opts.pasteDeniedAttrs),E.opts.htmlAllowComments=!0,D=_(D),D=D.replace(/\r|\n|\t/g,"");var K=E.doc.createElement("div");K.innerHTML=D,o.FE.copied_text&&K.textContent.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==o.FE.copied_text.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")&&(D=o.FE.copied_html),D=D.replace(/^ */g,"").replace(/ *$/g,"")}if(E.opts.pastePlain&&(D=N(D)),B=E.events.chainTrigger("paste.afterCleanup",D),"string"==typeof B&&(D=B),""!==D){var H=E.o_doc.createElement("div");H.innerHTML=D,E.spaces.normalize(H);for(var U=H.getElementsByTagName("span"),W=0,Y;W<U.length;W++)Y=U[W],0===Y.attributes.length&&(Y.outerHTML=Y.innerHTML);var z=H.children;if(1==z.length&&0<=["OL","UL"].indexOf(z[0].tagName)&&(z[0].outerHTML=z[0].innerHTML),!P)for(var X=H.getElementsByTagName("br"),W=0,q;W<X.length;W++)q=X[W],E.node.isBlock(q.previousSibling)&&q.parentNode.removeChild(q);if(E.opts.enter==o.FE.ENTER_BR)for(var V=H.querySelectorAll("p, div"),W=0,G;W<V.length;W++)G=V[W],G.outerHTML=G.innerHTML+(G.nextSibling&&!E.node.isEmpty(G)?"<br>":"");else if(E.opts.enter==o.FE.ENTER_DIV)for(var V=H.getElementsByTagName("p"),W=0,G;W<V.length;W++)G=V[W],G.outerHTML="<div>"+G.innerHTML+"</div>";D=H.innerHTML,E.html.insert(D,!0)}O(),E.undo.saveStep(L),E.undo.saveStep()}function O(){E.events.trigger("paste.after")}function _(L){var B=E.o_doc.createElement("div");B.innerHTML=L;for(var I=B.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)");I.length;){for(var P=0;P<I.length;P++)I[P].parentNode.removeChild(I[P]);I=B.querySelectorAll("*:empty:not(br):not(img):not(td):not(th)")}for(var K=B.querySelectorAll(":scope > div:not([style]), td > div, th > div, li > div"),H;K.length;){if(H=K[K.length-1],E.html.defaultTag()&&"div"!=E.html.defaultTag())H.outerHTML=H.querySelector(E.html.blockTagsQuery())?H.innerHTML:"<"+E.html.defaultTag()+">"+H.innerHTML+"</"+E.html.defaultTag()+">";else{var U=H.querySelectorAll("*");H.outerHTML=U.length&&"BR"===U[U.length-1].tagName?H.innerHTML:H.innerHTML+"<br>"}K=B.querySelectorAll(":scope > div:not([style]), td > div, th > div, li > div")}for(K=B.querySelectorAll("div:not([style])");K.length;){for(P=0;P<K.length;P++){var W=K[P],Y=W.innerHTML.replace(/\u0009/gi,"").trim();W.outerHTML=Y}K=B.querySelectorAll("div:not([style])")}return B.innerHTML}var w,D,M,R=!1;return{_init:function(){E.events.on("copy",v),E.events.on("cut",v),E.events.on("paste",S),E.browser.msie&&11>E.browser.version&&(E.events.on("mouseup",function(L){2==L.button&&(setTimeout(function(){R=!1},50),R=!0)},!0),E.events.on("beforepaste",S))}}},o.extend(o.FE.DEFAULTS,{shortcutsEnabled:["show","bold","italic","underline","strikeThrough","indent","outdent","undo","redo"],shortcutsHint:!0}),o.FE.SHORTCUTS_MAP={},o.FE.RegisterShortcut=function(E,v,S,T,C,N){o.FE.SHORTCUTS_MAP[(C?"^":"")+(N?"@":"")+E]={cmd:v,val:S,letter:T,shift:C,option:N},o.FE.DEFAULTS.shortcutsEnabled.push(v)},o.FE.RegisterShortcut(o.FE.KEYCODE.E,"show",null,"E",!1,!1),o.FE.RegisterShortcut(o.FE.KEYCODE.B,"bold",null,"B",!1,!1),o.FE.RegisterShortcut(o.FE.KEYCODE.I,"italic",null,"I",!1,!1),o.FE.RegisterShortcut(o.FE.KEYCODE.U,"underline",null,"U",!1,!1),o.FE.RegisterShortcut(o.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),o.FE.RegisterShortcut(o.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),o.FE.RegisterShortcut(o.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),o.FE.RegisterShortcut(o.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),o.FE.RegisterShortcut(o.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),o.FE.MODULES.shortcuts=function(E){function S(A){if(!E.core.hasFocus())return!0;var O=A.which,_=-1==navigator.userAgent.indexOf("Mac OS X")?A.ctrlKey:A.metaKey;if("keyup"==A.type&&N&&O!=o.FE.KEYCODE.META)return N=!1,!1;"keydown"==A.type&&(N=!1);var F=(A.shiftKey?"^":"")+(A.altKey?"@":"")+O;if(_&&o.FE.SHORTCUTS_MAP[F]){var w=o.FE.SHORTCUTS_MAP[F].cmd;if(w&&0<=E.opts.shortcutsEnabled.indexOf(w)){var D=o.FE.SHORTCUTS_MAP[F].val,M;if(w&&!D?M=E.$tb.find(".fr-command[data-cmd=\""+w+"\"]"):w&&D&&(M=E.$tb.find(".fr-command[data-cmd=\""+w+"\"][data-param1=\""+D+"\"]")),M.length)return A.preventDefault(),A.stopPropagation(),M.parents(".fr-toolbar").data("instance",E),"keydown"==A.type&&(E.button.exec(M),N=!0),!1;if(w&&E.commands[w])return A.preventDefault(),A.stopPropagation(),"keydown"==A.type&&(E.commands[w](),N=!0),!1}}}var C=null,N=!1;return{_init:function(){E.events.on("keydown",S,!0),E.events.on("keyup",S,!0)},get:function(A){if(!E.opts.shortcutsHint)return null;if(!C)for(var O in C={},o.FE.SHORTCUTS_MAP)o.FE.SHORTCUTS_MAP.hasOwnProperty(O)&&0<=E.opts.shortcutsEnabled.indexOf(o.FE.SHORTCUTS_MAP[O].cmd)&&(C[o.FE.SHORTCUTS_MAP[O].cmd+"."+(o.FE.SHORTCUTS_MAP[O].val||"")]={shift:o.FE.SHORTCUTS_MAP[O].shift,option:o.FE.SHORTCUTS_MAP[O].option,letter:o.FE.SHORTCUTS_MAP[O].letter});var _=C[A];return _?(E.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(_.shift?E.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(_.option?E.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+_.letter:null}}},o.FE.MODULES.snapshot=function(E){function v(w){for(var D=w.parentNode.childNodes,M=0,R=null,L=0;L<D.length;L++){if(R){var B=D[L].nodeType===Node.TEXT_NODE&&""===D[L].textContent,I=R.nodeType===Node.TEXT_NODE&&D[L].nodeType===Node.TEXT_NODE;B||I||M++}if(D[L]==w)return M;R=D[L]}}function S(w){var D=[];if(!w.parentNode)return[];for(;!E.node.isElement(w);)D.push(v(w)),w=w.parentNode;return D.reverse()}function T(w,D){for(;w&&w.nodeType===Node.TEXT_NODE;){var M=w.previousSibling;M&&M.nodeType==Node.TEXT_NODE&&(D+=M.textContent.length),w=M}return D}function C(w){return{scLoc:S(w.startContainer),scOffset:T(w.startContainer,w.startOffset),ecLoc:S(w.endContainer),ecOffset:T(w.endContainer,w.endOffset)}}function A(w){for(var D=E.el,M=0;M<w.length;M++)D=D.childNodes[w[M]];return D}function O(w,D){try{var M=A(D.scLoc),R=D.scOffset,L=A(D.ecLoc),B=D.ecOffset,I=E.doc.createRange();I.setStart(M,R),I.setEnd(L,B),w.addRange(I)}catch(P){console.warn(P)}}return{get:function(){var w={};if(E.events.trigger("snapshot.before"),w.html=(E.$wp?E.$el.html():E.$oel.get(0).outerHTML).replace(/ style=""/g,""),w.ranges=[],E.$wp&&E.selection.inEditor()&&E.core.hasFocus())for(var D=E.selection.ranges(),M=0;M<D.length;M++)w.ranges.push(C(D[M]));return E.events.trigger("snapshot.after"),w},restore:function(w){E.$el.html()!=w.html&&E.$el.html(w.html);var D=E.selection.get();E.selection.clear(),E.events.focus(!0);for(var M=0;M<w.ranges.length;M++)O(D,w.ranges[M])},equal:function(w,D){return!(w.html!=D.html)&&(E.core.hasFocus()&&JSON.stringify(w.ranges)!=JSON.stringify(D.ranges)?!1:!0)}}},o.FE.MODULES.undo=function(E){function v(M){var R=M.which,L=E.keys.ctrlKey(M);L&&(90==R&&M.shiftKey&&M.preventDefault(),90==R&&M.preventDefault())}function N(){if(!E.undo_stack||E.undoing)return!1;for(;E.undo_stack.length>E.undo_index;)E.undo_stack.pop()}function _(){E.undo_index=0,E.undo_stack=[]}function F(){E.undo_stack=[]}var D=null;return{_init:function(){_(),E.events.on("initialized",function(){D=(E.$wp?E.$el.html():E.$oel.get(0).outerHTML).replace(/ style=""/g,"")}),E.events.on("blur",function(){E.el.querySelector(".fr-dragging")||E.undo.saveStep()}),E.events.on("keydown",v),E.events.on("destroy",F)},run:function(){if(1<E.undo_index){E.undoing=!0;var M=E.undo_stack[--E.undo_index-1];clearTimeout(E._content_changed_timer),E.snapshot.restore(M),D=M.html,E.popups.hideAll(),E.toolbar.enable(),E.events.trigger("contentChanged"),E.events.trigger("commands.undo"),E.undoing=!1}},redo:function(){if(E.undo_index<E.undo_stack.length){E.undoing=!0;var M=E.undo_stack[E.undo_index++];clearTimeout(E._content_changed_timer),E.snapshot.restore(M),D=M.html,E.popups.hideAll(),E.toolbar.enable(),E.events.trigger("contentChanged"),E.events.trigger("commands.redo"),E.undoing=!1}},canDo:function(){return 0===E.undo_stack.length||1>=E.undo_index?!1:!0},canRedo:function(){return E.undo_index!=E.undo_stack.length},dropRedo:N,reset:_,saveStep:function(M){return!E.undo_stack||E.undoing||E.el.querySelector(".fr-marker")?!1:void("undefined"==typeof M?(M=E.snapshot.get(),(!E.undo_stack[E.undo_index-1]||!E.snapshot.equal(E.undo_stack[E.undo_index-1],M))&&(N(),E.undo_stack.push(M),E.undo_index++,M.html!=D&&(E.events.trigger("contentChanged"),D=M.html))):(N(),0<E.undo_index?E.undo_stack[E.undo_index-1]=M:(E.undo_stack.push(M),E.undo_index++)))}}},o.FE.ICON_DEFAULT_TEMPLATE="font_awesome",o.FE.ICON_TEMPLATES={font_awesome:"<i class=\"fa fa-[NAME]\" aria-hidden=\"true\"></i>",text:"<span style=\"text-align: center;\">[NAME]</span>",image:"<img src=[SRC] alt=[ALT] />",svg:"<svg viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">[PATH]</svg>"},o.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},o.FE.DefineIconTemplate=function(E,v){o.FE.ICON_TEMPLATES[E]=v},o.FE.DefineIcon=function(E,v){o.FE.ICONS[E]=v},o.FE.MODULES.icon=function(){return{create:function(T){var C=null,N=o.FE.ICONS[T];if("undefined"!=typeof N){var A=N.template||o.FE.ICON_DEFAULT_TEMPLATE;A&&(A=o.FE.ICON_TEMPLATES[A])&&(C=A.replace(/\[([a-zA-Z]*)\]/g,function(O,_){return"NAME"==_?N[_]||T:N[_]}))}return C||T},getTemplate:function(T){var C=o.FE.ICONS[T],N=o.FE.ICON_DEFAULT_TEMPLATE;if("undefined"!=typeof C){var N=C.template||o.FE.ICON_DEFAULT_TEMPLATE;return N}return N}}},o.extend(o.FE.DEFAULTS,{tooltips:!0}),o.FE.MODULES.tooltip=function(E){function v(){E.$tooltip&&E.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function S(N,A){if(N.data("title")||N.data("title",N.attr("title")),!N.data("title"))return!1;E.$tooltip||C(),N.removeAttr("title"),E.$tooltip.text(N.data("title")),E.$tooltip.addClass("fr-visible");var O=N.offset().left+(N.outerWidth()-E.$tooltip.outerWidth())/2;0>O&&(O=0),O+E.$tooltip.outerWidth()>o(E.o_win).width()&&(O=o(E.o_win).width()-E.$tooltip.outerWidth()),"undefined"==typeof A&&(A=E.opts.toolbarBottom);var _=A?N.offset().top-E.$tooltip.height():N.offset().top+N.outerHeight();E.$tooltip.css("position",""),E.$tooltip.css("left",O),E.$tooltip.css("top",Math.ceil(_)),"static"==o(E.o_doc).find("body").css("position")?(E.$tooltip.css("margin-left",""),E.$tooltip.css("margin-top","")):(E.$tooltip.css("margin-left",-o(E.o_doc).find("body").offset().left),E.$tooltip.css("margin-top",-o(E.o_doc).find("body").offset().top))}function C(){E.opts.tooltips&&!E.helpers.isMobile()&&(E.shared.$tooltip?E.$tooltip=E.shared.$tooltip:(E.shared.$tooltip=o("<div class=\"fr-tooltip\"></div>"),E.$tooltip=E.shared.$tooltip,E.opts.theme&&E.$tooltip.addClass(E.opts.theme+"-theme"),o(E.o_doc).find("body").append(E.$tooltip)),E.events.on("shared.destroy",function(){E.$tooltip.html("").removeData().remove(),E.$tooltip=null},!0))}return{hide:v,to:S,bind:function(N,A,O){E.opts.tooltips&&!E.helpers.isMobile()&&(E.events.$on(N,"mouseenter",A,function(_){E.node.hasClass(_.currentTarget,"fr-disabled")||E.edit.isDisabled()||S(o(_.currentTarget),O)},!0),E.events.$on(N,"mouseleave "+E._mousedown+" "+E._mouseup,A,function(){v()},!0))}}},o.FE.MODULES.button=function(E){function v(U){var W=U.next(),Y=E.node.hasClass(U.get(0),"fr-active"),z=E.helpers.isMobile(),X=o(".fr-dropdown.fr-active").not(U),q=U.parents(".fr-toolbar, .fr-popup").data("instance")||E;if(q.helpers.isIOS()&&!q.el.querySelector(".fr-marker")&&(q.selection.save(),q.selection.clear(),q.selection.restore()),!Y){var V=U.data("cmd");W.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),o.FE.COMMANDS[V]&&o.FE.COMMANDS[V].refreshOnShow&&o.FE.COMMANDS[V].refreshOnShow.apply(q,[U,W]),W.css("left",U.offset().left-U.parent().offset().left-("rtl"==E.opts.direction?W.width()-U.outerWidth():0)),E.opts.toolbarBottom?W.css("bottom",E.$tb.height()-U.position().top):W.css("top",U.position().top+U.outerHeight())}U.addClass("fr-blink").toggleClass("fr-active"),U.hasClass("fr-active")?(W.attr("aria-hidden",!1),U.attr("aria-expanded",!0)):(W.attr("aria-hidden",!0),U.attr("aria-expanded",!1)),setTimeout(function(){U.removeClass("fr-blink")},300),W.offset().left+W.outerWidth()>E.$sc.offset().left+E.$sc.outerWidth()&&W.css("margin-left",-(W.offset().left+W.outerWidth()-E.$sc.offset().left-E.$sc.outerWidth())),X.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),X.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!=U.parents(".fr-popup").length||E.opts.toolbarInline||(E.node.hasClass(U.get(0),"fr-active")?E.$tb.css("zIndex",(E.opts.zIndex||1)+4):E.$tb.css("zIndex",""));var G=W.find("a.fr-command.fr-active");G.length?E.accessibility.focusToolbarElement(G):E.accessibility.focusToolbarElement(U)}function S(U){U.addClass("fr-blink"),setTimeout(function(){U.removeClass("fr-blink")},500);for(var W=U.data("cmd"),Y=[];"undefined"!=typeof U.data("param"+(Y.length+1));)Y.push(U.data("param"+(Y.length+1)));var z=o(".fr-dropdown.fr-active");z.length&&(z.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),z.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),U.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(W,Y)}function T(U){S(U)}function C(U){var W=U.parents(".fr-popup, .fr-toolbar").data("instance");if(0!=U.parents(".fr-popup").length||U.data("popup")||W.popups.hideAll(),W.popups.areVisible()&&!W.popups.areVisible(W)){for(var Y=0;Y<o.FE.INSTANCES.length;Y++)o.FE.INSTANCES[Y]!=W&&o.FE.INSTANCES[Y].popups&&o.FE.INSTANCES[Y].popups.areVisible()&&o.FE.INSTANCES[Y].$el.find(".fr-marker").remove();W.popups.hideAll()}E.node.hasClass(U.get(0),"fr-dropdown")?v(U):(T(U),o.FE.COMMANDS[U.data("cmd")]&&!1!=o.FE.COMMANDS[U.data("cmd")].refreshAfterCallback&&W.button.bulkRefresh())}function N(U){var W=o(U.currentTarget);C(W)}function A(U){var W=U.find(".fr-dropdown.fr-active",E.$sc);W.length&&(W.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),W.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function O(U){U.preventDefault(),U.stopPropagation()}function _(U){if(U.stopPropagation(),!E.helpers.isMobile())return!1}function w(U,W){var Y="";if(W.html)Y+="function"==typeof W.html?W.html.call(E):W.html;else{var z=W.options;for(var X in"function"==typeof z&&(z=z()),Y+="<ul class=\"fr-dropdown-list\" role=\"presentation\">",z)if(z.hasOwnProperty(X)){var q=E.shortcuts.get(U+"."+X);q=q?"<span class=\"fr-shortcut\">"+q+"</span>":"",Y+="<li role=\"presentation\"><a class=\"fr-command\" tabIndex=\"-1\" role=\"option\" data-cmd=\""+U+"\" data-param1=\""+X+"\" title=\""+z[X]+"\">"+E.language.translate(z[X])+"</a></li>"}Y+="</ul>"}return Y}function D(U,W,Y){if(E.helpers.isMobile()&&!1===W.showOnMobile)return"";var z=W.displaySelection;"function"==typeof z&&(z=z(E));var X;if(z){var q="function"==typeof W.defaultSelection?W.defaultSelection(E):W.defaultSelection;X="<span style=\"width:"+(W.displaySelectionWidth||100)+"px\">"+(q||E.language.translate(W.title))+"</span>"}else X=E.icon.create(W.icon||U),X+="<span class=\"fr-sr-only\">"+(E.language.translate(W.title)||"")+"</span>";var V=W.popup?" data-popup=\"true\"":"",G=W.modal?" data-modal=\"true\"":"",Q=E.shortcuts.get(U+".");Q=Q?" ("+Q+")":"";var Z=U+"-"+E.id,J="<button id=\""+Z+"\"type=\"button\" tabIndex=\"-1\" role=\"button\""+(W.toggle?" aria-pressed=\"false\"":"")+("dropdown"==W.type?" aria-controls=\"drop\" aria-expanded=\"false\" aria-haspopup=\"true\"":"")+(W.disabled?" aria-disabled=\"true\"":"")+" title=\""+(E.language.translate(W.title)||"")+Q+"\" class=\"fr-command fr-btn"+("dropdown"==W.type?" fr-dropdown":"")+(" fr-btn-"+E.icon.getTemplate(W.icon))+(W.displaySelection?" fr-selection":"")+(W.back?" fr-back":"")+(W.disabled?" fr-disabled":"")+(Y?"":" fr-hidden")+"\" data-cmd=\""+U+"\""+V+G+">"+X+"</button>";if("dropdown"==W.type){var ee="<div class=\"fr-dropdown-menu\" role=\"listbox\" aria-labelledby=\""+Z+"\" aria-hidden=\"true\"><div class=\"fr-dropdown-wrapper\" role=\"presentation\"><div class=\"fr-dropdown-content\" role=\"presentation\">";ee+=w(U,W),ee+="</div></div></div>",J+=ee}return J}function L(U){var W=E.$tb?E.$tb.data("instance")||E:E;return!1==E.events.trigger("buttons.refresh")||void setTimeout(function(){for(var Y=W.selection.inEditor()&&W.core.hasFocus(),z=0;z<U.length;z++){var X=o(U[z]),q=X.data("cmd");0==X.parents(".fr-popup").length?Y||o.FE.COMMANDS[q]&&o.FE.COMMANDS[q].forcedRefresh?W.button.refresh(X):!E.node.hasClass(X.get(0),"fr-dropdown")&&(X.removeClass("fr-active"),X.attr("aria-pressed")&&X.attr("aria-pressed",!1)):X.parents(".fr-popup").is(":visible")&&W.button.refresh(X)}},0)}function B(){L(K),L(H)}function I(){K=[],H=[]}var K=[];(E.opts.toolbarInline||E.opts.toolbarContainer)&&(!E.shared.buttons&&(E.shared.buttons=[]),K=E.shared.buttons);var H=[];return E.shared.popup_buttons||(E.shared.popup_buttons=[]),H=E.shared.popup_buttons,{_init:function(){E.opts.toolbarInline?E.events.on("toolbar.show",B):(E.events.on("mouseup",B),E.events.on("keyup",B),E.events.on("blur",B),E.events.on("focus",B),E.events.on("contentChanged",B)),E.events.on("shared.destroy",I)},buildList:function(U,W){for(var Y="",z=0;z<U.length;z++){var X=U[z],q=o.FE.COMMANDS[X];if(!(q&&"undefined"!=typeof q.plugin&&0>E.opts.pluginsEnabled.indexOf(q.plugin)))if(q){var V="undefined"==typeof W||0<=W.indexOf(X);Y+=D(X,q,V)}else"|"==X?Y+="<div class=\"fr-separator fr-vs\" role=\"separator\" aria-orientation=\"vertical\"></div>":"-"==X&&(Y+="<div class=\"fr-separator fr-hs\" role=\"separator\" aria-orientation=\"horizontal\"></div>")}return Y},bindCommands:function(U,W){E.events.bindClick(U,".fr-command:not(.fr-disabled)",N),E.events.$on(U,E._mousedown+" "+E._mouseup+" "+E._move,".fr-dropdown-menu",O,!0),E.events.$on(U,E._mousedown+" "+E._mouseup+" "+E._move,".fr-dropdown-menu .fr-dropdown-wrapper",_,!0);var Y=U.get(0).ownerDocument,z="defaultView"in Y?Y.defaultView:Y.parentWindow,X=function(q){q&&(q.type!=E._mouseup||q.target==o("html").get(0))&&("keydown"!=q.type||(!E.keys.isCharacter(q.which)||E.keys.ctrlKey(q))&&q.which!=o.FE.KEYCODE.ESC)||A(U)};E.events.$on(o(z),E._mouseup+" resize keydown",X,!0),E.opts.iframe&&E.events.$on(E.$win,E._mouseup,X,!0),E.node.hasClass(U.get(0),"fr-popup")?o.merge(H,U.find(".fr-btn").toArray()):o.merge(K,U.find(".fr-btn").toArray()),E.tooltip.bind(U,".fr-btn, .fr-title",W)},refresh:function(U){var W=U.parents(".fr-popup, .fr-toolbar").data("instance")||E,Y=U.data("cmd"),z;E.node.hasClass(U.get(0),"fr-dropdown")?z=U.next():(U.removeClass("fr-active"),U.attr("aria-pressed")&&U.attr("aria-pressed",!1)),o.FE.COMMANDS[Y]&&o.FE.COMMANDS[Y].refresh?o.FE.COMMANDS[Y].refresh.apply(W,[U,z]):E.refresh[Y]&&W.refresh[Y](U,z)},bulkRefresh:B,exec:S,click:C,hideActiveDropdowns:A}},o.FE.MODULES.modals=function(E){function S(R,L){var B="<div tabIndex=\"-1\" class=\"fr-modal"+(E.opts.theme?" "+E.opts.theme+"-theme":"")+"\"><div class=\"fr-modal-wrapper\">",I="<i title=\""+E.language.translate("Cancel")+"\" class=\"fa fa-times fr-modal-close\"></i>";return B+="<div class=\"fr-modal-head\">"+R+I+"</div>",B+="<div tabIndex=\"-1\" class=\"fr-modal-body\">"+L+"</div>",B+="</div></div>",o(B)}function C(){for(var R in D){var L=D[R];L&&L.$modal&&L.$modal.removeData().remove()}M&&M.removeData().remove(),D={}}function A(R){if(D[R]){var L=D[R].$modal,B=L.data("instance")||E;B.events.enableBlur(),L.hide(),M.hide(),B.$doc.find("body").removeClass("prevent-scroll fr-mobile"),L.removeClass("fr-active"),E.accessibility.restoreSelection(B)}}function _(R){var L;if("string"==typeof R){if(!D[R])return;L=D[R].$modal}else L=R;return L&&E.node.hasClass(L,"fr-active")&&E.core.sameInstance(L)||!1}E.shared.modals||(E.shared.modals={});var D=E.shared.modals,M;return{_init:function(){E.events.on("shared.destroy",C,!0)},get:function(R){return D[R]},create:function(R,L,B){if(E.shared.$overlay||(E.shared.$overlay=o("<div class=\"fr-overlay\">").appendTo("body")),M=E.shared.$overlay,E.opts.theme&&M.addClass(E.opts.theme+"-theme"),!D[R]){var I=S(L,B);D[R]={$modal:I,$head:I.find(".fr-modal-head"),$body:I.find(".fr-modal-body")},E.helpers.isMobile()||I.addClass("fr-desktop"),I.appendTo("body"),E.events.bindClick(I,"i.fr-modal-close",function(){A(R)}),D[R].$body.css("margin-top",D[R].$head.outerHeight()),E.events.$on(I,"keydown",function(P){var K=P.which;return K==o.FE.KEYCODE.ESC?(A(R),E.accessibility.focusModalButton(I),!1):o(P.currentTarget).is("input[type=text], textarea")||K==o.FE.KEYCODE.ARROW_UP||K==o.FE.KEYCODE.ARROW_DOWN||E.keys.isBrowserAction(P)||(P.preventDefault(),P.stopPropagation(),!1)},!0),A(R)}return D[R]},show:function(R){if(D[R]){var L=D[R].$modal;L.data("instance",E),L.show(),M.show(),E.$doc.find("body").addClass("prevent-scroll"),E.helpers.isMobile()&&E.$doc.find("body").addClass("fr-mobile"),L.addClass("fr-active"),E.accessibility.focusModal(L)}},hide:A,resize:function(R){if(D[R]){var L=D[R],B=L.$modal,I=L.$body,P=E.$win.height(),K=B.find(".fr-modal-wrapper"),H=K.outerHeight(!0),U=K.height()-(I.outerHeight(!0)-I.height()),W=P-H+U,Y=I.get(0).scrollHeight,z="auto";Y>W&&(z=W),I.height(z)}},isVisible:_,areVisible:function(R){for(var L in D)if(D.hasOwnProperty(L)&&_(L)&&("undefined"==typeof R||D[L].$modal.data("instance")==R))return D[L].$modal;return!1}}},o.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},o.FE.RegisterTemplate=function(E,v){o.FE.POPUP_TEMPLATES[E]=v},o.FE.MODULES.popups=function(E){function v(z,X){X.is(":visible")||(X=E.$sc),X.is(Y[z].data("container"))||(Y[z].data("container",X),X.append(Y[z]))}function C(z){return Y[z]&&E.node.hasClass(Y[z],"fr-active")&&E.core.sameInstance(Y[z])||!1}function N(z){for(var X in Y)if(Y.hasOwnProperty(X)&&C(X)&&("undefined"==typeof z||Y[X].data("instance")==z))return Y[X];return!1}function A(z){var X=null;X="string"==typeof z?Y[z]:z,X&&E.node.hasClass(X,"fr-active")&&(X.removeClass("fr-active fr-above"),E.events.trigger("popups.hide."+z),E.$tb&&(1<E.opts.zIndex?E.$tb.css("zIndex",E.opts.zIndex+1):E.$tb.css("zIndex","")),E.events.disableBlur(),X.find("input, textarea, button").filter(":focus").blur(),X.find("input, textarea").attr("disabled","disabled"))}function D(z){for(var X in"undefined"==typeof z&&(z=[]),Y)Y.hasOwnProperty(X)&&0>z.indexOf(X)&&A(X)}function M(){E.shared.exit_flag=!0}function R(){E.shared.exit_flag=!1}function L(){return E.shared.exit_flag}function B(z,X){var q=o.FE.POPUP_TEMPLATES[z];for(var V in"function"==typeof q&&(q=q.apply(E)),X)X.hasOwnProperty(V)&&(q=q.replace("[_"+V.toUpperCase()+"_]",X[V]));return q}function I(z,X){var q=B(z,X),V=o("<div class=\"fr-popup"+(E.helpers.isMobile()?" fr-mobile":" fr-desktop")+(E.opts.toolbarInline?" fr-inline":"")+"\"><span class=\"fr-arrow\"></span>"+q+"</div>");E.opts.theme&&V.addClass(E.opts.theme+"-theme"),1<E.opts.zIndex&&E.$tb.css("z-index",E.opts.zIndex+2),"auto"!=E.opts.direction&&V.removeClass("fr-ltr fr-rtl").addClass("fr-"+E.opts.direction),V.find("input, textarea").attr("dir",E.opts.direction).attr("disabled","disabled");var G=o("body");return G.append(V),V.data("container",G),Y[z]=V,E.button.bindCommands(V,!1),V}function P(z){var X=Y[z];return{_windowResize:function(){var q=X.data("instance")||E;!q.helpers.isMobile()&&X.is(":visible")&&(q.events.disableBlur(),q.popups.hide(z),q.events.enableBlur())},_inputFocus:function(q){var V=X.data("instance")||E,G=o(q.currentTarget);if(G.is("input:file")&&G.closest(".fr-layer").addClass("fr-input-focus"),q.preventDefault(),q.stopPropagation(),setTimeout(function(){V.events.enableBlur()},0),V.helpers.isMobile()){var Q=o(V.o_win).scrollTop();setTimeout(function(){o(V.o_win).scrollTop(Q)},0)}},_inputBlur:function(q){var V=X.data("instance")||E,G=o(q.currentTarget);return G.is("input:file")&&G.closest(".fr-layer").removeClass("fr-input-focus"),G.is("input[type=\"range\"]")?(q.preventDefault(),q.stopPropagation(),!1):void(document.activeElement!=this&&o(this).is(":visible")&&(V.events.blurActive()&&V.events.trigger("blur"),V.events.enableBlur()))},_editorKeydown:function(q){var V=X.data("instance")||E;V.keys.ctrlKey(q)||q.which==o.FE.KEYCODE.ALT||q.which==o.FE.KEYCODE.ESC||(C(z)&&X.find(".fr-back:visible").length?V.button.exec(X.find(".fr-back:visible:first")):q.which!=o.FE.KEYCODE.ALT&&V.popups.hide(z))},_preventFocus:function(q){var V=X.data("instance")||E;"mouseup"==q.type&&E.button.hideActiveDropdowns(X);var G=q.originalEvent?q.originalEvent.target||q.originalEvent.originalTarget:null;"mouseup"==q.type||o(G).is(":focus")||V.events.disableBlur();var Q="input, textarea, button, select, label, .fr-command";return G&&!o(G).is(Q)&&0===o(G).parents(Q).length?(q.stopPropagation(),!1):void(G&&o(G).is(Q)&&q.stopPropagation(),R())},_editorMouseup:function(){X.is(":visible")&&L()&&0<X.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length&&E.events.disableBlur()},_windowMouseup:function(q){if(!E.core.sameInstance(X))return!0;var V=X.data("instance")||E;X.is(":visible")&&L()&&(q.stopPropagation(),V.markers.remove(),V.popups.hide(z),R())},_windowKeydown:function(q){if(!E.core.sameInstance(X))return!0;var V=X.data("instance")||E,G=q.which;if(o.FE.KEYCODE.ESC==G){if(V.popups.isVisible(z)&&V.opts.toolbarInline)return q.stopPropagation(),V.popups.isVisible(z)&&(X.find(".fr-back:visible").length?(V.button.exec(X.find(".fr-back:visible:first")),V.accessibility.focusPopupButton(X)):X.find(".fr-dismiss:visible").length?V.button.exec(X.find(".fr-dismiss:visible:first")):(V.popups.hide(z),V.toolbar.showInline(null,!0),V.accessibility.FocusPopupButton(X))),!1;if(V.popups.isVisible(z))return X.find(".fr-back:visible").length?(V.button.exec(X.find(".fr-back:visible:first")),V.accessibility.focusPopupButton(X)):X.find(".fr-dismiss:visible").length?V.button.exec(X.find(".fr-dismiss:visible:first")):(V.popups.hide(z),V.accessibility.focusPopupButton(X)),!1}},_doPlaceholder:function(){var V=o(this).next();0==V.length&&o(this).attr("placeholder")&&o(this).after("<label for=\""+o(this).attr("id")+"\">"+o(this).attr("placeholder")+"</label>"),o(this).toggleClass("fr-not-empty",""!=o(this).val())},_repositionPopup:function(){if(!(E.opts.height||E.opts.heightMax)||E.opts.toolbarInline)return!0;if(E.$wp&&C(z)&&X.parent().get(0)==E.$sc.get(0)){var V=X.offset().top-E.$wp.offset().top,G=E.$wp.outerHeight();E.node.hasClass(X.get(0),"fr-above")&&(V+=X.outerHeight()),V>G||0>V?X.addClass("fr-hidden"):X.removeClass("fr-hidden")}}}}function K(z,X){E.events.on("mouseup",z._editorMouseup,!0),E.$wp&&E.events.on("keydown",z._editorKeydown),E.events.on("blur",function(){N()&&E.markers.remove(),D()}),E.$wp&&!E.helpers.isMobile()&&E.events.$on(E.$wp,"scroll.popup"+X,z._repositionPopup),E.events.on("window.mouseup",z._windowMouseup,!0),E.events.on("window.keydown",z._windowKeydown,!0),Y[X].data("inst"+E.id,!0),E.events.on("destroy",function(){E.core.sameInstance(Y[X])&&Y[X].removeClass("fr-active").appendTo("body")},!0)}function U(){for(var z in Y)if(Y.hasOwnProperty(z)){var X=Y[z];X.html("").removeData().remove(),Y[z]=null}Y=[]}E.shared.popups||(E.shared.popups={});var Y=E.shared.popups;return E.shared.exit_flag=!1,{_init:function(){E.events.on("shared.destroy",U,!0),E.events.on("window.mousedown",M),E.events.on("window.touchmove",R),E.events.on("mousedown",function(z){N()&&(z.stopPropagation(),E.$el.find(".fr-marker").remove(),M(),E.events.disableBlur())})},create:function(z,X){var q=I(z,X),V=P(z);return K(V,z),E.events.$on(q,"mousedown mouseup touchstart touchend touch","*",V._preventFocus,!0),E.events.$on(q,"focus","input, textarea, button, select",V._inputFocus,!0),E.events.$on(q,"blur","input, textarea, button, select",V._inputBlur,!0),E.accessibility.registerPopup(z),E.events.$on(q,"keydown keyup change input","input, textarea",V._doPlaceholder,!0),E.helpers.isIOS()&&E.events.$on(q,"touchend","label",function(){o("#"+o(this).attr("for")).prop("checked",function(G,Q){return!Q})},!0),E.events.$on(o(E.o_win),"resize",V._windowResize,!0),q},get:function(z){var X=Y[z];if(X&&!X.data("inst"+E.id)){var q=P(z);K(q,z)}return X},show:function(z,X,q,V){if(N()&&0<E.$el.find(".fr-marker").length?(E.events.disableBlur(),E.selection.restore()):(E.events.disableBlur(),E.events.focus(),E.events.enableBlur()),D([z]),!Y[z])return!1;var G=o(".fr-dropdown.fr-active");G.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),G.next().attr("aria-hidden",!0),Y[z].data("instance",E),E.$tb&&E.$tb.data("instance",E);var Q=Y[z].outerWidth(),Z=Y[z].outerHeight(),J=C(z);Y[z].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var ee=Y[z].data("container");E.opts.toolbarInline&&ee&&E.$tb&&ee.get(0)==E.$tb.get(0)&&(v(z,E.$sc),q=E.$tb.offset().top-E.helpers.getPX(E.$tb.css("margin-top")),X=E.$tb.offset().left+E.$tb.outerWidth()/2+(parseFloat(E.$tb.find(".fr-arrow").css("margin-left"))||0)+E.$tb.find(".fr-arrow").outerWidth()/2,E.node.hasClass(E.$tb.get(0),"fr-above")&&q&&(q+=E.$tb.outerHeight()),V=0),ee=Y[z].data("container"),!E.opts.iframe||V||J||(X&&(X-=E.$iframe.offset().left),q&&(q-=E.$iframe.offset().top)),ee.is(E.$tb)?E.$tb.css("zIndex",(E.opts.zIndex||1)+4):Y[z].css("zIndex",(E.opts.zIndex||1)+4),X&&(X-=Q/2),E.opts.toolbarBottom&&ee&&E.$tb&&ee.get(0)==E.$tb.get(0)&&(Y[z].addClass("fr-above"),q&&(q-=Y[z].outerHeight())),Y[z].removeClass("fr-active"),E.position.at(X,q,Y[z],V||0),Y[z].addClass("fr-active"),J||E.accessibility.focusPopup(Y[z]),E.opts.toolbarInline&&E.toolbar.hide(),E.events.trigger("popups.show."+z),P(z)._repositionPopup(),R()},hide:A,onHide:function(z,X){E.events.on("popups.hide."+z,X)},hideAll:D,setContainer:v,refresh:function(z){E.events.trigger("popups.refresh."+z);for(var X=Y[z].find(".fr-command"),q=0,V;q<X.length;q++)V=o(X[q]),0==V.parents(".fr-dropdown-menu").length&&E.button.refresh(V)},onRefresh:function(z,X){E.events.on("popups.refresh."+z,X)},onShow:function(z,X){E.events.on("popups.show."+z,X)},isVisible:C,areVisible:N}},o.FE.MODULES.position=function(E){function v(){var R=E.selection.ranges(0),L=R.getBoundingClientRect();if(0==L.top&&0==L.left&&0==L.width||0==L.height){var B=!1;0==E.$el.find(".fr-marker").length&&(E.selection.save(),B=!0);var I=E.$el.find(".fr-marker:first");I.css("display","inline"),I.css("line-height","");var P=I.offset(),K=I.outerHeight();I.css("display","none"),I.css("line-height",0),L={},L.left=P.left,L.width=0,L.height=K,L.top=P.top-(E.helpers.isMobile()?0:E.helpers.scrollTop()),L.right=1,L.bottom=1,L.ok=!0,B&&E.selection.restore()}return L}function S(R,L,B){var I=R.get(0).offsetHeight;if(!E.helpers.isMobile()&&E.$tb&&R.parent().get(0)!=E.$tb.get(0)){var P=R.get(0).parentNode.clientHeight-20-(E.opts.toolbarBottom?E.$tb.get(0).offsetHeight:0),K=R.parent().offset().top,H=L-I-(B||0);R.parent().get(0)==E.$sc.get(0)&&(K-=R.parent().position().top);var U=E.$sc.get(0).scrollHeight;K+L+I>E.$sc.offset().top+U&&0<R.parent().offset().top+H?(L=H,R.addClass("fr-above")):R.removeClass("fr-above")}return L}function T(R,L){var B=R.get(0).offsetWidth;return L+B>E.$sc.get(0).clientWidth-10&&(L=E.$sc.get(0).clientWidth-B-10),0>L&&(L=10),L}function N(R,L,B,I){var P=B.data("container");P&&("BODY"!==P.get(0).tagName||"static"!=P.css("position"))&&(R&&(R-=P.offset().left),L&&(L-=P.offset().top),"BODY"==P.get(0).tagName?"absolute"==P.css("position")&&(R&&(R+=P.position().left),L&&(L+=P.position().top)):(R&&(R+=P.get(0).scrollLeft),L&&(L+=P.get(0).scrollTop))),E.opts.iframe&&P&&E.$tb&&P.get(0)!=E.$tb.get(0)&&(R&&(R+=E.$iframe.offset().left),L&&(L+=E.$iframe.offset().top));var K=T(B,R);if(R){B.css("left",K);var H=B.data("fr-arrow");H||(H=B.find(".fr-arrow"),B.data("fr-arrow",H)),H.data("margin-left")||H.data("margin-left",E.helpers.getPX(H.css("margin-left"))),H.css("margin-left",R-K+H.data("margin-left"))}L&&B.css("top",S(B,L,I))}function A(R){var L=o(R),B=L.is(".fr-sticky-on"),I=L.data("sticky-top"),P=L.data("sticky-scheduled");if("undefined"==typeof I){L.data("sticky-top",0);var K=o("<div class=\"fr-sticky-dummy\" style=\"height: "+L.outerHeight()+"px;\"></div>");E.$box.prepend(K)}else E.$box.find(".fr-sticky-dummy").css("height",L.outerHeight());if(E.core.hasFocus()||0<E.$tb.find("input:visible:focus").length){var H=E.helpers.scrollTop(),U=Math.min(Math.max(H-E.$tb.parent().offset().top,0),E.$tb.parent().outerHeight()-L.outerHeight());U!=I&&U!=P&&(clearTimeout(L.data("sticky-timeout")),L.data("sticky-scheduled",U),L.outerHeight()<H-E.$tb.parent().offset().top&&L.addClass("fr-opacity-0"),L.data("sticky-timeout",setTimeout(function(){var W=E.helpers.scrollTop(),Y=Math.min(Math.max(W-E.$tb.parent().offset().top,0),E.$tb.parent().outerHeight()-L.outerHeight());0<Y&&"BODY"==E.$tb.parent().get(0).tagName&&(Y+=E.$tb.parent().position().top),Y!=I&&(L.css("top",Math.max(Y,0)),L.data("sticky-top",Y),L.data("sticky-scheduled",Y)),L.removeClass("fr-opacity-0")},100))),B||(L.css("top","0"),L.width(E.$tb.parent().width()),L.addClass("fr-sticky-on"),E.$box.addClass("fr-sticky-box"))}else clearTimeout(o(R).css("sticky-timeout")),L.css("top","0"),L.css("position",""),L.width(""),L.data("sticky-top",0),L.removeClass("fr-sticky-on"),E.$box.removeClass("fr-sticky-box")}function O(R){if(R.offsetWidth){var I=o(R),P=I.outerHeight(),K=I.data("sticky-position"),H=o("body"==E.opts.scrollableContainer?E.o_win:E.opts.scrollableContainer).outerHeight(),U=0,W=0,L,B;"body"!==E.opts.scrollableContainer&&(U=E.$sc.offset().top,W=o(E.o_win).outerHeight()-U-H);var Y="body"==E.opts.scrollableContainer?E.helpers.scrollTop():U,z=I.is(".fr-sticky-on");I.data("sticky-parent")||I.data("sticky-parent",I.parent());var X=I.data("sticky-parent"),q=X.offset().top,V=X.outerHeight();if(I.data("sticky-offset")||(I.data("sticky-offset",!0),I.after("<div class=\"fr-sticky-dummy\" style=\"height: "+P+"px;\"></div>")),!K){var G="auto"!==I.css("top")||"auto"!==I.css("bottom");G||I.css("position","fixed"),K={top:E.node.hasClass(I.get(0),"fr-top"),bottom:E.node.hasClass(I.get(0),"fr-bottom")},G||I.css("position",""),I.data("sticky-position",K),I.data("top",E.node.hasClass(I.get(0),"fr-top")?I.css("top"):"auto"),I.data("bottom",E.node.hasClass(I.get(0),"fr-bottom")?I.css("bottom"):"auto")}var Q=function(){return q<Y+L&&q+V-P>=Y+L},Z=function(){return q+P<Y+H-B&&q+V>Y+H-B};L=E.helpers.getPX(I.data("top")),B=E.helpers.getPX(I.data("bottom"));var J=K.top&&Q(),ee=K.bottom&&Z();J||ee?(I.css("width",X.width()+"px"),!z&&(I.addClass("fr-sticky-on"),I.removeClass("fr-sticky-off"),I.css("top")&&("auto"==I.data("top")?I.data("top","auto"):I.css("top",E.helpers.getPX(I.data("top"))+U)),I.css("bottom")&&("auto"==I.data("bottom")?I.css("bottom","auto"):I.css("bottom",E.helpers.getPX(I.data("bottom"))+W)))):!E.node.hasClass(I.get(0),"fr-sticky-off")&&(I.width(""),I.removeClass("fr-sticky-on"),I.addClass("fr-sticky-off"),I.css("top")&&"auto"!=I.data("top")&&K.top&&I.css("top",0),I.css("bottom")&&"auto"!=I.data("bottom")&&K.bottom&&I.css("bottom",0))}}function _(){var R=document.createElement("test"),L=R.style;return L.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",-1!==L.position.indexOf("sticky")&&!E.helpers.isIOS()&&!E.helpers.isAndroid()&&!E.browser.chrome}function F(){if(!_())if(E._stickyElements=[],E.helpers.isIOS()){var R=function(){E.helpers.requestAnimationFrame()(R);for(var L=0;L<E._stickyElements.length;L++)A(E._stickyElements[L])};R(),E.events.$on(o(E.o_win),"scroll",function(){if(E.core.hasFocus())for(var L=0;L<E._stickyElements.length;L++){var B=o(E._stickyElements[L]),I=B.parent(),P=E.helpers.scrollTop();B.outerHeight()<P-I.offset().top&&(B.addClass("fr-opacity-0"),B.data("sticky-top",-1),B.data("sticky-scheduled",-1))}},!0)}else E.events.$on(o("body"==E.opts.scrollableContainer?E.o_win:E.opts.scrollableContainer),"scroll",w,!0),E.events.$on(o(E.o_win),"resize",w,!0),E.events.on("initialized",w),E.events.on("focus",w),E.events.$on(o(E.o_win),"resize","textarea",w,!0);E.events.on("destroy",function(){E._stickyElements=[]})}function w(){if(E._stickyElements)for(var R=0;R<E._stickyElements.length;R++)O(E._stickyElements[R])}return{_init:function(){F()},forSelection:function(R){var L=v();R.css({top:0,left:0});var B=L.top+L.height,I=L.left+L.width/2-R.get(0).offsetWidth/2+E.helpers.scrollLeft();E.opts.iframe||(B+=E.helpers.scrollTop()),N(I,B,R,L.height)},addSticky:function(R){R.addClass("fr-sticky"),E.helpers.isIOS()&&R.addClass("fr-sticky-ios"),_()||E._stickyElements.push(R.get(0))},refresh:w,at:N,getBoundingRect:v}},o.FE.MODULES.refresh=function(E){function N(A,O){A.toggleClass("fr-disabled",O).attr("aria-disabled",O)}return{undo:function(A){N(A,!E.undo.canDo())},redo:function(A){N(A,!E.undo.canRedo())},outdent:function(A){if(E.node.hasClass(A.get(0),"fr-no-refresh"))return!1;for(var O=E.selection.blocks(),_=0,F;_<O.length;_++){if(F="rtl"==E.opts.direction||"rtl"==o(O[_]).css("direction")?"margin-right":"margin-left","LI"==O[_].tagName||"LI"==O[_].parentNode.tagName)return N(A,!1),!0;if(0<E.helpers.getPX(o(O[_]).css(F)))return N(A,!1),!0}N(A,!0)},indent:function(A){if(E.node.hasClass(A.get(0),"fr-no-refresh"))return!1;for(var O=E.selection.blocks(),_=0,F;_<O.length;_++){for(F=O[_].previousSibling;F&&F.nodeType==Node.TEXT_NODE&&0===F.textContent.length;)F=F.previousSibling;if("LI"==O[_].tagName&&!F)N(A,!0);else return N(A,!1),!0}}}},o.extend(o.FE.DEFAULTS,{editInPopup:!1}),o.FE.MODULES.textEdit=function(E){function v(){var A="<div id=\"fr-text-edit-"+E.id+"\" class=\"fr-layer fr-text-edit-layer\"><div class=\"fr-input-line\"><input type=\"text\" placeholder=\""+E.language.translate("Text")+"\" tabIndex=\"1\"></div><div class=\"fr-action-buttons\"><button type=\"button\" class=\"fr-command fr-submit\" data-cmd=\"updateText\" tabIndex=\"2\">"+E.language.translate("Update")+"</button></div></div>",_=E.popups.create("text.edit",{edit:A})}function S(){var A=E.popups.get("text.edit"),O;O="INPUT"===E.$el.prop("tagName")?E.$el.attr("placeholder"):E.$el.text(),A.find("input").val(O).trigger("change"),E.popups.setContainer("text.edit",o("body")),E.popups.show("text.edit",E.$el.offset().left+E.$el.outerWidth()/2,E.$el.offset().top+E.$el.outerHeight(),E.$el.outerHeight())}function T(){E.events.$on(E.$el,E._mouseup,function(){setTimeout(function(){S()},10)})}return{_init:function(){E.opts.editInPopup&&(v(),T())},update:function(){var A=E.popups.get("text.edit"),O=A.find("input").val();0==O.length&&(O=E.opts.placeholderText),"INPUT"===E.$el.prop("tagName")?E.$el.attr("placeholder",O):E.$el.text(O),E.events.trigger("contentChanged"),E.popups.hide("text.edit")}}},o.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),o.extend(o.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["fullscreen","print","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","|","specialCharacters","color","emoticons","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting","selectAll","html","applyFormat","removeFormat","help"],toolbarButtonsXS:["bold","italic","fontFamily","fontSize","|","undo","redo"],toolbarButtonsSM:["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],toolbarButtonsMD:["fullscreen","bold","italic","underline","fontFamily","fontSize","color","paragraphStyle","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting"],toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),o.FE.MODULES.toolbar=function(E){function v(X,q){for(var V=0;V<q.length;V++)"-"!=q[V]&&"|"!=q[V]&&0>X.indexOf(q[V])&&X.push(q[V])}function S(){var X=o.merge([],T());v(X,E.opts.toolbarButtonsXS||[]),v(X,E.opts.toolbarButtonsSM||[]),v(X,E.opts.toolbarButtonsMD||[]),v(X,E.opts.toolbarButtons);for(var q=X.length-1;0<=q;q--)"-"!=X[q]&&"|"!=X[q]&&X.indexOf(X[q])<q&&X.splice(q,1);var V=E.button.buildList(X,T());E.$tb.append(V),E.button.bindCommands(E.$tb)}function T(){var X=E.helpers.screenSize();return U[X]}function C(){var X=T();E.$tb.find(".fr-separator").remove(),E.$tb.find("> .fr-command").addClass("fr-hidden");for(var q=0;q<X.length;q++)if("|"==X[q]||"-"==X[q])E.$tb.append(E.button.buildList([X[q]]));else{var V=E.$tb.find("> .fr-command[data-cmd=\""+X[q]+"\"]"),G=null;E.node.hasClass(V.next().get(0),"fr-dropdown-menu")&&(G=V.next()),V.removeClass("fr-hidden").appendTo(E.$tb),G&&G.appendTo(E.$tb)}}function N(){E.events.$on(o(E.o_win),"resize",C),E.events.$on(o(E.o_win),"orientationchange",C)}function A(X,q){setTimeout(function(){if(X&&X.which==o.FE.KEYCODE.ESC);else if(E.selection.inEditor()&&E.core.hasFocus()&&!E.popups.areVisible()&&(E.opts.toolbarVisibleWithoutSelection||!E.selection.isCollapsed()&&!E.keys.isIME()||q)){if(E.$tb.data("instance",E),!1==E.events.trigger("toolbar.show",[X]))return!1;E.$tb.show(),E.opts.toolbarContainer||E.position.forSelection(E.$tb),1<E.opts.zIndex?E.$tb.css("z-index",E.opts.zIndex+1):E.$tb.css("z-index",null)}},0)}function O(){var q=o(".fr-dropdown.fr-active");return!!q.next().find(E.o_doc.activeElement).length||void(!1!==E.events.trigger("toolbar.hide")&&E.$tb.hide())}function F(X){clearTimeout(W),X&&X.which==o.FE.KEYCODE.ESC||(W=setTimeout(A,E.opts.typingTimer))}function w(){E.events.on("window.mousedown",O),E.events.on("keydown",O),E.events.on("blur",O),E.events.on("window.mouseup",A);E.helpers.isMobile()?!E.helpers.isIOS()&&(E.events.on("window.touchend",A),E.browser.mozilla&&setInterval(A,200)):E.events.on("window.keyup",F),E.events.on("keydown",function(q){q&&q.which==o.FE.KEYCODE.ESC&&O()}),E.events.on("keydown",function(q){if(q.which==o.FE.KEYCODE.ALT)return q.stopPropagation(),!1},!0),E.events.$on(E.$wp,"scroll.toolbar",A),E.events.on("commands.after",A),E.helpers.isMobile()&&(E.events.$on(E.$doc,"selectionchange",F),E.events.$on(E.$doc,"orientationchange",A))}function D(){E.opts.toolbarInline?(E.$sc.append(E.$tb),E.$tb.data("container",E.$sc),E.$tb.addClass("fr-inline"),E.$tb.prepend("<span class=\"fr-arrow\"></span>"),w(),E.opts.toolbarBottom=!1):(E.opts.toolbarBottom&&!E.helpers.isIOS()?(E.$box.append(E.$tb),E.$tb.addClass("fr-bottom"),E.$box.addClass("fr-bottom")):(E.opts.toolbarBottom=!1,E.$box.prepend(E.$tb),E.$tb.addClass("fr-top"),E.$box.addClass("fr-top")),E.$tb.addClass("fr-basic"),E.opts.toolbarSticky&&(E.opts.toolbarStickyOffset&&(E.opts.toolbarBottom?E.$tb.css("bottom",E.opts.toolbarStickyOffset):E.$tb.css("top",E.opts.toolbarStickyOffset)),E.position.addSticky(E.$tb)))}function M(){E.$tb.html("").removeData().remove(),E.$tb=null}function R(){E.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),E.$box.find(".fr-sticky-dummy").remove()}function L(){E.opts.theme&&E.$tb.addClass(E.opts.theme+"-theme"),1<E.opts.zIndex&&E.$tb.css("z-index",E.opts.zIndex+1),"auto"!=E.opts.direction&&E.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+E.opts.direction),E.helpers.isMobile()?E.$tb.addClass("fr-mobile"):E.$tb.addClass("fr-desktop"),E.opts.toolbarContainer?(E.opts.toolbarInline&&(w(),O()),E.opts.toolbarBottom?E.$tb.addClass("fr-bottom"):E.$tb.addClass("fr-top")):D(),K=E.$tb.get(0).ownerDocument,H="defaultView"in K?K.defaultView:K.parentWindow,S(),N(),E.accessibility.registerToolbar(E.$tb),E.events.$on(E.$tb,E._mousedown+" "+E._mouseup,function(X){var q=X.originalEvent?X.originalEvent.target||X.originalEvent.originalTarget:null;if(q&&"INPUT"!=q.tagName&&!E.edit.isDisabled())return X.stopPropagation(),X.preventDefault(),!1},!0)}var K,H,U=[];U[o.FE.XS]=E.opts.toolbarButtonsXS||E.opts.toolbarButtons,U[o.FE.SM]=E.opts.toolbarButtonsSM||E.opts.toolbarButtons,U[o.FE.MD]=E.opts.toolbarButtonsMD||E.opts.toolbarButtons,U[o.FE.LG]=E.opts.toolbarButtons;var W=null,z=!1;return{_init:function(){return E.$sc=o(E.opts.scrollableContainer),!!E.$wp&&void(E.opts.toolbarContainer?(E.shared.$tb?(E.$tb=E.shared.$tb,E.opts.toolbarInline&&w()):(E.shared.$tb=o("<div class=\"fr-toolbar\"></div>"),E.$tb=E.shared.$tb,o(E.opts.toolbarContainer).append(E.$tb),L(),E.$tb.data("instance",E)),E.opts.toolbarInline?E.$box.addClass("fr-inline"):E.$box.addClass("fr-basic"),E.events.on("focus",function(){E.$tb.data("instance",E)},!0),E.opts.toolbarInline=!1):E.opts.toolbarInline?(E.$box.addClass("fr-inline"),E.shared.$tb?(E.$tb=E.shared.$tb,w()):(E.shared.$tb=o("<div class=\"fr-toolbar\"></div>"),E.$tb=E.shared.$tb,L())):(E.$box.addClass("fr-basic"),E.$tb=o("<div class=\"fr-toolbar\"></div>"),L(),E.$tb.data("instance",E)),E.events.on("destroy",R,!0),E.events.on(E.opts.toolbarInline||E.opts.toolbarContainer?"shared.destroy":"destroy",M,!0))},hide:O,show:function(){return!1!=E.events.trigger("toolbar.show")&&void E.$tb.show()},showInline:A,disable:function(){!z&&E.$tb&&(E.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),z=!0)},enable:function(){z&&E.$tb&&(E.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),z=!1),E.button.bulkRefresh()}}}});