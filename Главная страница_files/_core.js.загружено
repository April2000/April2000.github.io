!function(r){for(var a=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!r.requestAnimationFrame;++t)r.requestAnimationFrame=r[e[t]+"RequestAnimationFrame"],r.cancelAnimationFrame=r[e[t]+"CancelAnimationFrame"]||r[e[t]+"CancelRequestAnimationFrame"];r.requestAnimationFrame||(r.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),i=Math.max(0,16-(n-a)),o=r.setTimeout(function(){e(n+i)},i);return a=n+i,o}),r.cancelAnimationFrame||(r.cancelAnimationFrame=function(e){clearTimeout(e)})}(window),function(t){t.svg4everybody=function(){function f(e,t){if(t){var n=document.createDocumentFragment(),i=t.getAttribute("viewBox");e.setAttribute("viewBox",i);for(var o=t.cloneNode(!0);o.childNodes.length;)n.appendChild(o.firstChild);e.appendChild(n)}}function g(i){i.onreadystatechange=function(){if(4===i.readyState){var n=i._cachedDocument;n||((n=i._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=i.responseText,i._cachedTarget={}),i._embeds.splice(0).map(function(e){var t=i._cachedTarget[e.id];t||(t=i._cachedTarget[e.id]=n.getElementById(e.id)),f(e.svg,t)})}},i.onreadystatechange()}return function(e){var s,m=Object(e);s="polyfill"in m?m.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||/\bEdge\/(\d+)\.(\d+)\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537;var u={},l=t.requestAnimationFrame||setTimeout,v=document.getElementsByTagName("use");s&&function e(){for(var t=0;t<v.length;){var n=v[t],i=n.parentNode;if(i&&/svg/i.test(i.nodeName)){var o=n.getAttribute("xlink:href");if(s&&(!m.validate||m.validate(o,i,n))){i.removeChild(n);var r=o.split("#"),a=r.shift(),c=r.join("#");if(a.length){var d=u[a];d||((d=u[a]=new XMLHttpRequest).open("GET",a),d.send(),d._embeds=[]),d._embeds.push({svg:i,id:c}),g(d)}else f(i,document.getElementById(c))}}else++t}l(e,67)}()}}()}(window),function(e){function t(e){e.preventDefault()}e.videoImgFallback=function(e){console.warn("video load error, gif fallback used");var t=e.querySelector("img");t&&e.parentNode.replaceChild(t,e)},e.getCookie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},e.setCookie=function(e,t,n){void 0===n&&(n={});var i=n.expires;if("number"==typeof i&&i){var o=new Date;o.setTime(o.getTime()+1e3*i),i=n.expires=o}i&&i.toUTCString&&(n.expires=i.toUTCString());var r=e+"="+(t=encodeURIComponent(t));for(var a in n){r+="; "+a;var c=n[a];!0!==c&&(r+="="+c)}document.cookie=r},e.deleteCookie=function(e){setCookie(e,"",{expires:-1})},e.getJsonFromUrl=function(e){var t;if(e){var n=location.href.indexOf("?");if(-1===n)return[];t=location.href.substr(n+1)}else t=location.search.substr(1);var c={};return t.split("&").forEach(function(e){if(e){var t=(e=e.split("+").join(" ")).indexOf("="),n=-1<t?e.substr(0,t):e,i=-1<t?decodeURIComponent(e.substr(t+1)):"",o=n.indexOf("[");if(-1===o)c[decodeURIComponent(n)]=i;else{var r=n.indexOf("]",o),a=decodeURIComponent(n.substring(o+1,r));n=decodeURIComponent(n.substring(0,o)),c[n]||(c[n]=[]),a?c[n][a]=i:c[n].push(i)}}}),c},e.chunkSplit=function(e,t,n){return void 0===t&&(t=3),void 0===n&&(n=" "),(e+="").split("").reverse().join("").match(new RegExp(".{0,"+t+"}","g")).join(n).split("").reverse().join("").trim()},e.preventBodyScrolling=function(e){void 0===e&&(e=!1),document.body[!0===e?"addEventListener":"removeEventListener"]("touchmove",t,!1)}}(window);
function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var is_dev=!0;"undefined"==typeof flexbe_cli&&(flexbe_cli={}),spaced_cli=flexbe_cli,flexbe_cli.run={_init:function(){if(this.deviceInfo(),!flexbe_cli.p_id){var e={pId:flexbe_cli.p_id||"not set",groupId:flexbe_cli.group_id||"not set",sId:flexbe_cli.s_id||"not set",themeId:flexbe_cli.theme_id||"not set",location:location.href,userAgent:navigator&&navigator.userAgent||"unknown",isBot:this.is_bot,scriptInitContent:document.getElementById("flexbe-vars").innerHTML};return this.is_bot||flexbe_cli.message({title:"Page loaded with empty pId",text:"Collected data: ```"+JSON.stringify(e,null,4)+"```"}),!1}this.init(),svg4everybody({polyfill:!flexbe_cli.is_admin&&(flexbe_cli.run.is_ie||flexbe_cli.run.is_EDGE)})},deviceInfo:function(){var e=navigator.userAgent.toLowerCase();this.is_screen_mobile=window.innerWidth<570,this.is_screen_tablet_s=570<=window.innerWidth&&window.innerWidth<768,this.is_screen_tablet=768<=window.innerWidth&&window.innerWidth<=1024,this.is_screen_small_pc=1024<window.innerWidth&&window.innerWidth<1200,this.is_screen_pc=1200<=window.innerWidth,this.is_bot=/bot|aolbuild|bingpreview|msnbot|baidu|duckduckgo|mediapartners-google|teoma|slurp/gi.test(e),this.is_mobile=-1!==e.indexOf("mobile")||this.is_screen_mobile||this.is_screen_tablet_s,this.is_desktop=!this.is_mobile,this.is_touch="ontouchstart"in window,this.is_webkit=-1!==e.indexOf("webkit"),this.is_safari=-1!==e.indexOf("safari")&&e.match(/version\/(\d+)/),this.is_firefox=-1!==e.indexOf("firefox"),this.is_mobile_ie=-1!==e.indexOf("iemobile"),this.is_ie=-1!==e.indexOf("trident")||-1!==e.indexOf("msie"),this.is_EDGE=-1!==e.indexOf("edge"),this.is_OSX=/iPad|iPhone|iPod|Macintosh/gi.test(e)},init:function(){}},flexbe_cli.message=function(e){var i=e.channel,t=e.title,n=e.text,o=e.msg;1===arguments.length&&"object"!==_typeof(e)&&(o=e),$.get("/mod/log",{channel:i,title:t,text:n,msg:o})},window.onpopstate=function(){flexbe_cli.modal.popstate()},document.addEventListener("DOMContentLoaded",function(){!function e(){if("undefined"!=typeof jQuery){flexbe_cli.events._init(),flexbe_cli.run._init();try{document.body.classList.add("ready")}catch(e){document.body.className+=" ready"}flexbe_cli.isInited=!0}else setTimeout(e,10)}()}),document.addEventListener("load",function(){flexbe_cli.isLoaded=!0});
function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}flexbe_cli.events={_init:function(){$.observable=function(t){var n={_JQInit:function(){this._JQ=$(this)},emit:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.trigger(e,t),this},once:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.one(e,t),this},on:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.bind(e,t),this},off:function(e,t){return!this._JQ&&this._JQInit(),this._JQ.unbind(e,t),this}};return"object"!==_typeof(t)&&(t=this),Object.keys(n).forEach(function(e){t[e]=n[e].bind(t)}),n},$.observable(this),this._dispatchEvents()},_dispatchEvents:function(){var e=function(e,t){if(t&&t.event&&"core"===t.sender&&t.core&&t.core.$area){var n=t.core.is||e.type.replace(/_event$/,""),i="block"===n,o="modal"===n,s="inited"===t.event,f="updated"===t.event,r=o&&("opened"===t.event||"updated"===t.event&&t.core.isOpen),_="screen"===t.event&&i;(s||f)&&flexbe_cli.events.emit("entity_init",t),(_||r)&&flexbe_cli.events.emit("entity_screen",_extends(t,{state:t.state||r}))}};flexbe_cli.events.off("block_event.flexbe_events").on("block_event.flexbe_events",e),flexbe_cli.events.off("modal_event.flexbe_events").on("modal_event.flexbe_events",e),flexbe_cli.events.off("widget_event.flexbe_events").on("widget_event.flexbe_events",e),flexbe_cli.events.off("element_event.flexbe_events").on("element_event.flexbe_events",e)}};
flexbe_cli.lib={init:function(){var e=this;$(window).one("load.flexbe_lib",function(){e.lg()})},lg:function(){var e=this;if(!flexbe_cli.is_admin&&99!=flexbe_cli.theme_id){var o=".img_popup, .img-popup:not(.swiper-slide-duplicate .img-popup)",t=$(".lg-init, .component-media").filter(function(){return!$(e).parents(".lg-init, .component-media")[0]});flexbe_cli.run.is_screen_pc&&t.hasClass("lg-prevent-pc")||flexbe_cli.run.is_mobile&&t.hasClass("lg-prevent-mobile")||t.find(o).length&&flexbe_cli.require(["/_s/lib/jquery/lightGallery/css/lightgallery.css","/_s/lib/jquery/lightGallery/js/lg-spaced-bundle.min.js"],function(){var l=!1;function n(){history.state&&history.state.lg&&history.replaceState(null,null,"#")}t.each(function(e,t){var i=$(t);i.lightGallery({selector:o,counter:!1,download:!1,slideEndAnimation:!1,getCaptionFromTitleOrAlt:!0,closable:!0,loop:"1"===i.find(".component-slider").attr("data-loop"),easing:"ease-out",hideBarsDelay:6e3,zoomIcons:!1,actualSize:!1,enableSlide:!$(t).attr("data-lg-single")}),i.on("onBeforeOpen.lg",function(){l=!0,n(),history.state&&history.state.lg||history.pushState({lg:!0},null,"#image")}),i.on("onBeforeClose.lg",function(){history.state&&history.state.lg&&(l=!1,history.back()),n()})}),n(),window.addEventListener("popstate",function(){!l||history.state&&history.state.lg||t.each(function(e,t){var i=$(t),l=i.data("lightGallery");l&&l.destroy()})})})}}};
flexbe_cli.require=function(r,t,i,e){void 0===r&&(r=""),void 0===t&&(t=function(){}),void 0===i&&(i=15e3),void 0===e&&(e=!1),r&&0!==r.length||t(!1);var n=flexbe_cli.require.loaded;if(!e){"string"==typeof r&&(r=[r]);var o=0,d=function(e){var i=r.every(function(e){return"boolean"==typeof n[e]});o+=1,i&&o===r.length&&t(e)};return Array.isArray(r)&&r.forEach(function(e){flexbe_cli.require(e,d,i,!0)}),!1}if(!0===n[r])t(!0);else if(Array.isArray(n[r]))n[r].push(t);else{var l,c=!1,a=function(i){if(void 0===i&&(i=!0),!c){c=!0,clearTimeout(l);var e=n[r];n[r]=i,e.forEach(function(e){"function"==typeof e&&e(i)})}};if(n[r]=[t],/\.css$/.test(r)){var u=document.createElement("link");u.onerror=a.bind(this,!1),u.onload=a.bind(this,!0),l=setTimeout(a.bind(this,"timeout"),i),u.rel="stylesheet",u.href=r,document.body.appendChild(u)}else{var f=document.createElement("script");f.onload=a.bind(this,!0),f.onerror=a.bind(this,!1),l=setTimeout(a.bind(this,"timeout"),i),f.async=!0,f.src=r,document.body.appendChild(f)}}},flexbe_cli.require.loaded={};
flexbe_cli.lang={basic:"en",current:window.lang&&window.lang.current||"ru",currency:window.lang&&window.lang.currency||"₽",ru:{menu:"Меню",form:{personal_data_text:'<p>Нажимая на кнопку, вы даете согласие на обработку <a href="%s" target="_blank">персональных данных</a></p>',required:"Поле должно быть заполнено",email:"Некорректный адрес электронной почты",digits:"Поле должно содержать только цифры",minlength:"Минимальная длина - 5 цифр",selectFiles:"Выберите файлы",remove:"Удалить"},quiz:{step:"Шаг",cancel:"Отмена",prev:"Назад",next:"Далее",from:"из",skip:"Пропустить шаг"},timer:{dd:"Дней",hh:"Часов",mm:"Минут",ss:"Секунд"},cart:{empty:"В корзине ничего нет"}},en:{form:{personal_data_text:"",required:"This field is required",email:"Please enter a valid email address",digits:"Please enter only digits",minlength:"Please enter at least 5 digits",selectFiles:"Select files",remove:"Remove"},quiz:{step:"Step",cancel:"Cancel",prev:"Back",next:"Next",from:"from",skip:"Skip"},timer:{dd:"Days",hh:"Hours",mm:"Minutes",ss:"Seconds"},menu:"Menu",cart:{empty:"Cart is empty"}},de:{form:{required:"Dieses Feld ist ein Pflichtfeld",email:"Geben Sie bitte eine gültige E-Mail Adresse ein",digits:"Geben Sie bitte nur Ziffern ein",minlength:"Geben Sie bitte mindestens 5 Ziffern ein",selectFiles:"Wählen Sie die Dateien",remove:"Löschen"},quiz:{step:"Schritt",cancel:"Abbrechen",prev:"Zurück",next:"Weiter",from:"aus",skip:"Überspringen"},timer:{dd:"Days",hh:"Stunden",mm:"Minutes",ss:"Sekunden"},menu:"Menü"},fr:{form:{required:"Ce champ est obligatoire",email:"Veuillez fournir une adresse électronique valide",digits:"Veuillez fournir seulement des chiffres",minlength:"Veuillez fournir au moins 5 chiffres",selectFiles:"Sélectionnez les fichiers",remove:"Effacer"},quiz:{step:"Étape",cancel:"Annuler",prev:"Retour",next:"Suivant",from:"de",skip:"sauter"},timer:{dd:"Jours",hh:"Heures",mm:"Minutes",ss:"Secondes"},menu:"Menu"},es:{form:{required:"Este campo es obligatorio",email:"Escribe una dirección de correo válida",digits:"Escribe sólo dígitos",minlength:"Por favor, no escribas menos de 5 dígitos",selectFiles:"Seleccione los archivos",remove:"Borrar"},timer:{dd:"Días",hh:"Horas",mm:"Minutos",ss:"Segundos"},menu:"Menú"},it:{form:{required:"Campo obbligatorio",email:"Inserisci un indirizzo email valido",digits:"Inserisci solo numeri",minlength:"Inserisci almeno 5 numeri",selectFiles:"Selezionare i file",remove:"Cancellare"},timer:{dd:"Giorni",hh:"Ore",mm:"Minuti",ss:"Secondi"},menu:"Menu"},pl:{form:{required:"To pole jest wymagane",email:"Proszę o podanie prawidłowego adresu email",digits:"Proszę o podanie samych cyfr",minlength:"Proszę o podanie przynajmniej 5 cyfr",selectFiles:"Wybierz pliki",remove:"Usunąć"},timer:{dd:"Dni",hh:"Godziny",mm:"Minuty",ss:"Sekundy"},menu:"Menu"},ge:{form:{required:"ეს ველი სავალდებულოა",email:"გთხოვთ შეიყვანოთ სწორი ფორმატით",digits:"დაშვებულია მხოლოდ ციფრები",minlength:"შეიყვანეთ მინიმუმ 5 ციფრი",selectFiles:"აირჩიეთ ფაილი",remove:"წაშლა"},timer:{dd:"დღეები",hh:"საათი","მმ":"ოქმი",ss:"წამი"},menu:"მენიუ"},ua:{form:{required:"Поле має бути заповнено",email:"Некоректна адреса електронної пошти",digits:"Поле повинно містити тільки цифри",minlength:"Мінімальна довжина - 5 цифр",selectFiles:"Виберіть файли",remove:"Видалити"},timer:{dd:"Дні",hh:"Години",mm:"Хвилини",ss:"Секунди"},menu:"Меню"},by:{form:{required:"Поле павінна быць запоўнена",email:"Некарэктны адрас электроннай пошты",digits:"Поле павінна ўтрымліваць толькі лічбы",minlength:"Мінімальны даўжыня - 5 лічбаў",selectFiles:"Выберыце файлы",remove:"Выдаліць"},timer:{dd:"Дні",hh:"Гадзіннік",mm:"Хвіліны",ss:"Секунды"},menu:"Меню"},kz:{form:{required:"Міндетті өріс",email:"Жарамсыз электрондық пошта мекенжайы",digits:"Далалық тек сандардан тұруы тиіс",minlength:"Ең аз ұзындығы - 5 сандар",selectFiles:"Файлдарды таңдаңыз",remove:"Жою"},timer:{dd:"Күндері",hh:"Сағаттар",mm:"Минут",cc:"Секунд"},menu:"Мәзір"},get:function(e,i){if(e){if(i&&this[i]||(i=this.current||this.basic),"currency"===e)return this.currency;var r=e.split("."),n=this[i];for(var s in r){if(!(n=n[r[s]])&&i!==this.basic)return this.get(e,this.basic)}return n}},init:function(e){var t=this;void 0===e&&(e="body"),$("[data-lang]",e).each(function(e,i){var r=$(i).attr("data-lang"),n=$(i).attr("data-lang-content"),s=String(t.get(r));$(i).html(s.replace(/%s/,n))})}};
flexbe_cli.resize={old_h:window.innerHeight,width:window.innerWidth,height:window.innerHeight,docHeight:document.body.scrollHeight,init:function(){var i,n=this;$(window).on("resize orientationchange",function(){n.width=window.innerWidth,n.height=window.innerHeight,clearTimeout(i),i=setTimeout(function(){flexbe_cli.run.deviceInfo(),$(window).trigger("resized")},80)});!function i(){var e=document.body.scrollHeight;e!=n.documentHeight&&(n.documentHeight=e,$(window).trigger("documentresize")),setTimeout(i,150)}()}};
flexbe_cli.scroll={latest:window.pageYOffset,init:function(){var t=this;$("body");this.latest=window.pageYOffset,$(window).on("scroll.coreScroll",function(e){t.latest=window.pageYOffset}),this.scrollImprovement.init()},scrollImprovement:{scrollTimer:0,pointerState:0,init:function(){this.stopScrollEvent(),this.stopAnimations(),this.pointerEvents()},stopScrollEvent:function(){var t=this,o=flexbe_cli.scroll.latest;$(window).on("scroll.scrollendEvent",function(){var e=o>flexbe_cli.scroll.latest?"up":"down";clearTimeout(t.scrollTimer),t.scrollTimer=setTimeout(function(){o=flexbe_cli.scroll.latest,$(window).trigger("scrollend",{direction:e})},200)})},stopAnimations:function(){var t=$("body, html");t.bind("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(e){(0<e.which||"mousedown"==e.type||"mousewheel"==e.type||"touchmove"==e.type)&&t.stop()})},pointerEvents:function(){var e=this;flexbe_cli.is_admin||($(window).on("scroll.pointerEventsDisable",function(){0===e.pointerState&&($("body").addClass("disable-pointer-events"),e.pointerState=1)}),$(window).on("scrollend.pointerEventsDisable",function(){1===e.pointerState&&(e.pointerState=0,$("body").removeClass("disable-pointer-events"))}))}},smoothScroll:function(){var l=this;if(!flexbe_cli.run.is_OSX){var n,s,r=$("html, body"),c=flexbe_cli.resize.height/4,a=0,u=0;$(window).on("mousewheel DOMMouseScroll",function(e){var t,o="mousewheel"==e.type?e.originalEvent.wheelDelta/120:"DOMMouseScroll"==e.type?-e.originalEvent.detail/3:0,i=o*c;o*c!=0&&(e.preventDefault(),t=i,clearTimeout(s),clearTimeout(n),a+=t,300,u||(u=1,r.stop().animate({scrollTop:l.latest-a},300)),s=setTimeout(function(){u=0},16),n=setTimeout(function(){r.finish(),u=a=0},300))})}}};
function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}).apply(this,arguments)}flexbe_cli.components={init:function(){var o=this,i=function(e,t,i){o.image.setAll(e),o.background.loadImage(e),"block"===i&&t&&o.background.video.play(e),t&&o.slider.init(e),"pageload"!==i&&(o.maps.init(e),o.slider.toggleAutoplay(e,t))};this.links(),this.video.init(),flexbe_cli.events.on("entity_init.flexbe_components",function(e,t){var i;i=t.core.$area,t.core.is,flexbe_cli.lang.init(i),o.background.init(i),o.image.init(i),o.button.init(i),flexbe_cli.quiz&&flexbe_cli.quiz.init(i)}),flexbe_cli.events.on("entity_screen.flexbe_components",function(e,t){i(t.core.$area,t.state,t.core.is)}),$(window).off("load.flexbe_components").one("load.flexbe_components",function(){setTimeout(function(){flexbe_cli.block.$list.find(".b_block").each(function(e,t){i(t,!1,"pageload")})},500)})},links:function(e){void 0===e&&(e="body"),$(e).off("click.component-links").on("click.component-links","a[href], a[data-action]",function(e){var t=$(e.currentTarget).attr("href"),i=$(e.currentTarget).attr("data-action");if(t||i){if(/#{1,2}.+/.test(t)){if(1===flexbe_cli.theme_id)$(e.currentTarget).closest(".mobile-menu").removeClass("active");else $("body > .mobile-menu").trigger("close"),$("body").removeClass("overflow fixed");var o=(t=t.replace(/^(?:\.\/)#{2}/,"#").trim()).trim().split("#"),a=""===o[0]||"./"===o[0]?location.pathname:o[0],n=o[o.length-1];if(a!==location.pathname)return!0;var r=flexbe_cli.block.$list.find(".b_"+n+', ._anchor[name="'+n+'"]').eq(0),s=flexbe_cli.modal.$list.find(".m_"+n+', ._anchor[name="'+n+'"]').eq(0);if(r.length){flexbe_cli.events.emit("modal_command",{command:"close"});var l=r.closest(".b_block");flexbe_cli.block.scrollTo(l)}else if(s.length){if(flexbe_cli.is_admin)return!0;var c=s.closest(".m_modal").data("id");flexbe_cli.events.emit("modal_command",{command:"open",id:c,data:{}})}e.preventDefault(),e.stopPropagation()}else if("button"===i){var d=$(e.currentTarget).closest("[data-item-id]").find(".component-button");d[0]&&d[0].click()}return!0}})},button:{init:function(m){var e=m.closest(".w_widget")[0]?m:m.find("> .container-fluid, > .modal-data"),h=m.data("id");e.off("click.component-button").on("click.component-button",".component-button",function(e){if(flexbe_cli.is_admin)return e.preventDefault(),!0;var t=$(e.currentTarget),i=t.closest("[data-item-id], .modal-data").eq(0),o=t.attr("data-action"),a=t.attr("data-modal-id"),n=t.data("product");if(o){var r=flexbe_cli.stat.getGoal(o,a);flexbe_cli.stat.reach_goal(r);try{var s=t.find('[name="goal"]').val();s&&flexbe_cli.stat.reach_goal(s);var l=t.find('[name="goal_html"]').val();l&&($("body").find(".button-html-goal").detach(),$("body").eq(0).append('<div class="button-html-goal" style="display:none"></div>'),$("body").find(".button-html-goal").html(l))}catch(e){}if(i[0]&&"link"!==o&&"file"!==o&&"close"!==o){var c=i.find(".price, .item-price, .main-price").eq(0).clone();c.find("del, s").remove();var d=i.find(".name, .title, .item-title, .text_title").eq(0),f=i.find("[data-img-id]").filter(function(e,t){return!$(t).closest(".swiper-slide-duplicate").length}).eq(0);(n=_extends({count:1,img:!!(f.length&&f.attr("data-img-id")&&f.attr("data-img-name"))&&"/img/"+f.attr("data-img-id")+"_200/"+f.attr("data-img-name"),title:d.text().trim()||"-",price:parseFloat(c.text().replace(/[,.]/g,".").replace(/\.$/,"").replace(/[^\d.]/g,""))||0},n)).title&&"-"!==n.title||(n=!1)}if(n&&"object"==_typeof(n)&&!n.id&&(n.id=flexbe_cli.p_id+"_"+h+"_"+(i.data("itemId")||0)+(m.data("multivar")||"")),n=!!n&&[n],o.match(/^modal|^form/)&&a){if(!flexbe_cli.modal.find(a))a=parseInt(String(h).split("_")[0],10)+"_"+a;flexbe_cli.events.emit("modal_command",{command:"open",id:a,data:{items:n}})}else n[0]&&o.match(/^cart$/)?(flexbe_cli.events.emit("cart_command",{command:"add",item:n[0]}),t.addClass("animate-add-to-cart"),setTimeout(function(){t.removeClass("animate-add-to-cart"),t.closest(".m_modal").length&&flexbe_cli.events.emit("modal_command",{command:"close"})},1600)):"quiz"===o?flexbe_cli.events.emit("quiz_command",{command:"start",id:h}):"close"===o&&flexbe_cli.events.emit("modal_command",{command:"close"})}})}},image:{done:[],init:function(){},setAll:function(e){var i=this;if(!flexbe_cli.is_admin){var t=$(e).attr("data-id");if(0<=this.done.indexOf(t))return;this.done.push(t)}$(".component-image",e).not(".lazyload, .component-slider .component-image").each(function(e,t){i.set(t)})},set:function(o){var a=this;if(o&&!o.processed){o.processed=!0;var n=o.querySelector("img"),r=o.querySelector(".loading-img"),s=this.getImageData(o),e=s.resizable&&200<s.offsetWidth;if(!n)return!1;if(e){var t=n.src||this.getImageUrl(s,100);c(t),o.classList.add("loading"),l(t,function(e){var t=a.getOptimalParams(s.offsetWidth,s.offsetHeight,e.naturalWidth,e.naturalHeight),i=a.getImageUrl(s,t.width);l(i,function(){c(i),d()})})}else{var i=this.getImageUrl(s,2*s.offsetWidth);n.src&&n.src!==i?l(i,function(){c(i),d()}):(c(i),d())}}function l(e,t){var i=new Image;i.onload=function(){t(i)},i.src=e}function c(e){var t="url("+e+")",i=s.x+" "+s.y;n&&(n.src=e),r&&(r.style.backgroundImage=t,r.style.backgroundPosition=i),"background"===s.type&&(o.style.backgroundImage=t,o.style.backgroundPosition=i)}function d(){o.classList.remove("loading")}},getImageData:function(e){if(!e)return!1;var t={x:e.getAttribute("data-img-x"),y:e.getAttribute("data-img-y"),id:e.getAttribute("data-img-id"),type:e.getAttribute("data-img-type"),name:""+e.getAttribute("data-img-name"),offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight};if(t.ext=e.getAttribute("data-img-ext"),!t.ext){var i=t.name.match(/\.([a-z]{1,4})$/);t.ext=i&&i[1]||"jpg"}return t.resizable="svg"!==t.ext,!!(t.id&&t.name&&t.type)&&t},getOptimalParams:function(e,t,i,o){var a,n,r=o/i,s=t/e,l=Math.max(1,window.devicePixelRatio||1);return 1===l&&e<=200&&(l=2),r<s?(a=t/r,n=t):n=(a=e)*r,a=Math.floor(a*l),n=Math.floor(n*l),2560<a&&(n=(a=2560)*r),{width:a,height:n}},getImageUrl:function(e,t){return(t=t||e.width)&&"big"!==e.type&&"svg"!==e.ext?"/img/"+e.id+"_"+t+"/"+e.name:"/img/"+e.id+"/"+e.name},replacePlaceholder:function(e){e&&0!==e.length&&e.each(function(e,t){var i=$(t).data("src"),o=$(t).data("srcset"),a=new Image;a.onload=function(){i&&(t.src=i),o&&(t.srcset=o),$(t).addClass("loaded")},i&&(a.src=i),o&&(a.srcset=o)})}},slider:{stack:{},init:function(n){var r=this,s=$(n).attr("data-id"),e=$(".component-slider",n);e.length&&flexbe_cli.require("/_s/lib/swiper/swiper.v4.js",function(){e.each(function(e,t){var i=s?$(n):$(t).parents("[data-id]"),o=s||$(i).attr("data-id"),a=r.setSlider(i,e,t);a&&(Array.isArray(r.stack[o])||(r.stack[o]=[]),r.stack[o].push(a))})})},toggleAutoplay:function(e,t){if(flexbe_cli.is_admin)return!1;var i=$(e).attr("data-id");if(!Array.isArray(this.stack[i]))return!1;this.stack[i].forEach(function(e){return e&&e.autoplay&&e.autoplay.running&&e.autoplay[t?"run":"pause"]()})},setSlider:function(i,o,a){var e=a.querySelector(".slider-wrapper");if(!e.swiper){var t=$(a),n=a.querySelector(".slider-pagination"),r=a.querySelector(".slider-prev"),s=a.querySelector(".slider-next"),l=function(e){$(".component-image",e).each(function(e,t){flexbe_cli.components.image.set(t)})},c=Math.floor(a.getAttribute("data-count")),d=!!(!flexbe_cli.is_admin&&1<c&&Math.floor(a.getAttribute("data-loop"))),f=Math.max(0,Math.min(c-1,Math.floor(i["slideMove"+o])||0)),m=Math.floor(t.data("autoplay"))||!1;if(!flexbe_cli.is_admin&&m&&(m={delay:1e3*m,stopOnLast:!0}),l(t.find('[data-real-index="'+f+'"]')),1<c&&t.one("mouseenter.loadImages",function(){l(t)}),!(c<=1)){var h=new Swiper(e,{wrapperClass:"slider",slideClass:"slider-item",slideActiveClass:"active",noSwipingClass:"redactor-box",initialSlide:f,speed:450,navigation:{prevEl:r,nextEl:s},pagination:{el:n,type:a.getAttribute("data-pagination"),clickable:!0},autoplay:m,loop:d,loopedSlides:1,slidesPerView:1,slidesPerColumn:1,spaceBetween:0,simulateTouch:!0,touchMoveStopPropagation:!1,preventClicksPropagation:!1,preventClicks:!1,runCallbacksOnInit:!1,on:{init:function(){$(".swiper-slide-duplicate .img-popup",this.$wrapperEl).on("click",function(e){var t=$(e.currentTarget).parents(".swiper-slide-duplicate");$(".img-popup",t.siblings(".slider-item[data-real-index="+t.attr("data-real-index")+"]")).trigger("click"),e.preventDefault()})},slideChange:function(){var e=this.slides[this.activeIndex],t=e.getAttribute("data-type");i["slideMove"+o]=this.realIndex,a.setAttribute("data-current-content",t),l($(e).add($(e).next()).add($(e).prev()))}}}),u=$(i).data("_core");return u&&"block"===u.is&&!u.tween.onscreen&&h&&h.autoplay&&h.autoplay.pause(),h}}}},video:{instances:{},init:function(){var n=this;flexbe_cli.events.on("entity_init.componentvideo",function(e,t){var i=t.core,o=i.id,a=i.$area.find(".component-video").toArray();a.length?n.instances[o]=a.map(function(e){return n.componentVideo(o,e)}):delete n.instances[o]}),flexbe_cli.events.on("entity_screen.componentvideo",function(e,t){var i=t.core.id,o=n.instances[i];o&&o.forEach(function(e){return e.view(t.state)})})},componentVideo:function(e,t){function i(){this.ownerId=e,this.$component=$(t),this.isInit=!1,this.isView=!1,this.isRun=!1,this.init()}return i.prototype.init=function(){this.isInit=!0,"function"==typeof this.onInit&&this.onInit()},i.prototype.view=function(e){var t=e&&!this.isView;e&&(this.isView=!0),"function"==typeof this.onView&&this.onView({isFirstView:t,state:e})},i.prototype.onInit=function(){var a=this;$(".video-preview",this.$component).on("click",function(e){var t=$(e.currentTarget).parents(".slider-wrapper").get(0);e.preventDefault(),t&&t.swiper&&t.swiper.autoplay.pause();var i=a.$component.find("iframe"),o=i.attr("data-src")||i.attr("src");o&&(i[0].src=o+"&autoplay=1"),setTimeout(function(){a.$component.attr("data-state","play")},250)})},i.prototype.onView=function(e){if(!e.state||!e.isFirstView)return!1;var t=this.$component.find("iframe"),i=t.attr("data-src"),o=t.attr("src");i&&!o&&(t[0].src=""+i)},new i}},maps:{init:function(e){var i=this;$(".component-map",e).each(function(e,t){i.create(t)})},create:function(e){var t=this,i=$(e),o=i.data("inited"),a=i.data("data");if(o)return!1;i.data("inited",!0),i.removeAttr("data-data"),"google"==a.type?flexbe_cli.require(["//maps.googleapis.com/maps/api/js?key=AIzaSyAuc1CX3_a9QASrIlndml62145Zb65ea0M"],function(){t.google.init(i,a),i.removeClass("loading")}):flexbe_cli.require(["//api-maps.yandex.ru/2.1/?lang=ru_RU"],function(){ymaps.ready(function(){t.yandex.init(i,a),i.removeClass("loading")})})},yandex:{init:function(e,t){this.create(e,t),this.setPlaces(e,t.places),this.events(e,t),this.fixBehavior(e),e.trigger("mapInit",e,t)},create:function(e,t){var i=e.data("map");return i&&"function"==typeof i.destroy&&i.destroy(),i=new ymaps.Map(e.find(".map")[0],{center:t.center,zoom:t.zoom,controls:["zoomControl"],behaviors:["default","scrollZoom"],type:"yandex#map"}),e.data("map",i),i},setPlaces:function(o,e){var a=o.data("map");if(a){a.geoObjects.removeAll();var t=ymaps.templateLayoutFactory.createClass('<svg title="$[properties.balloonContent]" class="placemark" width="32" height="48" viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36 0 0 5.36 0 12c0 8 12 20 12 20s12-12 12-20c0-6.64-5.36-12-12-12zm0 8a4 4 0 0 1 4 4c0 2.22-1.78 4-4 4a4 4 0 0 1-4-4c0-2.2 1.8-4 4-4z" fill="$[properties.color]" fill-rule="evenodd"/></svg>');ymaps.layout.storage.add("custom#placemark",t),e.forEach(function(e,t){e.color=e.color||"#3D52B0";var i=new ymaps.Placemark(e.coords,{balloonContentHeader:e.name||!1,balloonContent:e.address,color:e.color},{hideIconOnBalloonOpen:!1,balloonOffset:[0,-48],balloonCloseButton:!1,iconLayout:"custom#placemark",iconShape:{type:"Rectangle",coordinates:[[-16,-48],[16,0]]}});i.events.add("balloonopen",function(){o.trigger("balloonOpen",t,e)}),a.geoObjects.add(i),e._mark=i})}},events:function(e,o){var a=e.data("map");a&&(e.on("selectMark",function(e,t){if(o.places.length&&o.places[t]){var i=o.places[t];a.setCenter(i.coords,o.zoom,{duration:350,checkZoomRange:!0}).then(function(){a.setCenter(i.coords)}),i._mark&&i._mark.balloon.open()}}),e.on("resizeMap",function(e,t){a.container.fitToViewport()}))},fixBehavior:function(e){var t,i=e.data("map");i&&(i.behaviors.disable("scrollZoom"),e.off("mouseenter.preventzoom").on("mouseenter.preventzoom",function(){t=setTimeout(function(){i.behaviors.enable("scrollZoom")},500)}),e.off("mouseleave.preventzoom").on("mouseleave.preventzoom",function(){t&&(clearTimeout(t),i.behaviors.disable("scrollZoom"))}),flexbe_cli.run.is_mobile&&i.behaviors.disable("drag"))}},google:{init:function(e,t){this.create(e,t),this.styleMap(e,t),this.setPlaces(e,t.places),this.events(e,t),this.fixBehavior(e),e.trigger("mapInit",e,t)},create:function(e,t){var i=e.data("map");return i&&"function"==typeof i.destroy&&i.destroy(),i=new google.maps.Map(e.find(".map")[0],{center:{lat:t.center[0],lng:t.center[1]},zoom:t.zoom,disableDefaultUI:!0,panControl:!0,zoomControl:!0,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1}),e.data("map",i),i},setPlaces:function(a,n){var r=this,s=a.data("map");s&&n.forEach(function(e,t){var i='<svg width="32" height="48" viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36 0 0 5.36 0 12c0 8 12 20 12 20s12-12 12-20c0-6.64-5.36-12-12-12zm0 8a4 4 0 0 1 4 4c0 2.22-1.78 4-4 4a4 4 0 0 1-4-4c0-2.2 1.8-4 4-4z" fill="'+(e.color||"#222")+'" fill-rule="evenodd"/></svg>',o=new google.maps.Marker({position:{lat:e.coords[0],lng:e.coords[1]},map:s,visible:!0,animation:google.maps.Animation.DROP,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(i)}});(e._mark=o).addListener("click",function(){r.selectMark(a,n,t)})})},styleMap:function(e,t){var i=e.data("map");if(i)if("default"!=t.style&&t.style){var o="/_s/lib/google/maps/styles/"+t.style+".json";$.getJSON(o,function(e){e&&Array.isArray(e)&&i.setOptions({styles:e})})}else i.setOptions({styles:[]})},selectMark:function(e,t,i,o){void 0===o&&(o=!1);var a=e.data("map");if(a&&t&&t.length&&t[i]){t.forEach(function(e){return e._info&&e._info.close()});var n=t[i],r="";n.name&&(r+='<div style="margin-bottom: 3px;"><strong>'+n.name+"</strong></div>"),n.address&&(r+="<div>"+n.address+"</div>"),n._info=new google.maps.InfoWindow({content:r}),n._info.open(a,n._mark),o&&a.panTo({lat:n.coords[0],lng:n.coords[1]}),e.trigger("balloonOpen",i,n)}},events:function(i,o){var a=this,n=i.data("map");n&&(i.on("selectMark",function(e,t){a.selectMark(i,o.places,t,!0)}),i.on("resizeMap",function(e,t){google.maps.event.trigger(n,"resize")}))},fixBehavior:function(e){var t,i=e.data("map");i&&(e.off("mouseenter.preventzoom").on("mouseenter.preventzoom",function(){t=setTimeout(function(){i.setOptions({scrollwheel:!0})},500)}),e.off("mouseleave.preventzoom").on("mouseleave.preventzoom",function(){t&&(clearTimeout(t),i.setOptions({scrollwheel:!1}))}))}}},background:{frames:{},factor:.6,init:function(e){var t=e.find(".component-bg");"image"===t.data("type")&&t.data("parallax")?this.setupParallax(e):(this.loadImage(e),this.getParallaxOffset(e))},setupParallax:function(e){var a=e.find(".component-bg"),i=+e.attr("data-id"),o="background_"+i,n=1.5<=window.devicePixelRatio?1960/window.devicePixelRatio:1960,r=a.data("parallax"),s=!1,t=function(){function e(){var e=this;this.visible=!1,this.factor=1===r||2===r?.3:0,this.overlay=a.find(".overlay")[0],this.zoomRatio=3===r||4===r?.2:0,this.zoomType=3===r||4===r?2:0,this.zoomD=3===r?.5:4===r?1:0,this.fadeout=1===r?0:3===r?.5:1,this.size=!1,this.outScreen=document.createElement("canvas"),this.imSize={w:0,h:0},this.ovOp=+$(this.overlay).css("opacity"),this.$outer=$(".parallax-outer",a),this.$loaderImage=$("loader-image",this.$outer),this.canvas=$("canvas",this.$outer)[0];var t=this.$outer.width(),i=this.$outer.height(),o=this.$outer.offset()||{};this.blSize={w:t<=n?t:n},this.blSize.r=this.blSize.w/t,this.blSize.h=this.blSize.r*i,this.blSize.x=this.blSize.r*o.top,this.winSize={w:$("window").width()*this.blSize.r,h:$("window").height()*this.blSize.r},this.blSizeOr={w:t,h:i,x:o.top},this.offCtx=this.outScreen.getContext("2d",{alpha:!1}),this.canvas.width=0,this.canvas.height=0,this.ctx=this.canvas.getContext("2d",{alpha:!1}),this.img=document.createElement("img"),this.img.onload=function(){e.loaded=!0,a.removeClass("loading"),setTimeout(function(){e.$loaderImage.remove()},300),e.imSize={w:e.img.width,h:e.img.height},e.imSize.r=e.imSize.h/e.imSize.w,e.updateCanvasSource()},this.img.src=this.$outer.attr("data-image"),this.position={x:+this.$outer.data("bg-pos-x").replace("%","")/100,y:+this.$outer.data("bg-pos-y").replace("%","")/100}}var t=e.prototype;return t.toggleRendering=function(e){if("boolean"!=typeof e)return!1;e!==this.visible&&(this.visible=e,$(this.overlay).toggleClass("will-change",e))},t.getCosPoint=function(e,t,i){return void 0===i&&(i=1),i<1-e&&(e=i),(1-Math.cos(Math.PI*e*t))/2},t.getZoomCoords=function(e){var t=1===this.zoomType?e:-1===this.zoomType?100-e:2===this.zoomType?100-100*this.getCosPoint(.01*e,2,this.zoomD):0,i={ratio:this.zoomRatio/100*t};return i.w=this.blSize.w*(1+i.ratio),i.h=this.blSize.h*(1+i.ratio),i.x=(i.w-this.canvas.width)/2,i.y=(i.h-this.blSize.h)/2,i},t.draw=function(e,t){var i,o=this;if(this.fadeout&&(i=1-(1-this.ovOp)*this.getCosPoint(.01*t,2,this.fadeout)),this.zoomRatio){var a=this.getZoomCoords(t);requestAnimationFrame(function(){o.overlay.style.opacity=i,o.ctx.drawImage(o.outScreen,Math.ceil(-1*a.x),Math.ceil(e*o.factor-o.winSize.h*o.factor-a.y),a.w,a.h),s=!1})}else{var n=Math.ceil(e*this.factor-this.winSize.h*this.factor);requestAnimationFrame(function(){o.overlay.style.opacity=i,o.ctx.drawImage(o.outScreen,0,n),s=!1})}},t.updateInst=function(){if(this.winSize.x=(window.scrollY||window.pageYOffset)*this.blSize.r,this.winSize.x+this.winSize.h>this.blSize.x-200&&this.winSize.x<this.blSize.x+this.blSize.h){this.toggleRendering(!0);var e=this.winSize.x+this.winSize.h-this.blSize.x,t=100-e/(this.blSize.h+this.winSize.h)*100;this.draw(e,t)}else this.toggleRendering(!1),s=!1},t.prerender=function(){this.loaded&&(this.fitToOuter(),this.outScreen.width=this.blSize.w,this.outScreen.height=this.zoomRatio?this.blSize.h:Math.ceil(this.size.offH),this.drawOffscreenImage(this.position.x,this.position.y))},t.updateCanvasSource=function(){this.prerender(),this.updateInst()},t.drawOffscreenImage=function(e,t){(e="number"==typeof e?e:.5)<0&&(e=0),(t="number"==typeof t?t:.5)<0&&(t=0),1<e&&(e=1),1<t&&(t=1);var i,o,a,n,r=this.offCtx.canvas.width,s=this.offCtx.canvas.height;s/r<=this.imSize.r?(i=0,o=((n=(a=r)*this.imSize.r)-s)*t*-1):(o=0,i=((a=(n=s)/this.imSize.r)-r)*e*-1),this.offCtx.drawImage(this.img,i,o,a,n)},t.fitToOuter=function(){var e=1.5<=window.devicePixelRatio?1600:1960;this.blSize={w:this.$outer.width()<=e?this.$outer.width():e},this.blSize.r=this.blSize.w/this.$outer.width(),this.blSize.h=this.blSize.r*this.$outer.height(),this.blSize.x=this.blSize.r*this.$outer.offset().top,this.winSize={w:$(window).width()*this.blSize.r,h:$(window).height()*this.blSize.r},this.canvas.width=this.blSize.w,this.canvas.height=this.blSize.h,this.canvas.style.transform="scale("+1/this.blSize.r+")";var t,i=Math.max(this.winSize.h,this.blSize.h),o=i-(i-Math.min(this.winSize.h,this.blSize.h))*(this.blSize.h>this.winSize.h?this.factor:1-this.factor),a=o/this.blSize.w;(t=this.imSize.r>=a?{w:this.blSize.w,h:this.blSize.w*this.imSize.r}:{h:o,w:o/this.imSize.r}).offH=o,t.x=(t.w-this.blSize.w)/2,this.size=t},t.destroy=function(){this.destroyed=!0,$(window).off("resize."+o+" documentresize."+o),$(window).off("scroll.component-bg-"+o),flexbe_cli.events.off("editor_change.bl.bg_"+o),this.outScreen.remove(),this.img.remove()},e}(),l=e.data("bgEffects");"object"===_typeof(l)&&l.destroy(),l=new t(e),e.data("bgEffects",l),$(window).off("resize."+o+" documentresize."+o).on("resize."+o+" documentresize."+o,function(){l&&l.updateCanvasSource()}),$(window).off("scroll.component-bg-"+o).on("scroll.component-bg-"+o,function(){!s&&l&&(s=!0,l.updateInst())}),flexbe_cli.events.off("editor_change.bl.bg_"+o).on("editor_change.bl.bg_"+o,function(e,t){t.entity&&+t.entity.id===i&&"editor_settings"===t.reason&&(l.ovOp=.01*t.entity.data.background.opacity,!s&&l&&(s=!0,l.updateInst()))})},loadImage:function(e){if(!flexbe_cli.is_admin){var t=$(".component-bg",e),i=t.find(".image"),o=i.find(".loader-image"),a=o.attr("data-src");if(a){var n=new Image;n.onload=function(){i.css("backgroundImage",""),t.removeClass("loading"),setTimeout(function(){o.remove()},300)},n.src=a}}},debounce:{},getParallaxOffset:function(e){var i=this,t=e.find('[data-parallax="true"]').find(".image-holder, .video_bg_container"),o=t.find(".image, .video_bg_player")[0],a=e.data("_core");if(o&&a)if(flexbe_cli.resize.height<a.tween.height?t.css("height",a.tween.height+"px"):t.css("height",""),(flexbe_cli.run.is_screen_pc||flexbe_cli.run.is_screen_small_pc)&&flexbe_cli.run.is_desktop){var n=!1;$(window).off("scroll.component-bg-"+a.id).on("scroll.component-bg-"+a.id,function(){!n&&a.tween.onscreen&&(n=!0,requestAnimationFrame(function(){var e=a.tween.start,t=1-(1-i.factor)*(a.tween.height/flexbe_cli.resize.height);t<0&&(t=i.factor/2),o.style.transform="translate3d(0, "+-(window.pageYOffset-e)*t+"px, 0)",n=!1}))})}else $(window).off("scroll.component-bg-"+a.id),o.style.transform="none"},video:{play:function(e,t){var i=$(e),o=$(".component-bg.bg-video",e);if(!o.length)return!1;if(t||(t=o.data("video")),!t||"youtube"!==t.type||"string"!=typeof t.id||t.id.length<1)return!1;if(flexbe_cli.run.is_screen_mobile||flexbe_cli.run.is_screen_tablet_s)return!1;if(o.data("video_bg_played")){if(t.id===o.data("video_bg_played"))return;this.destroy(i)}o.data("video_bg_played",t.id),flexbe_cli.require(["/_s/lib/jquery/youtubebackground/jquery.youtubebackground.js"],function(){o.YTPlayer({videoId:t.id,videoURL:t.url,callback:function(){setTimeout(function(){flexbe_cli.components.background.init(i)},1e3)}})})},destroy:function(e){var t=$(".component-bg.bg-video",e);t.data("ytPlayer")&&t.data("ytPlayer").destroy(),t.removeData("video_bg_played")}}}};
function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}flexbe_cli.block={data:{},proto:{is:"block",require:[],_on_init:function(e){var t=this;flexbe_cli.block.fixCoverHeight(this.$block),flexbe_cli.require(this.require,function(){t.on_load(e),t._tween(),t.on_init(e),t.isInit=!0,flexbe_cli.events.emit("block_event",{event:"inited",sender:"core",core:t}),t._tween()})},_on_update:function(e){var t=this;flexbe_cli.block.fixCoverHeight(this.$block),flexbe_cli.require(this.require,function(){t.on_load(e),t._tween(),t.on_init(e),t.on_update(e),flexbe_cli.events.emit("block_event",{event:"updated",sender:"core",core:t}),t._tween({force:!0})})},_on_focus:function(e){this.on_focus(e),flexbe_cli.events.emit("block_event",{event:"focus",sender:"core",core:this,state:e})},_on_screen:function(e){this.on_screen(e),flexbe_cli.events.emit("block_event",{event:"screen",sender:"core",core:this,state:e})},_on_view:function(e){this.on_view(e),flexbe_cli.events.emit("block_event",{event:"view",sender:"core",core:this,state:e})},_tween:function(e){var t=(void 0===e?{force:!1}:e).force,r=this,a=this.$block.outerHeight(),i=this.$block.outerWidth(),n=this.$block.offset().top;0===this.$block.index()&&a<10&&n<10&&(a=this.$block.next().outerHeight()),this.tween||(this.tween={}),this.tween.width=i,this.tween.height=a,this.tween.start=n,this.tween.end=n+a,(t||void 0===this.tween.focus)&&(this.tween.focus=!1),(t||void 0===this.tween.view)&&(this.tween.view=!1),(t||void 0===this.tween.onscreen)&&(this.tween.onscreen=!1);var o=this.$block.find(".container")[0];function s(){var e,t,i=flexbe_cli.resize.height-a;if(i<0&&(i=0),r.tween.fix=i,r.tween.position=1/r.tween.height*(window.pageYOffset-r.tween.start),r.tween.positionCenter=(e=window.pageYOffset+flexbe_cli.resize.height/2,t=r.tween.start+r.tween.height/2,(e-t+r.tween.height/2)/r.tween.height),!r.isInit)return!1;var n,o=r.tween.positionCenter;0<o&&o<1?r.tween.focus||(r.tween.focus=!0,r._on_focus(!0)):r.tween.focus&&(r.tween.focus=!1,r._on_focus(!1)),window.pageYOffset+flexbe_cli.resize.height>r.tween.start&&window.pageYOffset<r.tween.end?r.tween.onscreen||(r.tween.onscreen=!0,r._on_screen(!0)):r.tween.onscreen&&(r.tween.onscreen=!1,r._on_screen(!1)),(n=flexbe_cli.resize.height>=r.tween.height?r.tween.height/4:flexbe_cli.resize.height/3,window.pageYOffset+flexbe_cli.resize.height>r.tween.start+n&&window.pageYOffset<r.tween.end-n)?r.tween.view||(r.tween.view=!0,r._on_view(!0)):r.tween.view&&(r.tween.view=!1,r._on_view(!1))}this.tween.color=o&&getComputedStyle(o).color||"#fff",s(),$(window).off("scroll.tween_"+this.id).on("scroll.tween_"+this.id,s)},_on_msg:function(e,t){this.on_msg(e,t)},on_load:function(){},on_init:function(){},on_update:function(){},on_focus:function(){},on_screen:function(){},on_view:function(){},on_msg:function(){}},init:function(){var i,a=this;this.$list=$(".container-list, header, footer"),$("[data-b-id]",this.$list).each(function(e,t){a.bind(t)}),flexbe_cli.events.on("block_render.flexbe_block",function(e,t){if(t&&t.id&&~t.render.indexOf("template")){var i=$('[data-id="'+t.id+'"]',a.$list),n=a.bind(i,{}),o=n.core,r=n.inited;void 0!==o&&r&&"function"==typeof o._on_update&&o._on_update(t)}}),flexbe_cli.events.on("client_msg.flexbe_block",function(e,t){if(t&&t.id&&"block"===t.is){var i=$('[data-id="'+t.id+'"]',a.$list),n=a.bind(i).core;void 0!==n&&n._on_msg(t.msg,t.data)}}),$(window).on("resize orientationchange documentresize",$.debounce(this.updateTweens,80,this)),flexbe_cli.events.off("editor_change.flexbe_block").on("editor_change.flexbe_block",function(e,t){t&&t.reason&&"update_list"===t.reason&&/^block/.test(t.name)&&(clearTimeout(i),i=setTimeout(function(){a.updateTweens()},250))}),$(window).on("load.flexbe_block",function(){if(/^#/.test(location.hash)){var e=String(location.hash).replace(/^#{1,2}/,""),t=a.$list.find(".b_"+e+', .b_block ._anchor[name="'+e+'"]').eq(0);t&&a.scrollTo(t.closest(".b_block"))}})},bind:function(e,t){var i=(e=$(e)).attr("data-b-id"),n=e.data("_core"),o=!!n;return o||(this.data[i]||this.register(i),n=new this.data[i](e),e.data("_core",n),n._on_init(t)),{core:n,inited:o}},register:function(t,e){var i=this;if(void 0===e&&(e={}),t||console.log("Секция должна иметь уникальный номер"),"undefined"!=typeof jQuery){this.data[t]=function(e){this.$area=e,this.$block=e,this.template_id=t,this.id=e.data("id"),this.type=e.data("bType")||[]};var n=$.extend(!0,{},this.proto);this.data[t].prototype=_extends({},n,e)}else setTimeout(function(){return i.register(t,e)},20)},updateTweens:function(){this.$list.find("[data-b-id]").each(function(e,t){var i=$(t).data("_core");i&&i._tween()})},scrollTo:function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1),"object"!==_typeof(e)&&(e=$('.b_block[data-id="'+e+'"]'));var n=e.data("_core");if(n&&n.tween){var o=n.tween.start;i&&n.tween.height>flexbe_cli.resize.height?o=n.tween.start+(n.tween.height-flexbe_cli.resize.height)/2:t&&(o=n.tween.start-n.tween.fix/2,n.tween.fix<180&&flexbe_cli.run.is_screen_pc&&$('[data-b-type*="header"][data-b-type*="floating"]').length&&(o-=80)),$("body, html").animate({scrollTop:o})}},initHeaders:function(){var i=this;return 2===flexbe_cli.theme_id&&(this.setHeaders(),!!flexbe_cli.is_admin&&(flexbe_cli.events.off("editor_change.core_headers").on("editor_change.core_headers",function(e,t){t&&t.reason&&(t.entity&&t.entity.hasType("allow_head")||"editor_settings"===t.reason&&"overflow"===t.name)&&i.setHeaders(0)}),void flexbe_cli.events.off("layout_change.core_headers").on("layout_change.core_headers",function(e,t){i.setHeaders()})))},_setHeadersDebounce:0,setHeaders:function(e){var h=this;void 0===e&&(e=30),clearTimeout(this._setHeadersDebounce),this._setHeadersDebounce=setTimeout(function(){var e=$("header"),a=$(".container-list"),f='[data-b-type*="header"][data-b-type*="overflow"]',d='[data-b-type*="allow_head"]',l="b_head";if(e[0]){var t=a.find('[data-header-type="site"], [data-site-block-type="header"]');t.removeClass(l).removeAttr("data-header-type"),e.prepend(t)}a.find("."+l).each(function(e,t){var i=$(t),n=i.parents(".b_block"),o=n.attr("data-owner"),r=n.attr("data-id"),a=o&&o==r,s=i.is(f),c=n.is(d);!a||!s||!c?(i.removeClass(l).removeAttr("data-header-type"),i.parents(".b_block, .flexbe-block-replace-container").last().before(i)):h.fixHeaderHeight(n,i)}),a.find(""+f).not("."+l).each(function(e,t){var i=$(t),n=i.attr("data-owner");if(!n){var o=i.nextAll(".b_block").eq(0);o.is(d)&&(n=o.attr("data-id"))}var r=a.find(".b_block[data-id="+n+"]").filter(d).eq(0);r.length&&(r.prepend(t),i.addClass(l),h.fixHeaderHeight(r,i))}),e.find(f).each(function(e,t){var i=["> .b_block:not([data-abtest-variant])"," > .b_block[data-abtest-active]"," > .flexbe-block-replace-container > .flexbe-block-replace-new"].join(", "),n=$(t),o=a.find(i).eq(0).filter(d);o&&o.length&&!o.find("> ."+l).length&&!o.prev().is('[data-b-type*="overflow"]')&&(o.find("> ."+l).remove(),o.prepend(t),n.attr("data-header-type","site").addClass(l),h.fixHeaderHeight(o,n))})},e)},fixHeaderHeight:function(e,t){var i=this;if(e[0]&&t[0]){var n=e.attr("data-id"),o=e.find("> .container-fluid").eq(0).find("> .container").eq(0),r=o.children().eq(0);o.css("paddingTop","");var a=parseInt(o.css("paddingTop"),10),s=t.outerHeight(),c=r.offset().top-a-o.offset().top,f=s-c,d=r.outerHeight(!0)-r.outerHeight();0<=c&&c<s&&o.css("paddingTop",f+d-c+"px"),$(window).off("resized.fixHeaderHeight"+n).on("resized.fixHeaderHeight"+n,function(){i.fixHeaderHeight(e,t)})}},fixCoverHeight:function(e){var t=this,i=e.find(".cover"),n=i.length&&e.prevAll(".b_block").eq(0).filter('[data-b-type*="header"]').not('[data-b-type*="overflow"]');if(i.length){var o=e.attr("data-id"),r=flexbe_cli.resize.height,a=n.outerHeight()||0;5<a&&(a-=5);var s=r-a+2;flexbe_cli.run.is_ie&&i.css("height",s+"px"),i.css("min-height",s+"px"),$(window).off("resized.fixCoverHeight"+o).on("resized.fixCoverHeight"+o,function(){100<Math.abs(flexbe_cli.resize.height-r)&&(r=flexbe_cli.resize.height,t.fixCoverHeight(e))})}}};
function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}flexbe_cli.modal={data:{},opened:{},proto:{is:"modal",require:[],isInit:!1,isOpen:!1,_on_init:function(e){var t=this;flexbe_cli.require(this.require,function(){t.on_load(e),t.on_init(e),t.isInit=!0,flexbe_cli.events.emit("modal_event",{event:"inited",sender:"core",core:t})})},_on_update:function(e){var t=this;flexbe_cli.require(this.require,function(){t.on_load(e),t.on_update(e),flexbe_cli.events.emit("modal_event",{event:"updated",sender:"core",core:t})})},_on_open:function(e){this.isOpen=!0,this.on_open(e),flexbe_cli.events.emit("modal_event",{event:"opened",sender:"core",core:this})},_on_close:function(){this.isOpen=!1,this.on_close(),flexbe_cli.events.emit("modal_event",{event:"closed",sender:"core",core:this})},_on_msg:function(e,t){this.on_msg(e,t)},on_open:function(){},on_close:function(){},on_load:function(){},on_init:function(){},on_update:function(){},on_msg:function(){}},init:function(){var l=this;this.$list=$(".modal-list"),$("[data-m-id]",this.$list).each(function(e,t){l.bind(t)});var e=getJsonFromUrl();if(e.service&&e.m_id)return this.$list.addClass("noanimate"),this.open(e.m_id),!1;flexbe_cli.events.on("modal_render.flexbe_modal",function(e,t){if(t&&t.id&&~t.render.indexOf("template")){var o=$('[data-id="'+t.id+'"]',l.$list),i=l.bind(o,{}),n=i.core,a=i.inited;void 0!==n&&a&&"function"==typeof n._on_update&&n._on_update(t)}}),flexbe_cli.events.on("client_msg.flexbe_modal",function(e,t){if(t&&t.id&&"modal"===t.is){var o=$('[data-id="'+t.id+'"]',l.$list),i=l.bind(o).core;void 0!==i&&i._on_msg(t.msg,t.data)}}),flexbe_cli.events.on("modal_command.flexbe_modal",function(e,t){if(t)switch(t.command){case"open":l.open(t.id,t.data);break;case"close":l.close(t.id)}}),$("body").on("click.modal-close",".m_modal .close",function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget).closest(".m_modal").data("id");l.close(t)}),flexbe_cli.is_admin||($(window).on("keyup.modal-close",function(e){if(27!=e.keyCode)return!0;var t=$(".m_modal.show").eq(0).attr("data-id");l.close(t)}),$("body").off("click.modal-close-overlay").on("click.modal-close-overlay",".modal-data",function(e){if(!flexbe_cli.run.is_mobile&&Object.keys(l.opened).length&&($(e.target).is(".modal-data")||3===flexbe_cli.theme_id&&$(e.target).is(".modal-data > .scroller"))){var t=$(".m_modal.show").eq(0).attr("data-id");l.close(t)}})),this.popstate(),$(window).on("load.flexbe_modal",function(){l.loadStyle()})},bind:function(e,t){var o=(e=$(e)).attr("data-m-id"),i=e.data("_core"),n=!!i;return n||(this.data[o]||this.register(o),i=new this.data[o](e),e.data("_core",i),i._on_init(t)),{core:i,inited:n}},register:function(t,e){var o=this;if(void 0===e&&(e={}),t||console.log("Модал не имеет уник.номера!"),"undefined"!=typeof jQuery){flexbe_cli.modal.data[t]=function(e){this.$area=e,this.$modal=e,this.template_id=t,this.id=e.data("id"),this.type=e.data("mType")||[]};var i=$.extend(!0,{},this.proto);flexbe_cli.modal.data[t].prototype=_extends({},i,e)}else setTimeout(function(){return o.register(t,e)},20)},popstate:function(){var o=this;if(flexbe_cli.is_admin)return!1;setTimeout(function(){if(/^#{1,2}/.test(location.hash)){var e=location.hash.replace(/^#{1,2}/,""),t=o.$list.find('._anchor[name="'+e+'"], .m_modal[data-id="'+e+'"]').closest(".m_modal").attr("data-id");o.opened[t]||o.open(t)}else o.close()},50)},loadStyle:function(e,t){var o=[],i=function(e){o.push("/_s/theme/"+flexbe_cli.theme_id+"/modal/"+e+"/_modal.css"),flexbe_cli.adaptive&&o.push("/_s/theme/"+flexbe_cli.theme_id+"/modal/"+e+"/_mobile.css")};e?i(e):Object.keys(this.data).forEach(i),flexbe_cli.require(o,t,e?1e3:1e4)},find:function(e){var t=$(".m_"+e);return!!t.length&&t},open:function(e,t,o){var i=this;void 0===t&&(t={}),void 0===o&&(o={});var n=this.find(e);if(1<n.length){var a=o.multivar;if(!a){var l=String(e).split("_")[0];a=$('[data-id="'+l+'"]').attr("data-multivar")}var s=[];a&&"default"!==a&&(s=n.filter('[data-multivar="'+a+'"]').eq(0)),n=s.length?s.eq(0):n.eq(0)}if(!n.length)return!1;var d=n.find(".modal-data > ._anchor").attr("name");d&&(location.hash="#"+d);var r=this.$list,c=n.data("_core");return c?(this.loadStyle(c.template_id,function(){n.data("_options",o),i.opened[e]=!0,$("body").addClass("overflow"),n.siblings().removeClass("show"),n.addClass("show"),r.addClass("show"),setTimeout(function(){r.addClass("overlay"),"object"===_typeof(c)&&c._on_open(t),"function"==typeof o.on_open&&o.on_open(c)},30),flexbe_cli.run.is_OSX&&flexbe_cli.run.is_mobile&&(i.lastScroll=flexbe_cli.scroll.latest,$(".container-list, .widget-list, .mobile-menu, header, footer").css({display:"none"}),r.css({position:"relative"}),n.css({position:"relative"}),$("body, html").scrollTop(0))}),!0):(console.warn("Try to open modal without core object"),!1)},close:function(e){var t=this.$list;if($("body").removeClass("overflow"),!e)return Object.keys(this.opened).map(this.close.bind(this));var o=$(".m_modal.m_"+e),i=o.data("_core"),n=_extends({},o.data("_options"));o.data("_options",{}),o.removeClass("show"),this.opened[e]=!1,/^#{1,2}/.test(location.hash)&&(location.hash="##"),$(".m_modal").hasClass("show")||t.removeClass("show overlay"),"object"==_typeof(i)&&i._on_close(),"function"==typeof n.on_close&&n.on_close(i),flexbe_cli.run.is_OSX&&flexbe_cli.run.is_mobile&&(t[0].style.cssText="",o[0].style.cssText="",$(".container-list, .widget-list, .mobile-menu, header, footer").css({display:""}),$("body, html").scrollTop(this.lastScroll))}};
function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}flexbe_cli.widget={data:{},proto:{is:"widget",require:[],_on_init:function(){var e=this;flexbe_cli.require(this.require,function(){e.on_load(),e.on_init(),e.isInit=!0,flexbe_cli.events.emit("widget_event",{event:"inited",sender:"core",core:e})})},_on_update:function(e){var t=this;flexbe_cli.require(this.require,function(){t.on_load(),t.on_update(e),flexbe_cli.events.emit("widget_event",{event:"updated",sender:"core",core:t})})},_on_msg:function(e,t){this.on_msg(e,t)},on_load:function(){},on_init:function(){},on_update:function(){},on_msg:function(){}},init:function(){var r=this;this.$list=$(".widget-list"),$("[data-w-id]",this.$list).each(function(e,t){r.bind(t)}),flexbe_cli.events.on("widget_render.flexbe_widget",function(e,t){if(t&&t.id&&~t.render.indexOf("template")){var i=$('[data-id="'+t.id+'"]',r.$list),n=r.bind(i,{}),o=n.core,d=n.inited;void 0!==o&&d&&"function"==typeof o._on_update&&o._on_update(t)}}),flexbe_cli.events.on("client_msg.flexbe_widget",function(e,t){if(t&&t.id&&"widget"===t.is){var i=$('[data-id="'+t.id+'"]',r.$list),n=r.bind(i).core;void 0!==n&&n._on_msg(t.msg,t.data)}})},bind:function(e,t){var i=(e=$(e)).attr("data-w-id"),n=e.data("_core"),o=!!n;return o||(this.data[i]||this.register(i),n=new this.data[i](e),e.data("_core",n),n._on_init(t)),{core:n,inited:o}},register:function(t,e){var i=this;if(void 0===e&&(e={}),t||console.log("Виджет должен иметь уникальный номер!"),"undefined"!=typeof jQuery){flexbe_cli.widget.data[t]=function(e){this.$area=e,this.$widget=e,this.template_id=t,this.id=e.data("id"),this.type=e.data("wType")||[]};var n=$.extend(!0,{},this.proto);flexbe_cli.widget.data[t].prototype=_extends({},n,e)}else setTimeout(function(){return i.register(t,e)},20)}};
function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}flexbe_cli.element={data:{},proto:{is:"element",require:[],_on_init:function(){var e=this;flexbe_cli.require(this.require,function(){e.on_load(),e.on_init(),e.isInit=!0,flexbe_cli.events.emit("element_event",{event:"init",sender:"core",core:e})})},_on_update:function(){var e=this;flexbe_cli.require(this.require,function(){e.on_load(),e.on_update(),flexbe_cli.events.emit("element_event",{event:"update",sender:"core",core:e})})},_on_msg:function(e,t){this.on_msg(e,t)},on_load:function(){},on_init:function(){},on_update:function(){},on_msg:function(){}},init:function(){var n=this;$(".element-item").each(function(e,t){n.bind($(t))})},bind:function(e,t){var n=(e=$(e)).attr("data-b-id"),i=e.data("_core"),o=!!i;return o||(this.data[n]||this.register(n),i=new this.data[n](e),e.data("_core",i),i._on_init(t)),{core:i,inited:o}},register:function(t,e){var n=this;if(void 0===e&&(e={}),t||console.log("Элемент должен иметь уникальный номер!"),"undefined"!=typeof jQuery){flexbe_cli.element.data[t]=function(e){this.$area=e,this.$element=e,this.template_id=t,this.id=e.data("id"),this.type=e.data("eType")||[]};var i=$.extend(!0,{},this.proto);flexbe_cli.element.data[t].prototype=_extends({},i,e)}else setTimeout(function(){return n.register(t,e)},20)}};
flexbe_cli.menu={anchors:[],floating:!1,offset:0,init:function(){this.createMobileMenu(),this.floatingMenu()},floatingMenu:function(){if(!flexbe_cli.is_admin&&!this.floating){var i=[];if((i=$("[data-floating=true]").eq(0))[0]){var t,o=i.parents(".b_block").last().data("_core"),a=i.outerHeight(),l=parseInt(i.attr("data-floating-type"),10)||1;this.floating=o.id,i.siblings(".fixer").height(a),flexbe_cli.run.is_screen_mobile||flexbe_cli.run.is_screen_tablet_s?(i=$(".mobile-menu .menu-burger"),l=1):i=i.add(".mobile-menu .menu-burger"),function e(){var n;requestAnimationFrame(e),n=(o&&o.tween?o.tween.position:window.pageYOffset/(a/2))>=r,s!==n&&(s=n,i.off("transitionend"),n?(i.addClass("floating"),clearTimeout(t),t=setTimeout(function(){i.addClass("animate show")},50)):1===l?(i.removeClass("show"),i.one("transitionend",function(){i.removeClass("animate floating")})):i.removeClass("show animate floating"))}();var s=!1,r=.02;1===l&&(r=(o&&o.tween&&o.tween.height)<200?2:1)}}},createMobileMenu:function(){if(!flexbe_cli.adaptive||99===flexbe_cli.theme_id)return!1;var e=$(".b_block:not(.hidden) .menu-burger");if(!this.$mobileMenu&&(this.$mobileMenu=$('<div class="mobile-menu">\n                    <div class="menu-burger">\n                        <span class="menu"><i></i><i></i><i></i></span>\n                    </div>\n                    <div class="menu-wrapper">\n                        <div class="overlay"></div>\n                        <div class="menu-content">\n                            <div class="scroll-wrap">\n                                <div class="logo-holder"></div>\n                                <div class="menu-holder"></div>\n                                <div class="text-holder"></div>\n                                <div class="socials-holder"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>').appendTo("body"),e[0])){var n=e.eq(0).closest(".b_block").data("bId"),i=e.eq(0).closest(".b_block").data("id");e.not(":first").remove(),this.$mobileMenu.attr("data-id",i).attr("data-b-id",n)}var a=this.$mobileMenu.find(".logo-holder"),l=this.$mobileMenu.find(".menu-holder"),s=this.$mobileMenu.find(".text-holder"),r=this.$mobileMenu.find(".socials-holder");function c(e,n){var i=d(e),l=i.url,s=i.search,r=i.hash,c=0;return n.find("a").each(function(e,n){var i=d(n.href),t=i.url,o=i.hash,a=i.search;t===l&&a===s&&o===r&&(c+=1)}),!c}function d(e){var n=String(e).trim().replace(/http(?:s)?:\/\//,"//").split("?"),i=(n[0]||"").replace(/^\.\//,"").replace(/\/$/,""),t=(n[1]||"").split("#"),o=t[0],a=t[1];return i&&location.host+location.pathname!==i.replace(/^\/\//,"")||(i="./"),{url:i,search:o,hash:a}}$(".b_block").not(".hidden").find('[data-role="mobile-menu"]').each(function(e,n){$(n).find("[data-role]").each(function(e,n){var i,t,o=$(n);switch(o.attr("data-role")){case"logo":t=o,a.contents().length||a.html(t.contents());break;case"text":i=o,s.contents().length||s.html(i.contents());break;case"menu":!function(e){l.contents().length||(l.append(e.clone().contents()),l.find("li").remove());var o=l.find("ul");e.find("a[href]").each(function(e,n){var i=c(n.href,o);if(i){var t=$(n).closest("li");o.append(t)}})}(o);break;case"socials":!function(e){if(r.contents().length){var o=r.find(".socials-wrap");e.find("a[href]").each(function(e,n){var i=$(n).attr("href"),t=c(i,o);t&&o.append(n)})}else r.append(e.contents())}(o)}})}),l.find(".component-menu").removeAttr("data-style"),this.toggleMobileMenu()},toggleMobileMenu:function(){var n,i=$("body > .mobile-menu").eq(0);function t(e){clearTimeout(n),n=setTimeout(function(){$("body").toggleClass("overflow fixed",e),i.toggleClass("show",e).off("click.mobile-menu-close"),e&&i.on("click.mobile-menu-close",function(e){var n=$(e.target);console.log(n),(2===flexbe_cli.theme_id&&n.is(".overlay")||3===flexbe_cli.theme_id&&!n.closest(".menu-holder").length)&&t(!1)})},100)}$(".menu-burger").off("click.mobile-menu-toggle").on("click.mobile-menu-toggle",function(){t(!i.hasClass("show"))}),i.on("close",function(){t(!1)}),i.on("open",function(){t(!0)})}};
function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}flexbe_cli.stat={u_id:0,time:0,goals:{quiz:"quiz_start",modal:"modal_open",modal_form:"form_open",modal_product:"product_show",modal_done:"order_done",cart:"add_to_cart",link:"link_open",file:"file_load",close:"modal_close"},init:function(){var e=getCookie("user_id"),t=-1<navigator.userAgent.toLowerCase().indexOf("slimerjs")||-1<navigator.userAgent.toLowerCase().indexOf("phantomjs");if(flexbe_cli.is_admin||flexbe_cli.run.is_bot||!flexbe_cli.p_id||e||t)return!1;var i=getCookie("f_uid");i?(this.u_id=i,this.user_visit()):this.user_create(),this.AB.init(),this.ecommerce.init()},getGoal:function(e,t){return"modal"===e&&(/form/.test(t)&&(e="modal_form"),/done/.test(t)?e="modal_done":/product/.test(t)&&(e="modal_product")),this.goals[e]||!1},reach_goal:function(e,t){if(t=void 0!==t?t:{},!flexbe_cli.is_admin)try{if(flexbe_cli.yandex_id)var i=setInterval(function(){if("undefined"==typeof Ya||"object"!==_typeof(Ya._metrika.counter))return!1;clearInterval(i),Ya._metrika.counter.reachGoal(e,t)},50);"function"==typeof ga&&ga("send","event",e,"send")}catch(e){}},ecommerce:{currencyCodes:{"€":{code:"EUR",name:"Евро"},Br:{code:"BYR",name:"Белорусский Рубль"},"₴":{code:"UAH",name:"Гривна"},"грн.":{code:"UAH",name:"Гривна"},"₸":{code:"KZT",name:"Тенге"},"тңг":{code:"KZT",name:"Тенге"}},currencyCode:"RUB",initialized:!1,init:function(){flexbe_cli.lang.currency&&this.currencyCodes[flexbe_cli.lang.currency]&&(this.currencyCode=this.currencyCodes[flexbe_cli.lang.currency].code),this.initialized=!0,window.dataLayer||(window.dataLayer=[])},add:function(e,t,i,o){if(this.initialized){window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,add:{products:[{id:e,name:t,price:o,quantity:i}]}}})}},remove:function(e,t){if(this.initialized){window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,remove:{products:[{id:e,name:t}]}}})}},purchase:function(e,t){if(void 0===t&&(t=!1),this.initialized&&(e||0!=e.length)){t||(t=Math.ceil(1e4*Math.random()));try{window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,purchase:{actionField:{id:t},products:e.map(function(e){return{id:e.id,name:e.title,price:e.price,quantity:e.count}})}}})}catch(e){}}}},get_utm:function(){var e=function(e){if(""===e)return{};for(var t={},i=0;i<e.length;++i){var o=e[i].split("=");2==o.length&&(t[o[0]]=decodeURIComponent(o[1].replace(/\+/g," ")))}return t}(window.location.search.substr(1).split("&")),i={};return $.each(e,function(e,t){"utm_"===e.substring(0,4)&&(i[e]=t)}),document.referrer&&(i.url=document.referrer),i},user_create:function(){var t=this;$.ajax({url:"/mod/stat/",type:"POST",dataType:"json",data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,utm_data:this.get_utm()}}).done(function(e){"object"==_typeof(e)&&null!==e&&e.u_id?(setCookie("f_uid",e.u_id,{Path:"/"}),t.u_id=e.u_id):console.warn("cookie не установлена",e)})},user_visit:function(){$.ajax({url:"/mod/stat/visit/",type:"POST",dataType:"json",data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,u_id:this.u_id}}).done($.proxy(function(e){e.v_id||console.warn("cookie визита не установлена",e)},this))},AB:{init:function(){var o=this;flexbe_cli.events.off("entity_screen.abstat").on("entity_screen.abstat",function(e,t){if(t&&"screen"===t.event&&t.state&&t.core&&"block"===t.core.is){var i=t.core.$area;o.fixview(i.attr("data-abtest-id"),i.attr("data-abtest-variant"))}})},setcookie:function(e){setCookie("f_ab",JSON.stringify(e),{expires:604800,path:"/",domain:document.location.hostname})},getcookie:function(){var t=!0,e=getCookie("f_ab");if(e)try{e=JSON.parse(decodeURIComponent(e)),t=!1}catch(e){console.warn("cant parse abtest cookie",e),t=!0}return t&&(e={view:{},lead:[]}),e},proccess:{},fixview:function(i,o){if(void 0===i||void 0===o||"a"!=o&&"b"!=o)return!1;void 0!==this.getcookie().view[i]||this.proccess[i]||(this.proccess[i]=!0,$.ajax({url:"/mod/stat/abtest",type:"POST",dataType:"json",data:{test_id:i,variant:o,s_id:flexbe_cli.s_id,p_id:flexbe_cli.p_id}}).done($.proxy(function(e){if(this.proccess[i]=!1,1==e.status){var t=flexbe_cli.stat.AB.getcookie();t.view[i]=o,flexbe_cli.stat.AB.setcookie(t)}},this)))},fixlead:function(e){if(flexbe_cli.bill&&1!=flexbe_cli.bill.abtest)return!1;if(0<e.length){var t=this.getcookie(),i=$.merge(t.lead,e);t.lead=$.grep(i,function(e,t){return $.inArray(e,i)===t}),this.setcookie(t)}}}};
flexbe_cli.timer={list:{},create:function(t){return this.list[t.id]=new flexbe_cli.timer.Timer(t),this.list[t.id]}},flexbe_cli.timer.Timer=function(t){this.o=t,this.create()},flexbe_cli.timer.Timer.prototype={o:{},create:function(){var t=$(this.o.block).find(this.o.item),e=t.data("time"),i=new Date;if(this.lang(t),"date"==e.type){var a=e.my?e.my.toString().split("."):[1,2018];this.final_date=new Date(a[1],parseInt(a[0],10)-1,e.d,e.h,e.m)}else if("monthly"==e.type)this.final_date=new Date(i.getFullYear(),i.getMonth(),e.d,e.h,e.m),i.getTime()>this.final_date.getTime()&&(this.final_date=new Date(i.getFullYear(),i.getMonth()+1,e.d,e.h,e.m)),parseInt(e.d,10)!=this.final_date.getDate()&&(this.final_date.setDate(0),i.getTime()>this.final_date.getTime()&&(this.final_date=new Date(this.final_date.getFullYear(),this.final_date.getMonth()+2,0,e.h,e.m)));else if("weekly"==e.type){var s=parseInt(i.getDate(),10)-parseInt(i.getDay(),10)+parseInt(e.dw,10);this.final_date=new Date(i.getFullYear(),i.getMonth(),s,e.h,e.m),i.getTime()>this.final_date.getTime()&&this.final_date.setDate(this.final_date.getDate()+7)}else"daily"==e.type?(this.final_date=new Date(i.getFullYear(),i.getMonth(),i.getDate(),e.h,e.m),i.getTime()>this.final_date.getTime()&&this.final_date.setDate(this.final_date.getDate()+1)):(this.final_date=new Date,this.final_date.setMonth(this.final_date.getMonth()+1,15));this.item_d_1=t.find(".d [data-value]").eq(0),this.item_d_2=t.find(".d [data-value]").eq(1),this.item_d_3=t.find(".d [data-value]").eq(2),this.item_h_1=t.find(".h [data-value]").eq(0),this.item_h_2=t.find(".h [data-value]").eq(1),this.item_m_1=t.find(".m [data-value]").eq(0),this.item_m_2=t.find(".m [data-value]").eq(1),this.item_s_1=t.find(".s [data-value]").eq(0),this.item_s_2=t.find(".s [data-value]").eq(1),this.last_offset={d:void 0,h:void 0,m:void 0,s:void 0},!flexbe_cli.is_admin&&this.final_date.getTime()<(new Date).getTime()?$(this.o.block).hide():this.start()},update:function(){if(this.second_left=this.final_date.getTime()-(new Date).getTime(),this.second_left=Math.ceil(this.second_left/1e3),this.second_left=this.second_left<0?0:this.second_left,this.offset={d:Math.floor(this.second_left/60/60/24),h:Math.floor(this.second_left/60/60)%24,m:Math.floor(this.second_left/60)%60,s:this.second_left%60},this.last_offset.d!=this.offset.d){var t=this.offset.d.toString().split("");t.length<2&&t.unshift(0),t.length<3&&t.unshift(0),this.item_d_1.attr("data-value",t[0]).text(t[0]),this.item_d_2.attr("data-value",t[1]).text(t[1]),this.item_d_3.attr("data-value",t[2]).text(t[2])}if(this.last_offset.h!=this.offset.h){var e=this.offset.h.toString().split("");e.length<2&&e.unshift(0),this.item_h_1.attr("data-value",e[0]).text(e[0]),this.item_h_2.attr("data-value",e[1]).text(e[1])}if(this.last_offset.m!=this.offset.m){var i=this.offset.m.toString().split("");i.length<2&&i.unshift(0),this.item_m_1.attr("data-value",i[0]).text(i[0]),this.item_m_2.attr("data-value",i[1]).text(i[1])}if(this.last_offset.s!=this.offset.s){var a=this.offset.s.toString().split("");a.length<2&&a.unshift(0),this.item_s_1.attr("data-value",a[0]).text(a[0]),this.item_s_2.attr("data-value",a[1]).text(a[1])}this.last_offset=this.offset,this.second_left<0&&this.stop()},start:function(){null!==this.interval&&clearInterval(this.interval),this.update(),this.interval=setInterval($.proxy(function(){this.update()},this),200)},stop:function(){clearInterval(this.interval),this.interval=null},lang:function(t){t.find("[data-timer-text]").each(function(t,e){var i=$(e).attr("data-timer-text"),a=flexbe_cli.lang.get("timer."+i);$(e).text(a)})}};
function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}flexbe_cli.form={list:{},create:function(t,e){return void 0===e&&(e=!0),this.list[t.id]=new FlexbeForm(t,e),this.list[t.id]}};var FlexbeForm=function(){function t(t,e){this.is_init=!1,this.o=t,e&&this.bind()}var e=t.prototype;return e.bind=function(){this.$data=this.o.block.find(this.o.form||".component-form, .component-quiz"),this.$form=this.$data.find("form"),this.scope_id="."+this.o.id,this.unbind(),this.init()},e.unbind=function(){this.$data.off(this.scope_id)},e.customize=function(){this.fileInput(),this.customSelect(),this.enterSubmit(),this.clearError(),this.textResize()},e.init=function(){var t=this;this.$form.length<1||(this.action=this.$form.find('input[name="action"]').val(),this.is_init=!0,this.$form.find('input[name="p_id"]').val(flexbe_cli.p_id),this.$form.find(".form_field_submit, .form-submit, .quiz-submit").off("click").on("click",function(){t.$form.submit()}),this.$form.off("submit").on("submit",function(){if(t.busy||!t.validation())return!1;if(t.busy=!0,flexbe_cli.stat.u_id&&t.add_fields([{name:"f_uid",type:"hidden",value:flexbe_cli.stat.u_id}],!1),"function"==typeof t.o.before_send&&!1===t.o.before_send())return t.busy=!0,!1;if(t.add_fields([{name:"jsform",type:"hidden",value:parseInt(448312,10)}],!1),"undefined"!=typeof FormData)t.send_formdata();else{if(!(t.$form.find('input[type="file"]').length<1))return!0;t.send_ajax()}return!1}))},e.add_fields=function(t,e){if(void 0===e&&(e=!0),this.is_init){var i=this.$form.find(".form_fields_advanced");t.length&&i[0]&&(e&&i.empty(),t.forEach(function(t){i.find('input[name="'+t.name+'"]').remove();var e=$("<input>").attr("type",t.type).attr("name",t.name).attr("value",t.value);i.append(e)}))}},e.add_items=function(t){if(void 0===t&&(t=[]),t&&t.length){var e=0,i=0,a="",n=[];t=t.map(function(t){return"object"!==_typeof(t)?{}:(t.count=parseInt(t.count,10)||1,t.price=parseFloat(t.price)||0,t.title="string"==typeof t.title&&t.title.trim()||t.title||"",e+=t.price*t.count||0,i+=t.count,t)});try{a=JSON.stringify(t)}catch(t){}n.push({type:"hidden",name:"product[items]",value:a}),n.push({type:"hidden",name:"product[price]",value:e}),n.push({type:"hidden",name:"product[total]",value:i}),e&&(n.push({type:"hidden",name:"pay[price]",value:e}),n.push({type:"hidden",name:"pay[desc]",value:1<i?"Товаров в корзине: "+i:t[0].title})),this.add_fields(n)}},e.send_formdata=function(){var e=this,t=new FormData(this.$form.get(0));t.append("is_ajax","true"),"undefined"!=typeof flexbeAPI&&void 0!==flexbeAPI.customLeadData&&t.append("customLeadData",JSON.stringify(flexbeAPI.customLeadData)),t.append("f_ab",JSON.stringify(flexbe_cli.stat.AB.getcookie())),this.$data.addClass("submitting"),$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",processData:!1,contentType:!1,data:t,xhr:function(){var t=$.ajaxSettings.xhr();return t.upload,t}}).done(function(t){setTimeout(function(){e.$data.addClass("submit-ok step-1"),setTimeout(function(){e.$data.addClass("submit-ok step-2"),setTimeout(function(){e.$data.addClass("submit-ok step-3"),setTimeout(function(){e.$data.removeClass("submitting submit-ok step-1 step-2 step-3"),e.$data.find(".form_field_file_holder").removeClass("active"),e.$form.get(0).reset(),t.send_formdata=!0,void 0!==t.pay&&(e.pay=t.pay),e.show_done()},1e3)},300)},400)},500)}).fail(function(){console.error("Ошибка при отправке формы"),e.$data.removeClass("submitting")})},e.send_ajax=function(){var e=this,t=this.$form.serialize();$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",data:t+"&is_ajax=true"}).done(function(t){e.$form.get(0).reset(),t.send_ajax=!0,void 0!==t.pay&&(e.pay=t.pay),e.show_done()})},e.validation=function(){var r=!0;return this.$form.find("[data-type]").each(function(t,e){var i,a,n=$(e),o=n.attr("data-type"),s=n.attr("data-is-required"),l=isNaN(1*s)?"true"==s:Boolean(1*s);n.removeClass("is_error"),i=n.find("input,textarea,select").not('[type="hidden"]'),-1!=$.inArray(o,["text","textarea","email","phone","name"])?a=$.trim(i.val()):"file"==o?a=i.get(0).files:"checkbox"===o&&(a=i.prop("checked"));try{if(l&&void 0!==a&&a.length<1)throw flexbe_cli.lang.get("form.required");if(l&&"checkbox"===o&&!a)throw flexbe_cli.lang.get("form.required");if("email"==o&&"email"==i.attr("data-check")&&0<a.length){if(!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Zа-яёА-ЯЁ\-0-9]+\.)+[a-zA-Zа-яёА-ЯЁ]{2,}))$/.test(a))throw flexbe_cli.lang.get("form.email")}if("phone"==o&&"phone"==i.attr("data-check")&&0<a.length){if(/[^0-9+\(\)\-\s]/.test(a))throw flexbe_cli.lang.get("form.digits");if(a.replace(/[^0-9]/g,"").length<5)throw flexbe_cli.lang.get("form.minlength")}}catch(t){n.addClass("is_error"),"checkbox"===o?n.find(".checkbox, .check-box").attr("title",t):n.find(".error").attr("title",t).html('<svg viewBox="0 0 2 8"><path d="M0 1c0-.552.444-1 1-1 .552 0 1 .444 1 1v3c0 .552-.444 1-1 1-.552 0-1-.444-1-1V1zm1 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" fill="currentColor" fill-rule="evenodd"/></svg>'),r=!1}}),r},e.show_done=function(){"function"==typeof this.o.after_send&&this.o.after_send(),this.busy=!1,flexbe_cli.stat.reach_goal("order_done");try{var t=this.$form.find('input[name="goal"]').val();void 0!==t&&""!==t&&flexbe_cli.stat.reach_goal(t)}catch(t){}try{var e=this.$form.find('textarea[name="goal_html"]').val();if("string"==typeof e&&e.trim()){var i=document.write;document.write=function(t){$("body").eq(0).append(t)},$("body").eq(0).append('<div style="display:none">'+e+"</div>"),setTimeout(function(){document.write=i},1e4)}}catch(t){}if("pay"===this.action&&void 0!==this.pay&&null!==this.pay){if(0<this.pay.pay_link.length){var a=window.location.origin+window.location.pathname+(window.location.search?window.location.search+"&":"?")+"pay_id="+this.pay.pay_id+"&h="+this.pay.pay_hash;try{history.pushState(null,null,a),setTimeout(function(){flexbe_cli.events.emit("pay",{action:"init"})},200)}catch(t){setTimeout(function(){document.location=a},500)}}}else if("redirect"===this.action){var n=this.$form.find('input[name="action_redirect"]').val();0<n.length&&setTimeout(function(){document.location=n},500)}else{var o=this.$data.find("[data-modal-id]").attr("data-modal-id");if(!flexbe_cli.modal.find(o)){var s=String(this.o.id||this.o.block.attr("data-id"));o=(s&&s.split("_")[0])+"_"+o}flexbe_cli.events.emit("modal_command",{command:"open",id:o})}},e.set_name=function(t){this.o.name=t},e.fileInput=function(){this.$data.on("change"+this.scope_id,".file-input",function(t){var e=$(t.currentTarget),i=e.parents(".form_field_file_holder"),a=e.val(),n=t.currentTarget.files.length;i.addClass("active"),e.parents(".form_field").removeClass("is_error"),1===n&&i.find(".files_name_holder_text").text(a),1<n&&i.find(".files_name_holder_text").text(n+" файлов"),0===n&&i.removeClass("active")}),this.$data.on("click"+this.scope_id,".clear_files",function(t){var e=$(t.currentTarget).parents(".form_field_file_holder");e.find(".file-input").val(""),e.removeClass("active")})},e.enterSubmit=function(){flexbe_cli.is_admin||$(window).on("keyup"+this.scope_id,function(t){if(13==t.which){var e=$(".m_modal.show").eq(0);if(e.find(".form_field_textarea").is(":focus"))return!1;e.find("form").submit()}})},e.clearError=function(){this.$data.on("click"+this.scope_id,".form_field",function(t){$(t.currentTarget).removeClass("is_error").find("input, textarea").focus()})},e.phoneMask=function(){var a=this;this.$data.find(".form_phone").on("keypress",function(t){var e=t.charCode||t.keyCode||0,i=$(a);return 0===i.val().length&&i.val(i.val()+"("),8!==e&&9!==e&&(4===i.val().length&&i.val(i.val()+")"),5===i.val().length&&i.val(i.val()+" "),9===i.val().length&&i.val(i.val()+"-"),14<=i.val().length&&i.val(i.val().slice(0,13))),8==e||9==e||46==e||48<=e&&e<=57||96<=e&&e<=105}).on("focus",function(t){var e=$(t.currentTarget);if(0===e.val().length)e.val("(");else{var i=e.val();e.val("").val(i)}}).on("blur",function(t){var e=$(t.currentTarget);"("===e.val()&&e.val("")})},e.textResize=function(){this.$data.find(".autosize").each(function(t,e){var i=e.offsetHeight-e.clientHeight,a=$(e);a.removeAttr("data-autoresize"),a.off("keyup input").on("keyup input",function(t){t.currentTarget.style.height=t.currentTarget.scrollHeight+i+"px"})})},e.customSelect=function(){this.$data.find(".dropdown-container").remove(),this.$data.find("select.custom-select").each(function(t,e){var a=$(e),i=a.children("optgroup"),n=a.closest('[data-type="select"]'),s="",l="";i.length&&i.each(function(t,e){var i=$(e),a=i.attr("label");l+='<li class="optgroup">'+a+"</li>",i.children("option").each(function(t,e){var i=$(e),a=i.attr("value"),n=i.text()||"—",o=i.attr("selected");l+="selected"===o?'<li class="selected" data-value="'+a+'">'+(s=n)+"</li>":'<li data-value="'+a+'">'+n+"</li>"})}),a.children("option").each(function(t,e){var i=$(e),a=i.val(),n=i.text()||"—",o=i.attr("selected");l+="selected"===o?'<li class="selected" data-value="'+a+'">'+(s=n)+"</li>":'<li data-value="'+a+'">'+n+"</li>"});var o=$('<div class="dropdown-container">\n                    <div class="dropdown-select">\n                        <span>'+s+'</span>\n                    </div>\n                    <ul class="dropdown-select-ul">'+l+"</ul>\n                </div>");a.after(o),o.off("click.selectdd").on("click.selectdd",".dropdown-select",function(){var t=o.hasClass("active");o.toggleClass("active",!t),n.toggleClass("active",!t),t||n.siblings('[data-type="select"]').removeClass("active").find(".dropdown-container").removeClass("active")}),o.off("click.selectli").on("click.selectli",".dropdown-select-ul li",function(t){var e=$(t.currentTarget);if(!e.hasClass("optgroup")){var i=e.closest("ul").siblings(".dropdown-select");o.toggleClass("active"),o.closest('[data-type="select"]').toggleClass("active"),e.siblings("li").removeClass("selected"),e.addClass("selected"),a.val(e.attr("data-value")),i.children("span").html(e.text())}})})},t}();
flexbe_cli.quiz={list:{},init:function(e){var s=this;$(".component-quiz",e)[0]&&(this.createQuiz($(e)),flexbe_cli.events.off("quiz_command").on("quiz_command",function(e,t){var i=t.id,a=s.list[i];a&&("start"===t.command?a.toStep(1):"step"===t.command&&a.toStep(t.step))}))},createQuiz:function(e){var t=e.data("id");this.list[t]=new flexbe_cli.quiz.Quiz(t,e)}},flexbe_cli.quiz.Quiz=function(e,t){this.id=e,this.bind(t)},flexbe_cli.quiz.Quiz.prototype={$quiz:null,current:0,total:0,bind:function(e){this.$block=e,this.block=this.$block.data("_core"),this.$container=e.find(".quiz-container"),this.$quiz=e.find(".component-quiz"),this.$form=this.$quiz.find("form"),this.$steps=this.$quiz.find(".quiz-steps"),this.$progress=this.$quiz.find('[data-quiz-part="progress"]'),this.$progress[0]||(this.$progress=e.find('[data-quiz-part="progress"]')),this.current=parseInt(this.$quiz.attr("data-active-step"),10)||0,this.total=parseInt(this.$quiz.attr("data-total-steps"),10),this.hasWellcome=!!parseInt(this.$quiz.attr("data-wellcome"),10),this.hasDone=!!parseInt(this.$quiz.attr("data-done"),10),this.init()},init:function(){this.control(),this.formInit(),this.toStep(this.$block.data("quiz-step")||0,!0)},control:function(){var a=this;flexbe_cli.is_admin||(this.$quiz.on("keydown",function(e){if(-1!==[9,13].indexOf(e.which)&&!$(e.target).is("textarea, select")){var t=$(e.target).closest(".field").nextAll('[data-type="text"], [data-type="email"], [data-type="phone"], [data-type="name"]').eq(0);return t[0]?t.find("input").focus():a.toStep(a.current+1),e.preventDefault(),!1}}),this.$quiz.on("click","[data-quiz-action]",function(e){var t=$(e.currentTarget).data("quizAction"),i=a.current;"wellcome"===t?i=1:"next"===t?i+=1:"prev"===t?i-=1:"send"===t&&(i=a.total+1),a.toStep(i)}),(flexbe_cli.run.is_screen_mobile||flexbe_cli.run.is_screen_tablet_s)&&this.$quiz.find(".form-field-image-group").on("change","input",function(e){var t=$(e.currentTarget).closest(".form-field-image-item"),i=t.closest(".form-field-image-group"),a=t[0].offsetLeft,s=i.innerWidth(),n=t.outerWidth(!0);i.animate({scrollLeft:a-(s-n)/2})}))},toStep:function(e,t){var s=this;if(void 0===e||e<(this.hasWellcome?0:1))e=this.hasWellcome?0:1;else{if(!flexbe_cli.is_admin&&e>this.current&&!this.validateStep())return!1;if(e>this.total)return this.$form.submit(),!0}var i=this.$block.find(".b_head").length,a=this.hasWellcome&&0===e,n="done"===e,r=n?100:parseInt(100*e/this.total,10);if(t&&this.$block.addClass("noanimate"),this.current=e,this.$block.data("quiz-step",e),this.$quiz.attr("data-active-step",e),this.$container.attr("data-active-step",e),this.$progress.attr("data-current",e),this.$progress.attr("data-current-progress",r),this.$container.toggleClass("quiz-state-wellcome",a),this.$container.toggleClass("quiz-state-done",n),this.$container.toggleClass("quiz-state-started",!a&&!n),a||n){if(this.$container.length){var o=this.$container.find('[data-quiz-part="'+(a?"wellcome":"done")+'"]').outerHeight()||0;this.$container.css("minHeight",o)}}else{var l=this.$steps.find('[data-step-id="'+e+'"]'),c=l.outerHeight(),d=Boolean(l.find(".form-field-text-input").length);l.prevAll().removeClass("active next").addClass("prev"),l.nextAll().removeClass("active prev").addClass("next"),l.removeClass("next prev").addClass("active"),flexbe_cli.is_admin||(l.find(".form-field-image-group").focus(),l.find(".form-field-text-input").find("input, textarea").focus()),this.$progress.find(".progress-text .current").text(e),this.$progress.find(".progress-percent .current").text(r),this.$progress.find(".progress-loader-bar .current").css("width",r+"%"),this.$progress.find(".progress-loader-circle .current").attr("stroke-dashoffset",""+Math.abs(100-r)),this.$container.css("minHeight",c+"px"),i&&flexbe_cli.block.setHeaders(),setTimeout(function(){if(!(flexbe_cli.is_admin||flexbe_cli.run.is_mobile&&d)){var e=window.pageYOffset,t=s.$quiz.offset().top,i=t+c,a=!1;Math.abs(flexbe_cli.resize.height-s.block.tween.height)<5?a=s.block.tween.start:flexbe_cli.resize.height>s.block.tween.height&&(s.block.tween.start<e||s.block.tween.end>e+flexbe_cli.resize.height)?a=s.block.tween.start-s.block.tween.fix/2:(t<e||i>e+flexbe_cli.resize.height)&&(a=flexbe_cli.resize.height>c?t-(flexbe_cli.resize.height-c)/2:t),"number"==typeof a&&$("body, html").animate({scrollTop:a})}},350)}return t&&setTimeout(function(){s.$block.removeClass("noanimate")},150),flexbe_cli.events.emit("quiz_event",{event:"to_step",sender:"core",quiz:this}),!0},validateStep:function(e){e||(e=this.current);var c=!0;return this.$steps.find('[data-step-id="'+e+'"]').find("[data-type]").each(function(t,e){var i,a=$(e),s=a.attr("data-type"),n=a.attr("data-is-required"),r=isNaN(1*n)?"true"===n:Boolean(1*n);a.removeClass("is_error");var o=a.find("input, textarea, select").not('[type="hidden"]');0<=["text","textarea","email","phone","name"].indexOf(s)?i=o.val():0<=["checkbox","radio","image"].indexOf(s)?i=!!o.closest(":checked").length:"file"===s&&(i=o.get(0).files);try{if(r&&void 0!==i&&(!1===i||0===i.length))throw flexbe_cli.lang.get("form.required");if("email"==s&&"email"==o.attr("data-check")&&0<i.length){if(!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Zа-яёА-ЯЁ\-0-9]+\.)+[a-zA-Zа-яёА-ЯЁ]{2,}))$/.test(i))throw flexbe_cli.lang.get("form.email")}if("phone"==s&&"phone"==o.attr("data-check")&&0<i.length){if(/[^0-9+\(\)\-\s]/.test(i))throw flexbe_cli.lang.get("form.digits");if(i.replace(/[^0-9]/g,"").length<5)throw flexbe_cli.lang.get("form.minlength")}}catch(e){var l=a.offset().top;(0===t&&l<window.pageYOffset||l>window.pageYOffset+flexbe_cli.resize.height)&&$("body, html").animate({scrollTop:l-200+"px"},300),a.addClass("is_error"),a.find(".error").text(e),a.find("input, textarea").focus(),c=!1}}),c},fileInput:function(){this.$quiz.on("change",".file-input",function(e){var t=$(e.currentTarget),i=t.parents(".form-field-file"),a=i.find(".form-field-file-files"),s=t.val(),n=e.currentTarget.files.length;i.addClass("active"),t.parents(".field").removeClass("is_error"),0===n?i.removeClass("active"):1===n?a.find(".text").text(s):1<n&&a.find(".text").text(n+" "+(1<n&&n<5?"файла":"файлов"))}),this.$quiz.on("click",".form-field-file-files .clear-files",function(e){var t=$(e.currentTarget).parents(".form-field-file");t.find(".file-input").val(""),t.removeClass("active")})},customSelect:function(){var f=this;this.$quiz.find(".dropdown-container").remove(),this.$quiz.find("select").each(function(e,t){var a=$(t),i=a.children("optgroup"),r=a.closest('[data-type="select"]'),o="",l="";i.length&&i.each(function(e,t){var i=$(t),a=i.attr("label");l+='<li class="optgroup">'+a+"</li>",i.children("option").each(function(e,t){var i=$(t),a=i.attr("value"),s=i.text()||"—",n=i.attr("selected");l+="selected"===n?'<li class="selected" data-value="'+a+'">'+(o=s)+"</li>":'<li data-value="'+a+'">'+s+"</li>"})}),a.children("option").each(function(e,t){var i=$(t),a=i.val(),s=i.text()||"—",n=i.attr("selected");l+="selected"===n?'<li class="selected" data-value="'+a+'">'+(o=s)+"</li>":'<li data-value="'+a+'">'+s+"</li>"});var c=$('<div class="dropdown-container">\n                <div class="dropdown-select">\n                    <span>'+o+'</span>\n                    <i></i>\n                </div>\n                <ul class="dropdown-select-ul">'+l+"</ul>\n            </div>"),d=c.find(".dropdown-select-ul");a.after(c),c.off("click.selectdd").on("click.selectdd",".dropdown-select",function(){var e=f.$quiz.closest(".b_block"),t=e.outerHeight()-60,i=d.outerHeight(),a=Math.min(t,i),s=c.offset().top,n=e.data("_core").tween.end-30;n<s+a&&d.css({top:n-(s+a)+"px",maxHeight:a+"px"}),setTimeout(function(){var e=!c.hasClass("active");c.toggleClass("active",e),r.toggleClass("active",e),e&&$("body").on("click.quiz-select-element",function(e){$(e.target).is(c)||$(e.target).closest(c).length||(c.removeClass("active"),r.removeClass("active"),$("body").off("click.quiz-select-element"))})},50)}),c.off("click.selectli").on("click.selectli",".dropdown-select-ul li",function(e){var t=$(e.currentTarget);if(!t.hasClass("optgroup")){var i=t.closest("ul").siblings(".dropdown-select");c.removeClass("active"),r.removeClass("active"),t.siblings("li").removeClass("selected"),t.addClass("selected"),a.val(t.attr("data-value")),i.children("span").html(t.text())}})})},textareaAutoresize:function(){this.$quiz.find("[data-autoresize]").each(function(e,t){var i=t.offsetHeight-t.clientHeight,a=$(t);a.removeAttr("data-autoresize"),a.off("keyup input").on("keyup input",function(e){e.currentTarget.style.height=e.currentTarget.scrollHeight+i+"px"})})},formInit:function(){var e=this;this.customSelect(),this.fileInput(),this.textareaAutoresize(),this.$quiz.off("click.clear_error").on("click.clear_error",".field",function(e){$(e.currentTarget).removeClass("is_error").find("input, textarea").focus()}),this.$form.off("submit").on("submit",function(){return!e.busy&&(e.busy=!0,flexbe_cli.stat.u_id&&e.add_fields([{name:"f_uid",type:"hidden",value:flexbe_cli.stat.u_id}],!1),e.add_fields([{name:"jsform",type:"hidden",value:parseInt(448312,10)}],!1),"undefined"!=typeof FormData?(e.sendFormdata(),!1):!(e.$form.find('input[type="file"]').length<1)||(e.sendAjax(),!1))})},sendFormdata:function(){var t=this,e=new FormData(this.$form.get(0));e.append("is_ajax","true"),"undefined"!=typeof flexbeAPI&&void 0!==flexbeAPI.customLeadData&&e.append("customLeadData",JSON.stringify(flexbeAPI.customLeadData)),e.append("f_ab",JSON.stringify(flexbe_cli.stat.AB.getcookie())),this.$form.addClass("submitting"),$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",processData:!1,contentType:!1,data:e,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload,e}}).done(function(e){t.$form.removeClass("submitting"),t.$form.find(".form-field-file-holder").removeClass("active"),e.send_formdata=!0,void 0!==e.pay&&(t.pay=e.pay),t.afterSend()}).fail(function(){t.$form.removeClass("submitting")})},sendAjax:function(){var t=this;this.$form.addClass("submitting");var e=this.$form.serialize();$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",data:e+"&is_ajax=true"}).done(function(e){t.$form.removeClass("submitting"),t.$form.find(".form-field-file-holder").removeClass("active"),e.send_ajax=!0,void 0!==e.pay&&(t.pay=e.pay),t.afterSend()}).fail(function(e){t.$form.removeClass("submitting")})},afterSend:function(){var e=this,t=this.$form.find('input[name="action"]').val();flexbe_cli.stat.reach_goal("order_done");try{var i=this.$form.find('input[name="goal"]').val();void 0!==i&&""!==i&&flexbe_cli.stat.reach_goal(i)}catch(e){}try{var a=this.$form.find('textarea[name="goal_html"]').val();if("string"==typeof a&&a.trim()){var s=document.write;document.write=function(e){$("body").eq(0).append(e)},$("body").eq(0).append('<div style="display:none">'+a+"</div>"),setTimeout(function(){document.write=s},1e4)}}catch(e){}if("quiz_done"===t&&this.hasDone)this.busy=!1,this.toStep("done");else if("pay"===t&&void 0!==this.pay&&null!==this.pay&&0<this.pay.pay_link.length){var n=window.location.origin+window.location.pathname+(window.location.search?window.location.search+"&":"?")+"pay_id="+this.pay.pay_id+"&h="+this.pay.pay_hash;try{history.pushState(null,null,n),setTimeout(function(){flexbe_cli.events.emit("pay",{action:"init"})},200)}catch(e){setTimeout(function(){document.location=n},500)}this.busy=!1,this.toStep(0),this.$form.get(0).reset()}else if("redirect"===t){var r=this.$form.find('input[name="action_redirect"]').val();0<r.length&&setTimeout(function(){document.location=r},500)}else{var o=this.$form.find(".quiz-submit").attr("data-modal-id");if(!flexbe_cli.modal.find(o)){var l=this.$quiz.closest("[data-id]").attr("data-id");o=(l&&l.split("_")[0])+"_"+o}flexbe_cli.modal.open(o),setTimeout(function(){e.toStep(0),e.$form.get(0).reset(),e.busy=!1},150)}},add_fields:function(e,t){void 0===t&&(t=!0);var i=this.$quiz.find(".form-fields-advanced");e.length&&i[0]&&(t&&i.empty(),e.forEach(function(e){i.find('input[name="'+e.name+'"]').remove();var t=$("<input>").attr("type",e.type).attr("name",e.name).attr("value",e.value);i.append(t)}))}};
flexbe_cli.run.init=function(){flexbe_cli.block.initHeaders(),flexbe_cli.lang.init(),flexbe_cli.stat.init(),flexbe_cli.scroll.init(),flexbe_cli.resize.init(),flexbe_cli.components.init(),flexbe_cli.block.init(),flexbe_cli.modal.init(),flexbe_cli.widget.init(),flexbe_cli.element.init(),flexbe_cli.menu.init(),flexbe_cli.lib.init()};