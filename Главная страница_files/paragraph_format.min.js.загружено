(function(a){a(jQuery)})(function(a){a.extend(a.FE.DEFAULTS,{paragraphFormat:{N:'Normal',H1:'Heading 1',H2:'Heading 2',H3:'Heading 3',H4:'Heading 4',PRE:'Code'},paragraphFormatSelection:!1}),a.FE.PLUGINS.paragraphFormat=function(b){function d(l,m){var n=b.html.defaultTag();if(m&&m.toLowerCase()!=n)if(0<l.find('ul, ol').length){var o=a('<'+m+'>');l.prepend(o);for(var q,p=b.node.contents(l.get(0))[0];p&&0>['UL','OL'].indexOf(p.tagName);)q=p.nextSibling,o.append(p),p=q}else l.html('<'+m+'>'+l.html()+'</'+m+'>')}function e(l,m){var n=b.html.defaultTag();m||(m='div class="fr-temp-div" data-empty="true"'),m.toLowerCase()==n?l.replaceWith(l.html()):l.replaceWith(a('<'+m+'>').html(l.html()))}function f(l,m){var n=b.html.defaultTag();m||(m='div class="fr-temp-div"'+(b.node.isEmpty(l.get(0),!0)?' data-empty="true"':'')),m.toLowerCase()==n?(!b.node.isEmpty(l.get(0),!0)&&l.append('<br/>'),l.replaceWith(l.html())):l.replaceWith(a('<'+m+'>').html(l.html()))}function g(l,m){m||(m='div class="fr-temp-div"'+(b.node.isEmpty(l.get(0),!0)?' data-empty="true"':'')),l.replaceWith(a('<'+m+' '+b.node.attributes(l.get(0))+'>').html(l.html()))}return{apply:function(l){'N'==l&&(l=b.html.defaultTag()),b.selection.save(),b.html.wrap(!0,!0,!0,!0),b.selection.restore();var m=b.selection.blocks();b.selection.save(),b.$el.find('pre').attr('skip',!0);for(var n=0;n<m.length;n++)if(m[n].tagName!=l&&!b.node.isList(m[n])){var o=a(m[n]);'LI'==m[n].tagName?d(o,l):'LI'==m[n].parentNode.tagName&&m[n]?e(o,l):0<=['TD','TH'].indexOf(m[n].parentNode.tagName)?f(o,l):g(o,l)}b.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){a(this).prev().append('<br>'+a(this).html()),a(this).remove()}),b.$el.find('pre').removeAttr('skip'),b.html.unwrap(),b.selection.restore()},refreshOnShow:function(l,m){var n=b.selection.blocks();if(n.length){var o=n[0],p='N',q=b.html.defaultTag();o.tagName.toLowerCase()!=q&&o!=b.el&&(p=o.tagName),m.find('.fr-command[data-param1="'+p+'"]').addClass('fr-active').attr('aria-selected',!0)}else m.find('.fr-command[data-param1="N"]').addClass('fr-active').attr('aria-selected',!0)},refresh:function(l){if(b.opts.paragraphFormatSelection){var m=b.selection.blocks();if(m.length){var n=m[0],o='N',p=b.html.defaultTag();n.tagName.toLowerCase()!=p&&n!=b.el&&(o=n.tagName),0<=['LI','TD','TH'].indexOf(o)&&(o='N'),l.find('> span').text(b.opts.paragraphFormat[o])}else l.find('> span').text(b.opts.paragraphFormat.N)}}}},a.FE.RegisterCommand('paragraphFormat',{type:'dropdown',displaySelection:function(b){return b.opts.paragraphFormatSelection},defaultSelection:'Normal',displaySelectionWidth:100,html:function(){var b='<ul class="fr-dropdown-list" role="presentation">',d=this.opts.paragraphFormat;for(var e in d)if(d.hasOwnProperty(e)){var f=this.shortcuts.get('paragraphFormat.'+e);f=f?'<span class="fr-shortcut">'+f+'</span>':'',b+='<li role="presentation"><'+('N'==e?this.html.defaultTag()||'DIV':e)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+e+'" title="'+this.language.translate(d[e])+'">'+this.language.translate(d[e])+'</a></'+('N'==e?this.html.defaultTag()||'DIV':e)+'></li>'}return b+='</ul>',b},title:'Paragraph Format',callback:function(b,d){this.paragraphFormat.apply(d)},refresh:function(b){this.paragraphFormat.refresh(b)},refreshOnShow:function(b,d){this.paragraphFormat.refreshOnShow(b,d)},plugin:'paragraphFormat'})});